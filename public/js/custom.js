// This is the service worker with the Advanced caching

// Add this below content to your HTML page, or add the js file to your page at the very top to register service worker

if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register("/sw.js").then(function(registration) {
      // Registration was successful
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}else{
  console.log('Service Workers not supported');
}
function debugLine(e,t,i){!0===e&&(e="true"),!1===e&&(e="false");var n=e;if("object"==typeof e)for(name in n="",e){var r=e[name];n+=" "+name+": "+r}if(1!=t||i||(n+=" "+Math.random()),1==i){var o=jQuery("#debug_line");o.width(200),o.height()>=500&&o.html(""),n=o.html()+"<br> -------------- <br>"+n}jQuery("#debug_line").show().html(n)}function debugSide(e){var t="";for(name in e){var i=e[name];t+=name+" : "+i+"<br>"}jQuery("#debug_side").show().html(t)}function trace(e){"undefined"!=typeof console&&console.log(e)}function UGFunctions(){function e(e,t,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t[e]=i}var t=null,i=this,n={starTime:0,arrThemes:[],isTouchDevice:-1,isRgbaSupported:-1,timeCache:{},dataCache:{},lastEventType:"",lastEventTime:0,lastTouchStartElement:null,touchThreshold:700,handle:null};this.debugVar="",this.z__________FULL_SCREEN___________=function(){},this.toFullscreen=function(e,t){if(e.requestFullscreen)e.requestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},this.exitFullscreen=function(){if(0==i.isFullScreen())return!1;if(document.exitFullscreen)document.exitFullscreen();else if(document.cancelFullScreen)document.cancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},this.addFullScreenChangeEvent=function(t){document.webkitCancelFullScreen?e("webkitfullscreenchange",document,t):document.msExitFullscreen?e("MSFullscreenChange",document,t):document.mozCancelFullScreen?e("mozfullscreenchange",document,t):e("fullscreenchange",document,t)},this.destroyFullScreenChangeEvent=function(){jQuery(document).unbind("fullscreenChange"),jQuery(document).unbind("mozfullscreenchange"),jQuery(document).unbind("webkitfullscreenchange"),jQuery(document).unbind("MSFullscreenChange")},this.getFullScreenElement=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},this.isFullScreen=function(){var e=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement;return!!e},this.z__________GET_PROPS___________=function(){},this.getBrowserPrefix=function(){if(null!==t)return t;var e=["webkit","Moz","ms","O"],i=document.createElement("div");for(var n in e){var r=e[n];if(r+"Transform"in i.style)return r=r.toLowerCase(),t=r,r}return t="",""},this.getImageInsideParentDataByImage=function(e,t,n){var r=e.parent(),o=i.getImageOriginalSize(e);return i.getImageInsideParentData(r,o.width,o.height,t,n)},this.getImageInsideParentData=function(e,t,i,n,r,o,a){if(!r)r={};var s={};if(void 0===o)o=e.width();if(void 0===a)a=e.height();r.padding_left&&(o-=r.padding_left),r.padding_right&&(o-=r.padding_right),r.padding_top&&(a-=r.padding_top),r.padding_bottom&&(a-=r.padding_bottom);var l=null,u="100%",d=null,_=null,g="display:block;margin:0px auto;";if(t>0&&i>0){if("down"==n&&o>t&&a>i)_=(o-(l=t))/2,d=(a-(u=i))/2;else if("fill"==n){o>(l=(u=a)*(c=t/i))?(u=(l=o)/c,_=0,d=Math.round((u-a)/2*-1)):(d=0,_=Math.round((l-o)/2*-1))}else{var c;d=0,_=(o-(l=(u=a)*(c=t/i)))/2,"fitvert"!=n&&l>o&&(_=0,d=(a-(u=(l=o)/c))/2)}l=Math.floor(l),u=Math.floor(u),d=Math.floor(d),_=Math.floor(_),g="position:absolute;"}return r.padding_top&&(d+=r.padding_top),r.padding_left&&(_+=r.padding_left),s.imageWidth=l,s.imageHeight=u,s.imageTop=d,s.imageLeft=_,s.imageRight=_+l,s.imageBottom=0==d||"100%"==u?null:d+u,s.style=g,s},this.getElementCenterPosition=function(e,t){var n=e.parent(),r=i.getElementSize(e),o=i.getElementSize(n),a=o.width,s=o.height;t&&void 0!==t.padding_top&&(s-=t.padding_top),t&&void 0!==t.padding_bottom&&(s-=t.padding_bottom),t&&void 0!==t.padding_left&&(a-=t.padding_left),t&&void 0!==t.padding_right&&(a-=t.padding_right);var l={};return l.left=Math.round((a-r.width)/2),l.top=Math.round((s-r.height)/2),t&&void 0!==t.padding_top&&(l.top+=t.padding_top),t&&void 0!==t.padding_left&&(l.left+=t.padding_left),l},this.getElementCenterPoint=function(e,t){if(!t)t=!1;var n=i.getElementSize(e),r={};return r.x=n.width/2,r.y=n.height/2,1==t&&(r.x+=n.left,r.y+=n.top),r.x=Math.round(r.x),r.y=Math.round(r.y),r},this.getMousePosition=function(e,t){var i={pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY};if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(i.pageX=e.originalEvent.touches[0].pageX,i.pageY=e.originalEvent.touches[0].pageY,i.clientX=e.originalEvent.touches[0].clientX,i.clientY=e.originalEvent.touches[0].clientY),t){var n=t.offset();i.mouseX=i.pageX-n.left,i.mouseY=i.pageY-n.top}return i},this.getMouseElementPoint=function(e,t){var n={x:e.pageX,y:e.pageY};return i.getElementLocalPoint(n,t)},this.getElementLocalPoint=function(e,t){var i={},n=t.offset();return i.x=Math.round(e.x-n.left),i.y=Math.round(e.y-n.top),i},this.getImageOriginalSize=function(e,t,i){if(void 0!==t&&void 0!==i)return{width:t,height:i};var n=e[0];if(void 0===n)throw new Error("getImageOriginalSize error - Image not found");var r={};if(void 0===n.naturalWidth){if("number"==typeof e.data("naturalWidth"))return(r={}).width=e.data("naturalWidth"),r.height=e.data("naturalHeight"),r;var o=new Image;return o.src=n.src,o.complete?(r.width=o.width,r.height=o.height,e.data("naturalWidth",r.width),e.data("naturalHeight",r.height),r):{width:0,height:0}}return r.width=n.naturalWidth,r.height=n.naturalHeight,r},this.getimageRatio=function(e){var t=i.getImageOriginalSize(e);return i.getElementSize(e).width/t.width},this.isImageFitParent=function(e){var t=e.parent(),n=i.getElementSize(e),r=i.getElementSize(t);return n.width<=r.width&&n.height<=r.height},this.getElementSize=function(e){if(void 0===e)throw new Error("Can't get size, empty element");var t=e.position();return t.height=e.outerHeight(),t.width=e.outerWidth(),t.left=Math.round(t.left),t.top=Math.round(t.top),t.right=t.left+t.width,t.bottom=t.top+t.height,t},this.isElementBiggerThenParent=function(e){var t=e.parent(),n=i.getElementSize(e),r=i.getElementSize(t);return n.width>r.width||n.height>r.height},this.isPointInsideElement=function(e,t){return 0!=(e.x>=0&&e.x<t.width)&&0!=(e.y>=0&&e.y<t.height)},this.getElementRelativePos=function(e,t,n,r){if(!r)r=e.parent();if("number"==typeof e)var o={width:e,height:e};else o=i.getElementSize(e);var a=i.getElementSize(r);switch(t){case"top":case"left":t=0,n&&(t+=n);break;case"center":t=Math.round((a.width-o.width)/2),n&&(t+=n);break;case"right":t=a.width-o.width,n&&(t-=n);break;case"middle":t=Math.round((a.height-o.height)/2),n&&(t+=n);break;case"bottom":t=a.height-o.height,n&&(t-=n)}return t},this.z_________SET_ELEMENT_PROPS_______=function(){},this.zoomImageInsideParent=function(e,t,n,r,o,a,s){if(!n)n=1.2;if(!o)o="fit";var l,u,d,_,g=n,c=e.parent(),h=i.getElementSize(e),p=i.getImageOriginalSize(e),m=!1,f=0,v=0,b=0,y=0;if(r){var I=i.getMouseElementPoint(r,e);m=i.isPointInsideElement(I,h),b=I.x,y=I.y}else m=!1;if(0==m){var w=i.getElementCenterPoint(e);b=w.x,y=w.y}if(1==t)l=h.height*g,u=h.width*g,0!=b&&(f=-(b*g-b)),0!=y&&(v=-(y*g-y));else{if(l=h.height/g,(u=h.width/g)<i.getImageInsideParentData(c,p.width,p.height,o,s).imageWidth)return i.scaleImageFitParent(e,p.width,p.height,o,s),!0;1==m&&(0!=b&&(f=-(b/g-b)),0!=y&&(v=-(y/g-y)))}if(a){var E=1;if(0!=p.width&&(E=u/p.width),E>a)return!1}if(i.setElementSize(e,u,l),0==t&&0==m){var T=i.getElementCenterPosition(e);d=T.left,_=T.top}else d=h.left+f,_=h.top+v;return i.placeElement(e,d,_),!0},this.placeElement=function(e,t,n,r,o,a){if(0==jQuery.isNumeric(t)||0==jQuery.isNumeric(n)){if(!a)a=e.parent();var s=i.getElementSize(e),l=i.getElementSize(a)}if(0==jQuery.isNumeric(t))switch(t){case"left":t=0,r&&(t+=r);break;case"center":t=Math.round((l.width-s.width)/2),r&&(t+=r);break;case"right":t=l.width-s.width,r&&(t-=r)}if(0==jQuery.isNumeric(n))switch(n){case"top":n=0,o&&(n+=o);break;case"middle":case"center":n=Math.round((l.height-s.height)/2),o&&(n+=o);break;case"bottom":n=l.height-s.height,o&&(n-=o)}var u={position:"absolute",margin:"0px"};null!==t&&(u.left=t),null!==n&&(u.top=n),e.css(u)},this.placeElementInParentCenter=function(e){i.placeElement(e,"center","middle")},this.setElementSizeAndPosition=function(e,t,i,n,r){var o={width:n+"px",height:r+"px",left:t+"px",top:i+"px",position:"absolute",margin:"0px"};e.css(o)},this.setElementSize=function(e,t,i){var n={width:t+"px"};null!=i&&(n.height=i+"px"),e.css(n)},this.cloneElementSizeAndPos=function(e,t,n,r,o){var a=e.position();if(null==a)throw new Error("Can't get size, empty element");!0===n?(a.height=e.outerHeight(),a.width=e.outerWidth()):(a.height=e.height(),a.width=e.width()),a.left=Math.round(a.left),a.top=Math.round(a.top),r&&(a.left+=r),o&&(a.top+=o),i.setElementSizeAndPosition(t,a.left,a.top,a.width,a.height)},this.placeImageInsideParent=function(e,t,n,r,o,a){var s=i.getImageInsideParentData(t,n,r,o,a),l="<img";return null!==s.imageWidth&&(l+=" width = '"+s.imageWidth+"'",s.style+="width:"+s.imageWidth+";"),null!=s.imageHeight&&("100%"==s.imageHeight?(l+=" height = '"+s.imageHeight+"'",s.style+="height:"+s.imageHeight+";"):(l+=" height = '"+s.imageHeight+"'",s.style+="height:"+s.imageHeight+"px;")),null!==s.imageTop&&(s.style+="top:"+s.imageTop+"px;"),null!==s.imageLeft&&(s.style+="left:"+s.imageLeft+"px;"),e=i.escapeDoubleSlash(e),l+=" style='"+s.style+"'",l+=' src="'+e+'"',l+=">",t.html(l),t.children("img")},this.scaleImageCoverParent=function(e,t,n){if("number"==typeof t)var r=t,o=n;else r=t.outerWidth(),o=t.outerHeight();var a=i.getImageOriginalSize(e),s=a.width/a.height,l=o,u=l*s,d=0,_=0;r>u?(l=(u=r)/s,_=0,d=Math.round((l-o)/2*-1)):(d=0,_=Math.round((u-r)/2*-1)),u=Math.round(u),l=Math.round(l),e.css({width:u+"px",height:l+"px",left:_+"px",top:d+"px"})},this.scaleImageFitParent=function(e,t,n,r,o){var a=e.parent(),s=i.getImageInsideParentData(a,t,n,r,o),l=!1,u={};return null!==s.imageWidth&&(l=!0,e.removeAttr("width"),u.width=s.imageWidth+"px"),null!=s.imageHeight&&(l=!0,e.removeAttr("height"),u.height=s.imageHeight+"px"),null!==s.imageTop&&(l=!0,u.top=s.imageTop+"px"),null!==s.imageLeft&&(l=!0,u.left=s.imageLeft+"px"),1==l&&(u.position="absolute",u.margin="0px 0px",e.css(u)),s},this.scaleImageByHeight=function(e,t,n,r){var o=i.getImageOriginalSize(e,n,r),a=o.width/o.height,s=Math.round(t*a);t=Math.round(t),i.setElementSize(e,s,t)},this.scaleImageByWidth=function(e,t,n,r){var o=i.getImageOriginalSize(e,n,r),a=o.width/o.height,s=Math.round(t/a);t=Math.round(t),i.setElementSize(e,t,s)},this.scaleImageExactSizeInParent=function(e,t,n,r,o,a){var s=e.parent(),l=i.getElementSize(s);l.width<r&&(r=l.width),l.height<o&&(o=l.height);var u,d=i.getImageInsideParentData(null,t,n,a,null,r,o),_=r,g=o,c=d.imageLeft,h=d.imageLeft,p=d.imageTop,m=d.imageTop,f=Math.round((l.width-r)/2),v=Math.round((l.height-o)/2);0!=(u=r-(d.imageWidth+c+h))&&(h+=u),0!=(u=o-(d.imageHeight+p+m))&&(m+=u),e.removeAttr("width"),e.removeAttr("height");var b={position:"absolute",margin:"0px 0px"};b.width=_+"px",b.height=g+"px",b.left=f+"px",b.top=v+"px",b["padding-left"]=c+"px",b["padding-top"]=p+"px",b["padding-right"]=h+"px",b["padding-bottom"]=m+"px",e.css(b);var y={};return y.imageWidth=_,y.imageHeight=g,y},this.showElement=function(e,t,i){e.show().fadeTo(0,1),t&&t.show().fadeTo(0,1),i&&i.show().fadeTo(0,1)},this.z_________GALLERY_RELATED_FUNCTIONS_______=function(){},this.disableButton=function(e,t){if(!t)t="ug-button-disabled";0==i.isButtonDisabled(e,t)&&e.addClass(t)},this.convertCustomPrefixOptions=function(e,t,i){if(!t)return e;var n={};return jQuery.each(e,function(e,r){if(0===e.indexOf(t+"_"+i+"_")){var o=e.replace(t+"_"+i+"_",i+"_");n[o]=r}else n[e]=r}),n},this.enableButton=function(e,t){if(!t)t="ug-button-disabled";1==i.isButtonDisabled(e,t)&&e.removeClass(t)},this.isButtonDisabled=function(e,t){if(!t)t="ug-button-disabled";return!!e.hasClass(t)},this.z_________MATH_FUNCTIONS_______=function(){},this.normalizeSetting=function(e,t,i,n,r,o){if(!o)o=!1;return r=e+(t-e)*((r-i)/(n-i)),1==o&&(e>r&&(r=e),r>t&&(r=t)),r},this.getNormalizedValue=function(e,t,i,n,r){return e+(n-i)*((r-e)/(t-e))},this.getDistance=function(e,t,i,n){return Math.round(Math.sqrt(Math.abs((i-e)*(i-e)+(n-t)*(n-t))))},this.getMiddlePoint=function(e,t,i,n){var r={};return r.x=e+Math.round((i-e)/2),r.y=t+Math.round((n-t)/2),r},this.getNumItemsInSpace=function(e,t,i){return Math.floor((e+i)/(t+i))},this.getNumItemsInSpaceRound=function(e,t,i){return Math.round((e+i)/(t+i))},this.getSpaceByNumItems=function(e,t,i){return e*t+(e-1)*i},this.getItemSizeInSpace=function(e,t,i){return Math.floor((e-(t-1)*i)/t)},this.getColX=function(e,t,i){return e*(t+i)},this.getColByIndex=function(e,t){return t%e},this.getColRowByIndex=function(e,t){var i=Math.floor(e/t);return{col:Math.floor(e%t),row:i}},this.getIndexByRowCol=function(e,t,i){return 0>e?-1:0>t?-1:e*i+t},this.getPrevRowSameColIndex=function(e,t){var n=i.getColRowByIndex(e,t);return i.getIndexByRowCol(n.row-1,n.col,t)},this.getNextRowSameColIndex=function(e,t){var n=i.getColRowByIndex(e,t);return i.getIndexByRowCol(n.row+1,n.col,t)},this.z_________DATA_FUNCTIONS_______=function(){},this.setGlobalData=function(e,t){jQuery.data(document.body,e,t)},this.getGlobalData=function(e){return jQuery.data(document.body,e)},this.z_________EVENT_DATA_FUNCTIONS_______=function(){},this.handleScrollTop=function(e){if(0==i.isTouchDevice())return null;var t=i.getStoredEventData(e);if(null===t.scrollDir&&(Math.abs(t.diffMouseX)>15?t.scrollDir="hor":Math.abs(t.diffMouseY)>15&&Math.abs(t.diffMouseY)>Math.abs(t.diffMouseX)&&(t.scrollDir="vert",t.scrollStartY=t.lastMouseClientY,t.scrollOrigin=jQuery(document).scrollTop(),n.dataCache[e].scrollStartY=t.lastMouseClientY,n.dataCache[e].scrollOrigin=t.scrollOrigin),n.dataCache[e].scrollDir=t.scrollDir),"vert"!==t.scrollDir)return t.scrollDir;var r=(jQuery(document).scrollTop(),t.scrollOrigin-(t.lastMouseClientY-t.scrollStartY));return r>=0&&jQuery(document).scrollTop(r),t.scrollDir},this.wasVerticalScroll=function(e){return"vert"===i.getStoredEventData(e).scrollDir},this.storeEventData=function(e,t,r){var o=i.getMousePosition(e),a=jQuery.now(),s={startTime:a,lastTime:a,startMouseX:o.pageX,startMouseY:o.pageY,lastMouseX:o.pageX,lastMouseY:o.pageY,startMouseClientY:o.clientY,lastMouseClientY:o.clientY,scrollTop:jQuery(document).scrollTop(),scrollDir:null};r&&(s=jQuery.extend(s,r)),n.dataCache[t]=s},this.updateStoredEventData=function(e,t,r){if(!n.dataCache[t])throw new Error("updateEventData error: must have stored cache object");var o=n.dataCache[t],a=i.getMousePosition(e);o.lastTime=jQuery.now(),void 0!==a.pageX&&(o.lastMouseX=a.pageX,o.lastMouseY=a.pageY,o.lastMouseClientY=a.clientY),r&&(o=jQuery.extend(o,r)),n.dataCache[t]=o},this.getStoredEventData=function(e,t){if(!n.dataCache[e])throw new Error("updateEventData error: must have stored cache object");var i=n.dataCache[e];return i.diffMouseX=i.lastMouseX-i.startMouseX,i.diffMouseY=i.lastMouseY-i.startMouseY,i.diffMouseClientY=i.lastMouseClientY-i.startMouseClientY,i.diffTime=i.lastTime-i.startTime,!0===t?(i.startMousePos=i.lastMouseY,i.lastMousePos=i.lastMouseY,i.diffMousePos=i.diffMouseY):(i.startMousePos=i.lastMouseX,i.lastMousePos=i.lastMouseX,i.diffMousePos=i.diffMouseX),i},this.isApproveStoredEventClick=function(e,t){if(!n.dataCache[e])return!0;var r=i.getStoredEventData(e,t),o=Math.abs(r.diffMousePos);return!(r.diffTime>400)&&!(o>30)},this.clearStoredEventData=function(e){n.dataCache[e]=null},this.z_________CHECK_SUPPORT_FUNCTIONS_______=function(){},this.isCanvasExists=function(){return"function"==typeof jQuery('<canvas width="500" height="500" > </canvas>')[0].getContext},this.isScrollbarExists=function(){return window.innerWidth>document.documentElement.clientWidth},this.isTouchDevice=function(){if(-1!==n.isTouchDevice)return n.isTouchDevice;try{document.createEvent("TouchEvent"),n.isTouchDevice=!0}catch(e){n.isTouchDevice=!1}return n.isTouchDevice},this.isRgbaSupported=function(){if(-1!==n.isRgbaSupported)return n.isRgbaSupported;var e=document.getElementsByTagName("script")[0],t=e.style.color;try{e.style.color="rgba(1,5,13,0.44)"}catch(e){}var i=e.style.color!=t;return e.style.color=t,n.isRgbaSupported=i,i},this.z_________GENERAL_FUNCTIONS_______=function(){},this.checkMinJqueryVersion=function(e){for(var t=jQuery.fn.jquery.split("."),i=e.split("."),n=0,r=t.length;r>n;n++){var o=parseInt(t[n]),a=parseInt(i[n]);if(void 0===i[n])return!0;if(a>o)return!1;if(o>a)return!0}return!0},this.getCssSizeParam=function(e){return jQuery.isNumeric(e)?e+"px":e},this.convertHexToRGB=function(e,t){var i=e.replace("#","");return i===e?e:(r=parseInt(i.substring(0,2),16),g=parseInt(i.substring(2,4),16),b=parseInt(i.substring(4,6),16),result="rgba("+r+","+g+","+b+","+t+")",result)},this.timestampToString=function(e){var t=new Date(e);return t.getDate()+"/"+t.getMonth()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+":"+t.getMilliseconds()},this.getArrTouches=function(e){var t=[];return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(t=e.originalEvent.touches),t},this.getArrTouchPositions=function(e){for(var t=[],i=0;i<e.length;i++){var n={pageX:e[i].pageX,pageY:e[i].pageY};t.push(n)}return t},this.startTimeDebug=function(){n.starTime=jQuery.now()},this.showTimeDebug=function(){debugLine({"Time Passed":jQuery.now()-n.starTime},!0)},this.initProgressIndicator=function(e,t,n){switch("bar"!=e&&0==i.isCanvasExists()&&(e="bar"),e){case"bar":(r=new UGProgressBar).putHidden(n,t);break;default:case"pie":(r=new UGProgressPie).putHidden(n,t);break;case"pie2":var r;t.type_fill=!0,(r=new UGProgressPie).putHidden(n,t)}return r},this.setButtonMobileReady=function(e){e.on("touchstart",function(e){jQuery(this).addClass("ug-nohover")}),e.on("mousedown touchend",function(e){return e.stopPropagation(),e.stopImmediatePropagation(),!1})},this.registerTheme=function(e){n.arrThemes.push(e)},this.getArrThemes=function(){return n.arrThemes},this.isThemeRegistered=function(e){return-1!==jQuery.inArray(e,n.arrThemes)},this.getFirstRegisteredTheme=function(){return 0==n.arrThemes.length?"":n.arrThemes[0]},this.isTimePassed=function(e,t){if(!t)t=100;var i=jQuery.now();0==n.timeCache.hasOwnProperty(e)?lastTime=0:lastTime=n.timeCache[e];var r=i-lastTime;return n.timeCache[e]=i,!(t>=r)},this.whenContiniousEventOver=function(e,t,i){if(!i)i=300;1==n.timeCache.hasOwnProperty(e)&&null!=n.timeCache[e]&&(clearTimeout(n.timeCache[e]),n.timeCache[e]=null),n.timeCache[e]=setTimeout(t,i)},this.validateClickTouchstartEvent=function(e){var t=!0,i=jQuery.now()-n.lastEventTime;return"click"==e&&"touchstart"==n.lastEventType&&1e3>i&&(t=!1),n.lastEventTime=jQuery.now(),n.lastEventType=e,t},this.addClassOnHover=function(e,t){if(!t)t="ug-button-hover";e.hover(function(){jQuery(this).addClass(t)},function(){jQuery(this).removeClass(t)})},this.destroyButton=function(e){e.off("mouseenter"),e.off("mouseleave"),e.off("click"),e.off("touchstart"),e.off("touchend"),e.off("mousedown"),e.off("tap")},this.setButtonOnClick=function(e,t){i.setButtonMobileReady(e),e.on("click touchstart",function(e){return objThis=jQuery(this),e.stopPropagation(),e.stopImmediatePropagation(),0==i.validateClickTouchstartEvent(e.type)||void t(objThis,e)})},this.setButtonOnTap=function(e,t){e.on("tap",t),0==i.isTouchDevice()?e.on("click",function(e){var t=jQuery(this);return 0==i.validateClickTouchstartEvent(e.type)||void t.trigger("tap")}):(e.on("touchstart",function(e){jQuery(this).addClass("ug-nohover"),n.lastTouchStartElement=jQuery(this),n.lastEventTime=jQuery.now()}),e.on("touchend",function(e){var t=jQuery(this);return 0==t.is(n.lastTouchStartElement)||(!n.lastEventTime||(jQuery.now()-n.lastEventTime>n.touchThreshold||void t.trigger("tap")))}))},this.loadJs=function(e,t){!0===t&&(e=location.protocol+"//"+e);var i=document.createElement("script");i.src=e;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n)},this.loadCss=function(e,t){!0===t&&(e=location.protocol+"//"+e);var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(i)},this.addEvent=function(e,t,i){void 0!==e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},this.checkImagesLoaded=function(e,t,i){function n(e,n){r++,"function"==typeof i&&setTimeout(function(){i(e,n)}),r==o&&"function"==typeof t&&setTimeout(function(){t()})}var r=0,o=e.length;return 0==o&&t?(t(),!1):void setTimeout(function(){for(var t=0;o>t;t++){var i=e[t];if(void 0!==i.naturalWidth&&0!==i.naturalWidth)n(e[t],!1);else{var r=jQuery("<img/>");r.data("index",t),r.on("load",function(){var t=jQuery(this).data("index");n(e[t],!1)}),r.on("error",function(){var t=jQuery(this).data("index");n(e[t],!0)}),r.attr("src",i.src)}}})},this.waitForWidth=function(e,t){var i=e.width();return 0!=i?(t(),!1):void(n.handle=setInterval(function(){0!=(i=e.width())&&(clearInterval(n.handle),t())},300))},this.arrayShuffle=function(e){if("object"!=typeof e)return e;for(var t,i,n=e.length;n;t=parseInt(Math.random()*n),i=e[--n],e[n]=e[t],e[t]=i);return e},this.getObjectLength=function(e){var t=0;for(var i in e)t++;return t},this.normalizePercent=function(e){return 0>e&&(e=0),e>1&&(e=1),e},this.stripTags=function(e){return e.replace(/(<([^>]+)>)/gi,"")},this.escapeDoubleSlash=function(e){return e.replace('"','"')},this.htmlentitles=function(e){return jQuery("<div/>").text(e).html()},this.z_________END_GENERAL_FUNCTIONS_______=function(){}}function UGThumbsGeneral(){function e(e,t){var i=c[e],n="";0==y.customThumbs&&(n=" ug-thumb-generated");var r="<div class='ug-thumb-wrapper"+n+"' "+("style='z-index:"+(i.index+1)+";'")+"></div>";if(1==b.thumb_wrapper_as_link){var o=i.link;""==i.link&&(o="javascript:void(0)");var a="";1==b.thumb_link_newpage&&i.link&&(a=" target='_blank'");r="<a href='"+o+"'"+a+" class='ug-thumb-wrapper"+n+"'></a>"}var s=jQuery(r),l=i.objThumbImage;if(0==y.customThumbs){if(1==b.thumb_show_loader&&l){var u="ug-thumb-loader-dark";"bright"==b.thumb_loader_type&&(u="ug-thumb-loader-bright"),s.append("<div class='ug-thumb-loader "+u+"'></div>"),s.append("<div class='ug-thumb-error' style='display:none'></div>")}if(l){if(l.addClass("ug-thumb-image"),1==b.thumb_image_overlay_effect){var d=l.clone().appendTo(s);d.addClass("ug-thumb-image-overlay "+t).removeClass("ug-thumb-image"),d.fadeTo(0,0),i.objImageOverlay=d}s.append(l)}}return y.isEffectBorder&&s.append("<div class='ug-thumb-border-overlay'></div>"),y.isEffectOverlay&&s.append("<div class='ug-thumb-overlay'></div>"),h.append(s),y.customThumbs&&y.funcSetCustomThumbHtml(s,i),c[e].objThumbWrapper=s,s}function t(e,t,i,n){var r={width:e+"px",height:t+"px"},o={width:e-y.thumbInnerReduce+"px",height:t-y.thumbInnerReduce+"px"},a=".ug-thumb-loader, .ug-thumb-error, .ug-thumb-border-overlay, .ug-thumb-overlay";i?(!0!==n&&i.css(r),i.find(a).css(o)):(h.children(".ug-thumb-wrapper").css(r),h.find(a).css(o))}function i(e,t,i,n){if(!n)n=!1;f.isFakeFullscreen()&&(n=!0);var r=e.children(".ug-thumb-border-overlay"),o={};o["border-width"]=t+"px",0!=t&&(o["border-color"]=i),n&&!0===n?(r.css(o),0==t?r.hide():r.show()):(0==t?r.stop().fadeOut(b.thumb_transition_duration):r.show().stop().fadeIn(b.thumb_transition_duration),function(e,t){e.stop(!0).animate(t,{duration:b.thumb_transition_duration,easing:b.thumb_transition_easing,queue:!1})}(r,o))}function n(e,t,i){var n=e.children(".ug-thumb-overlay"),r=b.thumb_transition_duration;i&&!0===i&&(r=0),t?n.stop(!0).fadeTo(r,y.colorOverlayOpacity):n.stop(!0).fadeTo(r,0)}function r(e,t,i){var n=e.children("img.ug-thumb-image"),r=e.children("img.ug-thumb-image-overlay"),o=b.thumb_transition_duration;i&&!0===i&&(o=0),t?r.stop(!0).fadeTo(o,1):(n.fadeTo(0,1),r.stop(!0).fadeTo(o,0))}function o(e,t){(y.isEffectBorder&&i(e,b.thumb_selected_border_width,b.thumb_selected_border_color,t),y.isEffectOverlay)&&n(e,1==b.thumb_overlay_reverse,t);y.isEffectImage&&r(e,!1,t),m.trigger(p.events.SETSELECTEDSTYLE,e)}function a(e){1==l(e)?o(e,!0):p.setThumbNormalStyle(e,!0,"redraw")}function s(e,i,n){if(1==b.thumb_fixed_size)v.scaleImageCoverParent(i,e);else{"height"==b.thumb_resize_by?v.scaleImageByHeight(i,b.thumb_height):v.scaleImageByWidth(i,b.thumb_width);var r=v.getElementSize(i);v.placeElement(i,0,0),t(r.width,r.height,e)}e.children(".ug-thumb-loader").hide(),i.show(),0==b.thumb_image_overlay_effect?i.fadeTo(0,1):(1==b.thumb_image_overlay_effect&&function(e){var t=e.siblings(".ug-thumb-image-overlay");if(0==t.length)return!1;var i=v.getElementSize(e),n={width:i.width+"px",height:i.height+"px",left:i.left+"px",top:i.top+"px"};t.css(n),0==y.customThumbs&&t.fadeTo(0,1)}(i),i.fadeTo(0,0),a(e)),m.trigger(p.events.AFTERPLACEIMAGE,e)}function l(e){return!!e.hasClass("ug-thumb-selected")}function u(e,i){i=jQuery(i);var n=(p.getItemByThumb(i),v.getElementSize(i));t(n.width,n.height,i,!0),a(i)}function d(e,t,i){objItem=p.getItemByThumb(t),objItem.isLoaded=!0,objItem.isThumbImageLoaded=!0;var n=v.getImageOriginalSize(i);objItem.thumbWidth=n.width,objItem.thumbHeight=n.height,objItem.thumbRatioByWidth=n.width/n.height,objItem.thumbRatioByHeight=n.height/n.width,t.addClass("ug-thumb-ratio-set")}var _,g,c,h,p=this,m=jQuery(p),f=new UniteGalleryMain,v=new UGFunctions;this.type={GET_THUMBS_ALL:"all",GET_THUMBS_RATIO:"ratio",GET_THUMBS_NO_RATIO:"no_ratio",GET_THUMBS_NEW:"new"},this.events={SETOVERSTYLE:"thumbmouseover",SETNORMALSTYLE:"thumbmouseout",SETSELECTEDSTYLE:"thumbsetselected",PLACEIMAGE:"thumbplaceimage",AFTERPLACEIMAGE:"thumb_after_place_image",IMAGELOADERROR:"thumbimageloaderror",THUMB_IMAGE_LOADED:"thumb_image_loaded"};var b={thumb_width:88,thumb_height:50,thumb_fixed_size:!0,thumb_resize_by:"height",thumb_border_effect:!0,thumb_border_width:0,thumb_border_color:"#000000",thumb_over_border_width:0,thumb_over_border_color:"#d9d9d9",thumb_selected_border_width:1,thumb_selected_border_color:"#d9d9d9",thumb_round_corners_radius:0,thumb_color_overlay_effect:!0,thumb_overlay_color:"#000000",thumb_overlay_opacity:.4,thumb_overlay_reverse:!1,thumb_image_overlay_effect:!1,thumb_image_overlay_type:"bw",thumb_transition_duration:200,thumb_transition_easing:"easeOutQuad",thumb_show_loader:!0,thumb_loader_type:"dark",thumb_wrapper_as_link:!1,thumb_link_newpage:!1},y={touchEnabled:!1,num_thumbs_checking:0,customThumbs:!1,funcSetCustomThumbHtml:null,isEffectBorder:!1,isEffectOverlay:!1,isEffectImage:!1,colorOverlayOpacity:1,thumbInnerReduce:0,allowOnResize:!0,classNewThumb:"ug-new-thumb"},I="thumb_size_change";this.init=function(e,t){_=e.getObjects(),f=e,jQuery(e),g=_.g_objWrapper,c=_.g_arrItems,b=jQuery.extend(b,t),y.isEffectBorder=b.thumb_border_effect,y.isEffectOverlay=b.thumb_color_overlay_effect,y.isEffectImage=b.thumb_image_overlay_effect},this._____________EXTERNAL_SETTERS__________=function(){},this.setHtmlThumbs=function(t,i){if(h=t,1==y.isEffectImage)var n=function(){var e="",t=b.thumb_image_overlay_type.split(",");for(var i in t)switch(t[i]){case"bw":e+=" ug-bw-effect";break;case"blur":e+=" ug-blur-effect";break;case"sepia":e+=" ug-sepia-effect"}return e}();if(!0!==i)for(var r=f.getNumItems(),o=0;r>o;o++)e(o,n);else{p.getThumbs().removeClass(y.classNewThumb);var a=f.getNewAddedItemsIndexes();jQuery.each(a,function(t,i){e(i,n).addClass(y.classNewThumb)})}},this.setThumbNormalStyle=function(e,t,o){(1==y.customThumbs&&e.removeClass("ug-thumb-over"),y.isEffectBorder&&i(e,b.thumb_border_width,b.thumb_border_color,t),y.isEffectOverlay)&&n(e,1!=b.thumb_overlay_reverse,t);y.isEffectImage&&r(e,!0,t),m.trigger(p.events.SETNORMALSTYLE,e)},this.setThumbOverStyle=function(e){(1==y.customThumbs&&e.addClass("ug-thumb-over"),y.isEffectBorder&&i(e,b.thumb_over_border_width,b.thumb_over_border_color),y.isEffectOverlay)&&n(e,1==b.thumb_overlay_reverse);1==y.isEffectImage&&r(e,!1),m.trigger(p.events.SETOVERSTYLE,e)},this.setHtmlProperties=function(e){if(!e)e=p.getThumbs();if(0==y.customThumbs&&(1==b.thumb_fixed_size&&t(b.thumb_width,b.thumb_height,e),function(e){if(b.thumb_round_corners_radius<=0)return!1;var t={"border-radius":b.thumb_round_corners_radius+"px"};e?(e.css(t),e.find(".ug-thumb-border-overlay").css(t)):h.find(".ug-thumb-wrapper, .ug-thumb-wrapper .ug-thumb-border-overlay").css(t)}(e)),e.each(function(){a(jQuery(this))}),y.isEffectOverlay&&b.thumb_overlay_color){var i={};if(v.isRgbaSupported()){var n=v.convertHexToRGB(b.thumb_overlay_color,b.thumb_overlay_opacity);i["background-color"]=n}else i["background-color"]=b.thumb_overlay_color,y.colorOverlayOpacity=b.thumb_overlay_opacity;e.find(".ug-thumb-overlay").css(i)}},this.setThumbSelected=function(e){return 1==y.customThumbs&&e.removeClass("ug-thumb-over"),1==l(e)||(e.addClass("ug-thumb-selected"),void o(e))},this.setThumbUnselected=function(e){e.removeClass("ug-thumb-selected"),p.setThumbNormalStyle(e,!1,"set unselected")},this.setOptions=function(e){b=jQuery.extend(b,e)},this.setThumbInnerReduce=function(e){y.thumbInnerReduce=e},this.setCustomThumbs=function(e,t,i){if(y.customThumbs=!0,"function"!=typeof e)throw new Error("The argument should be function");y.funcSetCustomThumbHtml=e,-1==jQuery.inArray("overlay",t)&&(y.isEffectOverlay=!1),-1==jQuery.inArray("border",t)&&(y.isEffectBorder=!1),y.isEffectImage=!1,i&&!1===i.allow_onresize&&(y.allowOnResize=!1)},this._____________EXTERNAL_GETTERS__________=function(){},this.getOptions=function(){return b},this.getNumThumbs=function(){return c.length},this.getThumbImage=function(e){return e.find(".ug-thumb-image")},this.getThumbByIndex=function(e){var t=p.getThumbs();if(e>=t.length||0>e)throw new Error("Wrong thumb index");return jQuery(t[e])},this.getThumbs=function(e){var t=".ug-thumb-wrapper",i=".ug-thumb-ratio-set";switch(e){default:case p.type.GET_THUMBS_ALL:var n=h.children(t);break;case p.type.GET_THUMBS_NO_RATIO:n=h.children(t).not(i);break;case p.type.GET_THUMBS_RATIO:n=h.children(t+i);break;case p.type.GET_THUMBS_NEW:n=h.children("."+y.classNewThumb)}return n},this.getItemByThumb=function(e){var t=e.data("index");return void 0===t&&(t=e.index()),c[t]},this.isThumbLoaded=function(e){return p.getItemByThumb(e).isLoaded},this.getGlobalThumbSize=function(){return{width:b.thumb_width,height:b.thumb_height}},this._____________EXTERNAL_OTHERS__________=function(){},this.initEvents=function(){var e=".ug-thumb-wrapper";1==y.allowOnResize&&g.on(I,u),m.on(p.events.THUMB_IMAGE_LOADED,d),h.on("touchstart",e,function(){y.touchEnabled=!0,h.off("mouseenter").off("mouseleave")}),h.on("mouseenter",e,function(e){!function(e){1==y.touchEnabled?objThumbs.off("mouseenter").off("mouseleave"):0==l(e)&&p.setThumbOverStyle(e)}(jQuery(this))}),h.on("mouseleave",e,function(e){!function(e){1==y.touchEnabled||0==l(e)&&p.setThumbNormalStyle(e,!1)}(jQuery(this))})},this.destroy=function(){var e=".ug-thumb-wrapper";h.off("touchstart",e),g.off(I),h.off("mouseenter",e),h.off("mouseleave",e),m.off(p.events.THUMB_IMAGE_LOADED)},this.loadThumbsImages=function(){var e=h.find(".ug-thumb-image");v.checkImagesLoaded(e,null,function(e,t){0==t?function(e,t){t||(t=!1);var i=jQuery(e),n=i.parents(".ug-thumb-wrapper");0!=n.parent().length&&(objItem=p.getItemByThumb(n),(1!=objItem.isLoaded||!1!==t)&&(p.triggerImageLoadedEvent(n,i),1==y.customThumbs?m.trigger(p.events.PLACEIMAGE,[n,i]):s(n,i,objItem)))}(e,!0):function(e){var t=p.getItemByThumb(e);t.isLoaded=!0,t.isThumbImageLoaded=!1,1==y.customThumbs?m.trigger(p.events.IMAGELOADERROR,e):(e.children(".ug-thumb-loader").hide(),e.children(".ug-thumb-error").show())}(jQuery(e).parent())})},this.triggerImageLoadedEvent=function(e,t){m.trigger(p.events.THUMB_IMAGE_LOADED,[e,t])},this.hideThumbs=function(){h.find(".ug-thumb-wrapper").hide()}}function UGThumbsStrip(){function e(e,i){h=e.getObjects(),(w=e).attachThumbsPanel("strip",I),c=jQuery(e),p=h.g_objWrapper,m=h.g_arrItems,P=jQuery.extend(P,i),1==(T=P.strip_vertical_type)&&(P=jQuery.extend(P,C),P=jQuery.extend(P,i),i.thumb_resize_by="width"),S.init(e,i),t()}function t(){var e=S.getOptions();x.isNotFixedThumbs=!1===e.thumb_fixed_size,T=P.strip_vertical_type}function n(){S.setHtmlProperties(),function(){var e=v.children(".ug-thumb-wrapper"),t=jQuery(e[0]),i=t.outerWidth(),n=t.outerHeight(),o=S.getOptions();0==T?(j.thumbSize=i,1==o.thumb_fixed_size?j.thumbSecondSize=n:j.thumbSecondSize=o.thumb_height,r(f.width()),j.stripInnerSize=v.width()):(j.thumbSize=n,1==o.thumb_fixed_size?j.thumbSecondSize=i:j.thumbSecondSize=o.thumb_width,r(f.height()),j.stripInnerSize=v.height())}(),function(){if(0==T){var e=j.thumbSecondSize,t={};t.height=e+"px";var i={};i.height=e+"px"}else{var n=j.thumbSecondSize,t={};t.width=n+"px";var i={};i.width=n+"px"}f.css(t),v.css(i)}(),o(),0==x.isRunOnce&&(1==P.strip_control_touch&&(y=new UGTouchThumbsControl).init(I),1==P.strip_control_avia&&(b=new UGAviaControl).init(I),l(),S.loadThumbsImages(),S.initEvents(),f.find(".ug-thumb-wrapper").on("click touchend",function(e){var t=jQuery(this);!function(e){if(I.isTouchMotionActive()){var t=y.isSignificantPassed();if(1==t)return!0}var i=S.getItemByThumb(e);w.selectItem(i)}(t)}),c.on(w.events.ITEM_CHANGE,d),x.isNotFixedThumbs&&jQuery(S).on(S.events.AFTERPLACEIMAGE,u)),x.isRunOnce=!0}function r(e){j.stripSize=e,j.stripActiveSize=0==T?j.stripSize-P.strip_padding_left-P.strip_padding_right:j.stripSize-P.strip_padding_top-P.strip_padding_bottom,j.stripActiveSize<0&&(j.stripActiveSize=0)}function o(){var e=v.children(".ug-thumb-wrapper"),t=0,n=0;for(0==T&&(n=P.strip_padding_top),i=0;i<e.length;i++){var r=jQuery(e[i]);if(1==x.isNotFixedThumbs){if(objItem=S.getItemByThumb(r),0==objItem.isLoaded)continue;r.show()}E.placeElement(r,t,n),0==T?t+=r.outerWidth()+P.strip_space_between_thumbs:n+=r.outerHeight()+P.strip_space_between_thumbs}if(0==T)var o=t-P.strip_space_between_thumbs;else o=n-P.strip_space_between_thumbs;!function(e){0==T?v.width(e):v.height(e),j.stripInnerSize=e,l(),jQuery(I).trigger(I.events.INNER_SIZE_CHANGE)}(o)}function a(e){var t=I.getInnerStripPos()+e;t=I.fixInnerStripLimits(t),I.positionInnerStrip(t,!0)}function s(e){if(0==_())return!1;var t=function(){var e={},t=I.getInnerStripPos();return e.minPosThumbs=-1*t+1,e.maxPosThumbs=-1*t+j.stripSize-1,e}(),i=g(e);if(i.min<t.minPosThumbs){var n=e.prev();!function(e){var t=-1*g(e).min;t=I.fixInnerStripLimits(t),I.positionInnerStrip(t,!0)}(n.length?n:e)}else if(i.max>t.maxPosThumbs){var r=e.next();!function(e){var t=-1*g(e).max+j.stripSize;t=I.fixInnerStripLimits(t),I.positionInnerStrip(t,!0)}(r.length?r:e)}}function l(){1==_()?(b&&b.enable(),y&&y.enable()):(b&&b.disable(),y&&y.disable())}function u(){clearTimeout(x.handle),x.handle=setTimeout(function(){o()},50)}function d(){var e=w.getSelectedItem();S.setThumbSelected(e.objThumbWrapper),s(e.objThumbWrapper)}function _(){return j.stripInnerSize>j.stripActiveSize}function g(e){var t={},i=e.position();return 0==T?(t.min=i.left,t.max=i.left+j.thumbSize):(t.min=i.top,t.max=i.top+j.thumbSize),t}var c,h,p,m,f,v,b,y,I=this,w=new UniteGalleryMain,E=new UGFunctions,T=!1,S=new UGThumbsGeneral,P=(E=new UGFunctions,{strip_vertical_type:!1,strip_thumbs_align:"left",strip_space_between_thumbs:6,strip_thumb_touch_sensetivity:15,strip_scroll_to_thumb_duration:500,strip_scroll_to_thumb_easing:"easeOutCubic",strip_control_avia:!0,strip_control_touch:!0,strip_padding_top:0,strip_padding_bottom:0,strip_padding_left:0,strip_padding_right:0}),x={isRunOnce:!1,is_placed:!1,isNotFixedThumbs:!1,handle:null},j={stripSize:0,stripActiveSize:0,stripInnerSize:0,thumbSize:0,thumbSecondSize:0};this.events={STRIP_MOVE:"stripmove",INNER_SIZE_CHANGE:"size_change"};var C={strip_thumbs_align:"top",thumb_resize_by:"width"};this.setHtml=function(e){if(!e){e=p;null!=P.parent_container&&(e=P.parent_container)}e.append("<div class='ug-thumbs-strip'><div class='ug-thumbs-strip-inner'></div></div>"),f=e.children(".ug-thumbs-strip"),v=f.children(".ug-thumbs-strip-inner"),S.setHtmlThumbs(v),1==x.isNotFixedThumbs&&S.hideThumbs()},this.destroy=function(){var e=f.find(".ug-thumb-wrapper");e.off("click"),e.off("touchend"),c.off(w.events.ITEM_CHANGE),jQuery(S).off(S.events.AFTERPLACEIMAGE),y&&y.destroy(),b&&b.destroy(),S.destroy()},this.________EXTERNAL_GENERAL___________=function(){},this.init=function(t,i){e(t,i)},this.run=function(){n()},this.positionInnerStrip=function(e,t){if(void 0===t)t=!1;if(0==T)var i={left:e+"px"};else i={top:e+"px"};0==t?(v.css(i),I.triggerStripMoveEvent()):(I.triggerStripMoveEvent(),v.stop(!0).animate(i,{duration:P.strip_scroll_to_thumb_duration,easing:P.strip_scroll_to_thumb_easing,queue:!1,progress:function(){I.triggerStripMoveEvent()},always:function(){I.triggerStripMoveEvent()}}))},this.triggerStripMoveEvent=function(){jQuery(I).trigger(I.events.STRIP_MOVE)},this.isTouchMotionActive=function(){return!!y&&y.isTouchActive()},this.isItemThumbVisible=function(e){var t=e.objThumbWrapper,i=t.position(),n=-1*I.getInnerStripPos();if(0==T)var r=n+j.stripSize,o=i.left,a=i.left+t.width();else r=n+j.stripSize,o=i.top,a=i.top+t.height();var s=!1;return a>=n&&r>=o&&(s=!0),s},this.getInnerStripPos=function(){return 0==T?v.position().left:v.position().top},this.getInnerStripLimits=function(){var e={};return e.maxPos=0==T?P.strip_padding_left:P.strip_padding_top,e.minPos=-(j.stripInnerSize-j.stripActiveSize),e},this.fixInnerStripLimits=function(e){var t=I.getInnerStripLimits();return e>t.maxPos&&(e=t.maxPos),e<t.minPos&&(e=t.minPos),e},this.scrollForeward=function(){a(-j.stripSize)},this.scrollBack=function(){a(j.stripSize)},this.________EXTERNAL_SETTERS___________=function(){},this.setOptions=function(e){P=jQuery.extend(P,e),S.setOptions(e),t()},this.setSizeVertical=function(e){if(0==T)throw new Error("setSizeVertical error, the strip size is not vertical");var t=j.thumbSecondSize,i={};i.width=t+"px",i.height=e+"px",f.css(i),r(e);var n={};n.width=t+"px",n.left="0px",n.top="0px",v.css(n),x.is_placed=!0,l()},this.setSizeHorizontal=function(e){if(1==T)throw new Error("setSizeHorizontal error, the strip size is not horizontal");var t=j.thumbSecondSize+P.strip_padding_top+P.strip_padding_bottom,i={};i.width=e+"px",i.height=t+"px",f.css(i),r(e);var n=P.strip_padding_left,o={};o.height=t+"px",o.left=n+"px",o.top="0px",v.css(o),x.is_placed=!0,l()},this.setPosition=function(e,t,i,n){E.placeElement(f,e,t,i,n)},this.resize=function(e){0==T?(f.width(e),j.stripActiveSize=e-P.strip_padding_left-P.strip_padding_right):(f.height(e),j.stripActiveSize=e-P.strip_padding_top-P.strip_padding_bottom),r(e),l(),function(){if(0==_())return!1;var e=I.getInnerStripPos(),t=I.fixInnerStripLimits(e);e!=t&&I.positionInnerStrip(t,!0)}(),!_()&&(0==T?E.placeElement(v,P.strip_thumbs_align,0):E.placeElement(v,0,P.strip_thumbs_align)),function(){var e=w.getSelectedItem();if(null==e)return!0;var t=e.objThumbWrapper;t&&s(t)}()},this.setThumbUnselected=function(e){S.setThumbUnselected(e)},this.setCustomThumbs=function(e){S.setCustomThumbs(e)},this.________EXTERNAL_GETTERS___________=function(){},this.getObjects=function(){var e=S.getOptions(),t=jQuery.extend(P,e);return{g_gallery:w,g_objGallery:c,g_objWrapper:p,g_arrItems:m,g_objStrip:f,g_objStripInner:v,g_aviaControl:b,g_touchThumbsControl:y,isVertical:T,g_options:t,g_thumbs:S}},this.getObjThumbs=function(){return S},this.getSelectedThumb=function(){var e=w.getSelectedItemIndex();return-1==e?null:S.getThumbByIndex(e)},this.getSizeAndPosition=function(){return E.getElementSize(f)},this.getHeight=function(){return f.outerHeight()},this.getWidth=function(){return f.outerWidth()},this.getSizes=function(){return j},this.isVertical=function(){return T},this.isPlaced=function(){return x.is_placed},this.isMoveEnabled=function(){return _()}}function UGTouchThumbsControl(){function e(){var e=jQuery.now(),t={};return t.passedTime=m.lastTime-m.startTime,t.lastActiveTime=e-m.buttonReleaseTime,t.passedDistance=m.lastPos-m.startPos,t.passedDistanceAbs=Math.abs(t.passedDistance),t}function t(e){return 0==c?h.getMousePosition(e).pageX:h.getMousePosition(e).pageY}function i(){var e=jQuery.now();e-m.lastTime>=p.touch_portion_time&&(m.lastDeltaTime=e-m.lastTime,m.lastDeltaTime>p.touch_portion_time&&(m.lastDeltaTime=p.touch_portion_time),m.lastDeltaPos=m.lastPos-m.lastPortionPos,m.lastPortionPos=m.lastPos,m.lastTime=e)}function n(){m.lastPos=l.getInnerStripPos(),l.triggerStripMoveEvent()}function r(e){if(0==m.loop_active)return!0;if(e){t(e);!function(){var e=p.thumb_touch_slowFactor,t=p.minDeltaTime,i=p.minPath,r=l.getInnerStripPos(),o=jQuery.now()-m.lastTime,a=r-m.lastPortionPos;t>o&&m.lastDeltaTime>0&&(o=m.lastDeltaTime,a=m.lastDeltaPos+a),t>o&&(o=t);var s=0;o>0&&(s=a/o);var u=s*s/(2*e)*(a>0?1:-1);Math.abs(u)<=i&&(u=0);var d=l.getInnerStripPos(),g=d+u,h=l.fixInnerStripLimits(g),f=l.getInnerStripLimits(),v=p.limitsBreakAddition,b=!1,y=h;if(g>f.maxPos&&(b=!0,h=v,v>g&&(h=g)),g<f.minPos){b=!0;var I=f.minPos-v;h=I,g>I&&(h=g)}var w=h-d,E=Math.abs(Math.round(s/e));if(0!=u&&(E=E*w/u),d!=h){var T={left:h+"px"};1==c&&(T={top:h+"px"}),_.animate(T,{duration:E,easing:p.animationEasing,queue:!0,progress:n})}if(1==b){var S=p.returnAnimateSpeed,P={left:y+"px"};1==c&&(P={top:y+"px"}),_.animate(P,{duration:S,easing:p.returnAnimationEasing,queue:!0,progress:n})}}()}m.loop_active=!1,m.handle=clearInterval(m.handle)}function o(e){return 0==m.isControlEnabled||(m.buttonReleaseTime=jQuery.now(),0==m.touch_active?(r(e),!0):(e.preventDefault(),m.touch_active=!1,r(e),void d.removeClass("ug-dragging")))}function a(e){if(0==m.isControlEnabled)return!0;e.preventDefault(),m.touch_active=!0;var n=t(e);_.stop(!0),function(e){var t=l.getInnerStripPos();m.mousePos=e,m.innerPos=t,m.lastPortionPos=t,m.lastDeltaTime=0,m.lastDeltaPos=0,m.startTime=jQuery.now(),m.startPos=m.innerPos,m.lastTime=m.startTime,m.lastPos=m.startPos,m.speed=0}(n),1==m.loop_active||(m.loop_active=!0,m.handle=setInterval(i,10)),d.addClass("ug-dragging")}function s(e){if(0==m.isControlEnabled)return!0;if(0==m.touch_active)return!0;if(e.preventDefault(),0==e.buttons)return m.touch_active=!1,r(e),!0;var n=t(e);m.lastPos=l.getInnerStripPos(),function(e){var t=m.mousePos-e,i=m.innerPos-t,n=l.getInnerStripLimits();if(i>n.maxPos){var r=i-n.maxPos;i=n.maxPos+r/3}i<n.minPos&&(r=n.minPos-i,i=n.minPos-r/3);l.positionInnerStrip(i)}(n),i()}var l,u,d,_,g,c,h=new UGFunctions,p={touch_portion_time:200,thumb_touch_slowFactor:0,minDeltaTime:70,minPath:10,limitsBreakAddition:30,returnAnimateSpeed:500,animationEasing:"easeOutCubic",returnAnimationEasing:"easeOutCubic"},m={touch_active:!1,loop_active:!1,mousePos:0,innerPos:0,startPos:0,startTime:0,lastTime:0,buttonReleaseTime:0,lastPos:0,lastPortionPos:0,lastDeltaTime:0,lastDeltaPos:0,speed:0,handle:"",touchEnabled:!1,isControlEnabled:!0};this.enable=function(){m.isControlEnabled=!0},this.disable=function(){m.isControlEnabled=!1},this.init=function(e){l=e,u=e.getObjects(),u.g_gallery,u.g_objGallery,d=u.g_objStrip,_=u.g_objStripInner,g=u.g_options,c=u.isVertical,p.thumb_touch_slowFactor=h.normalizeSetting(5e-5,.01,1,100,g.strip_thumb_touch_sensetivity,!0),d.bind("mousedown touchstart",a),jQuery(window).add("body").bind("mouseup touchend",o),jQuery("body").bind("mousemove touchmove",s)},this.isSignificantPassed=function(){var t=e();return t.passedTime>300||t.passedDistanceAbs>30},this.isTouchActive=function(){return 1==m.touch_active||(1==_.is(":animated")||e().lastActiveTime<50)},this.destroy=function(){d.unbind("mousedown"),d.unbind("touchstart"),jQuery(window).add("body").unbind("mouseup").unbind("touchend"),jQuery("body").unbind("mousemove").unbind("touchmove")}}function UGPanelsBase(){function e(e,t){switch(n.orientation){case"right":case"left":var i={left:e+"px"};break;case"top":case"bottom":i={top:e+"px"}}o.stop(!0).animate(i,{duration:300,easing:"easeInOutQuad",queue:!1,complete:function(){t&&t()}})}function t(e){switch(n.orientation){case"right":case"left":g.placeElement(o,e,null);break;case"top":case"bottom":g.placeElement(o,null,e)}}function i(){s.trigger(r.events.FINISH_MOVE)}var n,r,o,a,s,l,u,d=new UniteGalleryMain,_=this,g=new UGFunctions;this.init=function(e,t,i,o,l){n=t,r=i,d=e,a=o,s=l,u=jQuery(d)},this.setHtml=function(e){if(o=e,"strip"==n.panelType)var t=a.strippanel_enable_handle;else t=a.gridpanel_enable_handle;if(1==t&&((l=new UGPanelHandle).init(r,o,a,n.panelType,d),l.setHtml()),!0===n.isDisabledAtStart){o.append("<div class='ug-overlay-disabled'></div>"),setTimeout(function(){o.children(".ug-overlay-disabled").hide()},n.disabledAtStartTimeout)}},this.placeElements=function(){l&&l.placeHandle()},this.initEvents=function(){l&&(l.initEvents(),u.on(d.events.SLIDER_ACTION_START,function(){l.hideHandle()}),u.on(d.events.SLIDER_ACTION_END,function(){l.showHandle()}))},this.destroy=function(){l&&(l.destroy(),u.off(d.events.SLIDER_ACTION_START),u.off(d.events.SLIDER_ACTION_END))},this.openPanel=function(a){if(!a)a=!1;return!o.is(":animated")&&(0!=n.isClosed&&(n.isClosed=!1,s.trigger(r.events.OPEN_PANEL),void(!1===a?e(n.originalPos,i):(t(n.originalPos),i()))))},this.closePanel=function(a){if(!a)a=!1;if(o.is(":animated"))return!1;if(1==n.isClosed)return!1;var l=_.getClosedPanelDest();n.isClosed=!0,s.trigger(r.events.CLOSE_PANEL),!1===a?e(l,i):(t(l),i())},this.setClosedState=function(e){n.originalPos=e,s.trigger(r.events.CLOSE_PANEL),n.isClosed=!0},this.setOpenedState=function(e){s.trigger(r.events.OPEN_PANEL),n.isClosed=!1},this.getClosedPanelDest=function(){var e,t=g.getElementSize(o);switch(n.orientation){case"left":n.originalPos=t.left,e=-n.panelWidth;break;case"right":n.originalPos=t.left,e=d.getSize().width;break;case"top":n.originalPos=t.top,e=-n.panelHeight;break;case"bottom":n.originalPos=t.top,e=d.getSize().height}return e},this.isPanelClosed=function(){return n.isClosed},this.setDisabledAtStart=function(e){return!(0>=e)&&(n.isDisabledAtStart=!0,void(n.disabledAtStartTimeout=e))}}function UGPanelHandle(){function e(){r.removeClass("ug-button-hover")}function t(e){return e.stopPropagation(),e.stopImmediatePropagation(),0==o.validateClickTouchstartEvent(e.type)||void(n.isPanelClosed()?n.openPanel():n.closePanel())}var i,n,r,o=new UGFunctions,a={panel_handle_align:"top",panel_handle_offset:0,panel_handle_skin:0};this.init=function(e,t,r,o,s){switch(n=e,i=t,o){case"grid":a.panel_handle_align=r.gridpanel_handle_align,a.panel_handle_offset=r.gridpanel_handle_offset,a.panel_handle_skin=r.gridpanel_handle_skin;break;case"strip":a.panel_handle_align=r.strippanel_handle_align,a.panel_handle_offset=r.strippanel_handle_offset,a.panel_handle_skin=r.strippanel_handle_skin;break;default:throw new Error("Panel handle error: wrong panel type: "+o)}var l=s.getOptions().gallery_skin;""==a.panel_handle_skin&&(a.panel_handle_skin=l)},this.setHtml=function(){var e="ug-panel-handle-tip";switch(n.getOrientation()){case"right":e+=" ug-handle-tip-left";break;case"left":e+=" ug-handle-tip-right";break;case"bottom":e+=" ug-handle-tip-top";break;case"top":e+=" ug-handle-tip-bottom"}i.append("<div class='"+e+" ug-skin-"+a.panel_handle_skin+"'></div>"),r=i.children(".ug-panel-handle-tip")},this.initEvents=function(){o.addClassOnHover(r),r.bind("click touchstart",t),jQuery(n).on(n.events.OPEN_PANEL,function(){e(),r.removeClass("ug-button-closed")}),jQuery(n).on(n.events.CLOSE_PANEL,function(){e(),r.addClass("ug-button-closed")})},this.destroy=function(){o.destroyButton(r),jQuery(n).off(n.events.OPEN_PANEL),jQuery(n).off(n.events.CLOSE_PANEL)},this.placeHandle=function(){var e=o.getElementSize(r);!function(){switch(n.getOrientation()){case"right":case"left":"top"!=a.panel_handle_align&&"bottom"!=a.panel_handle_align&&(a.panel_handle_align="top");break;case"bottom":"left"!=a.panel_handle_align&&"right"!=a.panel_handle_align&&(a.panel_handle_align="left");break;case"top":"left"!=a.panel_handle_align&&"right"!=a.panel_handle_align&&(a.panel_handle_align="right")}}();var t=n.getOrientation();switch(t){case"left":o.placeElement(r,"right",a.panel_handle_align,-e.width);break;case"right":o.placeElement(r,-e.width,a.panel_handle_align,0,a.panel_handle_offset);break;case"top":o.placeElement(r,a.panel_handle_align,"bottom",a.panel_handle_offset,-e.height);break;case"bottom":o.placeElement(r,a.panel_handle_align,"top",a.panel_handle_offset,-e.height);break;default:throw new Error("Wrong panel orientation: "+t)}},this.hideHandle=function(){1==r.is(":visible")&&r.hide()},this.showHandle=function(){0==r.is(":visible")&&r.show()}}function UGStripPanel(){function e(){return(1!=E.isFirstRun||0!=function(){if(0==y.strippanel_vertical_type){if(0==E.panelWidth)throw new Error("Strip panel error: The width not set, please set width")}else if(0==E.panelHeight)throw new Error("Strip panel error: The height not set, please set height");if(null==E.orientation)throw new Error("Wrong orientation, please set panel orientation before run");return!0}())&&(v.run(),i(),n(),function(){if(1==E.isEventsInited)return!1;if(E.isEventsInited=!0,g)if(f.addClassOnHover(g,"ug-button-hover"),f.addClassOnHover(c,"ug-button-hover"),f.setButtonOnClick(c,o),f.setButtonOnClick(g,r),"advance_item"!=y.strippanel_buttons_role)jQuery(v).on(v.events.STRIP_MOVE,s),jQuery(v).on(v.events.INNER_SIZE_CHANGE,a),u.on(m.events.SIZE_CHANGE,a);else{var e=m.getOptions();0==e.gallery_carousel&&jQuery(m).on(m.events.ITEM_CHANGE,l)}b.initEvents()}(),E.isFirstRun=!1,void a())}function t(e){if(!e)e=d;if(e.append("<div class='ug-strip-panel'></div>"),_=e.children(".ug-strip-panel"),1==y.strippanel_enable_buttons){var t="ug-strip-arrow-left",i="ug-strip-arrow-right";1==y.strippanel_vertical_type&&(t="ug-strip-arrow-up",i="ug-strip-arrow-down"),_.append("<div class='ug-strip-arrow "+t+" ug-skin-"+y.strippanel_buttons_skin+"'><div class='ug-strip-arrow-tip'></div></div>"),_.append("<div class='ug-strip-arrow "+i+" ug-skin-"+y.strippanel_buttons_skin+"'><div class='ug-strip-arrow-tip'></div></div>")}b.setHtml(_),v.setHtml(_),1==y.strippanel_enable_buttons&&(c=_.children("."+t),g=_.children("."+i)),""!=y.strippanel_background_color&&_.css("background-color",y.strippanel_background_color)}function i(){0==y.strippanel_vertical_type?function(){var e=v.getHeight(),t=E.panelWidth;if(g){c.height(e),g.height(e);var i=c.children(".ug-strip-arrow-tip");f.placeElement(i,"center","middle");var n=g.children(".ug-strip-arrow-tip");f.placeElement(n,"center","middle")}var r=e+y.strippanel_padding_top+y.strippanel_padding_bottom;_.width(t),_.height(r),E.panelHeight=r;var o=t-y.strippanel_padding_left-y.strippanel_padding_right;g&&(o=o-2*g.outerWidth()-2*y.strippanel_padding_buttons),v.resize(o)}():function(){var e=v.getWidth(),t=E.panelHeight;if(g){c.width(e),g.width(e);var i=c.children(".ug-strip-arrow-tip");f.placeElement(i,"center","middle");var n=g.children(".ug-strip-arrow-tip");f.placeElement(n,"center","middle")}var r=e+y.strippanel_padding_left+y.strippanel_padding_right;_.width(r),_.height(t),E.panelWidth=r;var o=t-y.strippanel_padding_top-y.strippanel_padding_bottom;g&&(o=o-2*g.outerHeight()-2*y.strippanel_padding_buttons),v.resize(o)}()}function n(){0==y.strippanel_vertical_type?function(){g&&(f.placeElement(c,"left","top",y.strippanel_padding_left,y.strippanel_padding_top),f.placeElement(g,"right","top",y.strippanel_padding_right,y.strippanel_padding_top));var e=y.strippanel_padding_left;g&&(e+=g.outerWidth()+y.strippanel_padding_buttons),v.setPosition(e,y.strippanel_padding_top)}():function(){g&&(f.placeElement(c,"left","top",y.strippanel_padding_left,y.strippanel_padding_top),f.placeElement(g,"left","bottom",y.strippanel_padding_left,y.strippanel_padding_bottom));var e=y.strippanel_padding_top;g&&(e+=g.outerHeight()+y.strippanel_padding_buttons),v.setPosition(y.strippanel_padding_left,e)}(),b.placeElements()}function r(e){return!!f.isButtonDisabled(e)||void("advance_item"==y.strippanel_buttons_role?m.nextItem():v.scrollForeward())}function o(e){return!!f.isButtonDisabled(e)||void("advance_item"==y.strippanel_buttons_role?m.prevItem():v.scrollBack())}function a(){if(!g)return!0;if(0==v.isMoveEnabled())return f.disableButton(c),f.disableButton(g),!0;var e=v.getInnerStripLimits(),t=v.getInnerStripPos();t>=e.maxPos?f.disableButton(c):f.enableButton(c),t<=e.minPos?f.disableButton(g):f.enableButton(g)}function s(){a()}function l(){m.isLastItem()?f.disableButton(g):f.enableButton(g),m.isFirstItem()?f.disableButton(c):f.enableButton(c)}var u,d,_,g,c,h=this,p=jQuery(this),m=new UniteGalleryMain,f=new UGFunctions,v=new UGThumbsStrip,b=new UGPanelsBase;this.events={FINISH_MOVE:"gridpanel_move_finish",OPEN_PANEL:"open_panel",CLOSE_PANEL:"close_panel"};var y={strippanel_vertical_type:!1,strippanel_padding_top:8,strippanel_padding_bottom:8,strippanel_padding_left:0,strippanel_padding_right:0,strippanel_enable_buttons:!0,strippanel_buttons_skin:"",strippanel_padding_buttons:2,strippanel_buttons_role:"scroll_strip",strippanel_enable_handle:!0,strippanel_handle_align:"top",strippanel_handle_offset:0,strippanel_handle_skin:"",strippanel_background_color:""},I={strip_vertical_type:!0,strippanel_padding_left:8,strippanel_padding_right:8,strippanel_padding_top:0,strippanel_padding_bottom:0},w={strippanel_padding_left:8,strippanel_padding_right:8,strippanel_padding_top:8,strippanel_padding_bottom:8},E={panelType:"strip",panelWidth:0,panelHeight:0,isEventsInited:!1,isClosed:!1,orientation:null,originalPos:null,isFirstRun:!0};this.destroy=function(){g&&(f.destroyButton(g),f.destroyButton(c),jQuery(v).off(v.events.STRIP_MOVE),jQuery(m).off(m.events.ITEM_CHANGE),jQuery(m).off(m.events.SIZE_CHANGE)),b.destroy(),v.destroy()},this.getOrientation=function(){return E.orientation},this.setOrientation=function(e){E.orientation=e},this.init=function(e,t){!function(e,t){m=e,u=jQuery(m);var i=!1;1==(y=jQuery.extend(y,t)).strippanel_vertical_type&&(y=jQuery.extend(y,I),i=!0),0==y.strippanel_enable_buttons&&(y=jQuery.extend(y,w),i=!0),1==i&&(y=jQuery.extend(y,t));var n=m.getOptions().gallery_skin;""==y.strippanel_buttons_skin&&(y.strippanel_buttons_skin=n),d=m.getElement(),b.init(m,E,h,y,p),(v=new UGThumbsStrip).init(m,y)}(e,t)},this.run=function(){e()},this.setHtml=function(e){t(e)},this.getElement=function(){return _},this.getSize=function(){return f.getElementSize(_)},this.setWidth=function(e){E.panelWidth=e},this.setHeight=function(e){E.panelHeight=e},this.resize=function(e){h.setWidth(e),i(),n()},this.__________Functions_From_Base_____=function(){},this.isPanelClosed=function(){return b.isPanelClosed()},this.getClosedPanelDest=function(){return b.getClosedPanelDest()},this.openPanel=function(e){b.openPanel(e)},this.closePanel=function(e){b.closePanel(e)},this.setOpenedState=function(e){b.setOpenedState(e)},this.setClosedState=function(e){b.setClosedState(e)},this.setCustomThumbs=function(e){v.setCustomThumbs(e)},this.setDisabledAtStart=function(e){b.setDisabledAtStart(e)}}function UGGridPanel(){function e(e,i){g=e,t(),i&&i.vertical_scroll&&(m.gridpanel_vertical_scroll=i.vertical_scroll),m=jQuery.extend(m,i),1==b.isHorType?(m=jQuery.extend(m,v),m=jQuery.extend(m,i)):1==m.gridpanel_vertical_scroll&&(m=jQuery.extend(m,f),(m=jQuery.extend(m,i)).grid_panes_direction="bottom");var n=g.getOptions().gallery_skin;""==m.gridpanel_arrows_skin&&(m.gridpanel_arrows_skin=n);var r=e.getObjects();a=r.g_objWrapper,p.init(g,b,d,m,_),(h=new UGThumbsGrid).init(g,m)}function t(){if(null==b.orientation)throw new Error("Wrong orientation, please set panel orientation before run")}function i(){var e;t(),"center"==m.gridpanel_grid_align&&(m.gridpanel_grid_align="middle"),h.run(),function(){var e=!1;if(1==m.gridpanel_arrows_always_on)e=!0;else{var t=h.getNumPanes();t>1&&(e=!0)}1==e?(l.show().fadeTo(0,1),u.show().fadeTo(0,1),b.arrowsVisible=!0):(l.hide(),u.hide(),b.arrowsVisible=!1)}(),e=h.getSize(),1==b.isHorType?b.panelHeight=e.height+m.gridpanel_padding_border_top+m.gridpanel_padding_border_bottom:b.panelWidth=e.width+m.gridpanel_padding_border_left+m.gridpanel_padding_border_right,c.setElementSize(s,b.panelWidth,b.panelHeight),0==b.isHorType?1==m.gridpanel_vertical_scroll?1==b.arrowsVisible?function(){var e,t,i,n,o=c.getElementSize(u),a=h.getSize();switch(m.gridpanel_grid_align){default:case"top":e=m.gridpanel_padding_border_top+o.height+m.gridpanel_arrows_padding_vert;break;case"middle":e="middle";break;case"bottom":e=b.panelHeight-a.height-o.height-m.gridpanel_padding_border_bottom-m.gridpanel_arrows_padding_vert}var s=r(),d=h.getElement();c.placeElement(d,s,e);var a=h.getSize();switch(m.gridpanel_arrows_align_vert){default:case"center":case"middle":t=(a.top-o.height)/2,i=a.bottom+(b.panelHeight-a.bottom-o.height)/2,n=0;break;case"grid":t=a.top-o.height-m.gridpanel_arrows_padding_vert_vert,i=a.bottom+m.gridpanel_arrows_padding_vert,n=0;break;case"border":case"borders":t=m.gridpanel_padding_border_top,i="bottom",n=m.gridpanel_padding_border_bottom}c.placeElement(u,"center",t),c.placeElement(l,"center",i,0,n)}():o():1==b.arrowsVisible?function(){var e,t,i,n=c.getElementSize(u),o=h.getSize(),a=m.gridpanel_padding_border_top;switch(m.gridpanel_grid_align){case"middle":switch(m.gridpanel_arrows_align_vert){default:var s=o.height+m.gridpanel_arrows_padding_vert+n.height;a=(b.panelHeight-s)/2;break;case"border":case"borders":var d=b.panelHeight-n.height-m.gridpanel_padding_border_bottom;a=(d-o.height)/2}break;case"bottom":var s=o.height+n.height+m.gridpanel_arrows_padding_vert;a=b.panelHeight-s-m.gridpanel_padding_border_bottom}var _=h.getElement(),g=r();c.placeElement(_,g,a);var o=h.getSize();switch(m.gridpanel_arrows_align_vert){default:case"center":case"middle":e=o.bottom+(b.panelHeight-o.bottom-n.height)/2,i=0;break;case"grid":e=o.bottom+m.gridpanel_arrows_padding_vert,i=0;break;case"border":case"borders":e="bottom",i=m.gridpanel_padding_border_bottom}t=-n.width/2-m.gridpanel_space_between_arrows/2,c.placeElement(u,"center",e,t,i);var p=Math.abs(t);c.placeElement(l,"center",e,p,i)}():o():1==b.arrowsVisible?function(){var e,t,i,n,r=c.getElementSize(u),o=h.getSize();switch(m.gridpanel_grid_align){default:case"left":e=m.gridpanel_padding_border_left+m.gridpanel_arrows_padding_hor+r.width;break;case"middle":case"center":e="center";break;case"right":e=b.panelWidth-o.width-r.width-m.gridpanel_padding_border_right-m.gridpanel_arrows_padding_hor}var a=h.getElement();switch(c.placeElement(a,e,m.gridpanel_padding_border_top),o=h.getSize(),m.gridpanel_arrows_align_vert){default:case"center":case"middle":n=(o.height-r.height)/2+o.top;break;case"top":n=m.gridpanel_padding_border_top+m.gridpanel_arrows_padding_vert;break;case"bottom":n=b.panelHeight-m.gridpanel_padding_border_bottom-m.gridpanel_arrows_padding_vert-r.height}switch(m.gridpanel_arrows_align_hor){default:case"borders":t=m.gridpanel_padding_border_left,i=b.panelWidth-m.gridpanel_padding_border_right-r.width;break;case"grid":t=o.left-m.gridpanel_arrows_padding_hor-r.width,i=o.right+m.gridpanel_arrows_padding_hor;break;case"center":t=(o.left-r.width)/2,i=o.right+(b.panelWidth-o.right-r.width)/2}c.placeElement(u,t,n),c.placeElement(l,i,n)}():function(){var e,t=h.getSize();switch(m.gridpanel_grid_align){default:case"left":e=m.gridpanel_padding_border_left;break;case"middle":case"center":e="center";break;case"right":e=b.panelWidth-t.width-m.gridpanel_padding_border_right}var i=h.getElement();c.placeElement(i,e,m.gridpanel_padding_border_top)}(),p.placeElements(),1!=b.isEventsInited&&(b.isEventsInited=!0,u&&(c.addClassOnHover(u),h.attachPrevPaneButton(u)),l&&(c.addClassOnHover(l),h.attachNextPaneButton(l)),p.initEvents())}function n(){a.append("<div class='ug-grid-panel'></div>"),s=a.children(".ug-grid-panel"),b.isHorType?(s.append("<div class='grid-arrow grid-arrow-left-hortype ug-skin-"+m.gridpanel_arrows_skin+"'></div>"),s.append("<div class='grid-arrow grid-arrow-right-hortype ug-skin-"+m.gridpanel_arrows_skin+"'></div>"),u=s.children(".grid-arrow-left-hortype"),l=s.children(".grid-arrow-right-hortype")):0==m.gridpanel_vertical_scroll?(s.append("<div class='grid-arrow grid-arrow-left ug-skin-"+m.gridpanel_arrows_skin+"'></div>"),s.append("<div class='grid-arrow grid-arrow-right ug-skin-"+m.gridpanel_arrows_skin+"'></div>"),u=s.children(".grid-arrow-left"),l=s.children(".grid-arrow-right")):(s.append("<div class='grid-arrow grid-arrow-up ug-skin-"+m.gridpanel_arrows_skin+"'></div>"),s.append("<div class='grid-arrow grid-arrow-down ug-skin-"+m.gridpanel_arrows_skin+"'></div>"),u=s.children(".grid-arrow-up"),l=s.children(".grid-arrow-down")),p.setHtml(s),u.fadeTo(0,0),l.fadeTo(0,0),h.setHtml(s),""!=m.gridpanel_background_color&&s.css("background-color",m.gridpanel_background_color)}function r(){return m.gridpanel_padding_border_left}function o(){var e=m.gridpanel_grid_align,t=0;switch(e){case"top":t=m.gridpanel_padding_border_top;break;case"bottom":t=m.gridpanel_padding_border_bottom}var i=r(),n=h.getElement();c.placeElement(n,i,e,0,t)}var a,s,l,u,d=this,_=jQuery(this),g=new UniteGalleryMain,c=new UGFunctions,h=new UGThumbsGrid,p=new UGPanelsBase;this.events={FINISH_MOVE:"gridpanel_move_finish",OPEN_PANEL:"open_panel",CLOSE_PANEL:"close_panel"};var m={gridpanel_vertical_scroll:!0,gridpanel_grid_align:"middle",gridpanel_padding_border_top:10,gridpanel_padding_border_bottom:4,gridpanel_padding_border_left:10,gridpanel_padding_border_right:10,gridpanel_arrows_skin:"",gridpanel_arrows_align_vert:"middle",gridpanel_arrows_padding_vert:4,gridpanel_arrows_align_hor:"center",gridpanel_arrows_padding_hor:10,gridpanel_space_between_arrows:20,gridpanel_arrows_always_on:!1,gridpanel_enable_handle:!0,gridpanel_handle_align:"top",gridpanel_handle_offset:0,gridpanel_handle_skin:"",gridpanel_background_color:""},f={gridpanel_grid_align:"middle",gridpanel_padding_border_top:2,gridpanel_padding_border_bottom:2},v={gridpanel_grid_align:"center"},b={panelType:"grid",isHorType:!1,arrowsVisible:!1,panelHeight:0,panelWidth:0,originalPosX:null,isEventsInited:!1,isClosed:!1,orientation:null};this.destroy=function(){u&&c.destroyButton(u),l&&c.destroyButton(l),p.destroy(),h.destroy()},this.getOrientation=function(){return b.orientation},this.setOrientation=function(e){switch(b.orientation=e,e){case"right":case"left":b.isHorType=!1;break;case"top":case"bottom":b.isHorType=!0;break;default:throw new Error("Wrong grid panel orientation: "+e)}},this.setHeight=function(e){if(1==b.isHorType)throw new Error("setHeight is not appliable to this orientatio ("+b.orientation+"). Please use setWidth");b.panelHeight=e;var t=function(){var e=m.gridpanel_padding_border_top+m.gridpanel_padding_border_bottom,t=b.panelHeight-e;return 0==m.gridpanel_arrows_always_on&&1==h.getNumPanesEstimationByHeight(t)?t:(e=c.getElementSize(l).height+m.gridpanel_arrows_padding_vert,1==m.gridpanel_vertical_scroll&&(e*=2),e+=m.gridpanel_padding_border_top+m.gridpanel_padding_border_bottom,b.panelHeight-e)}();h.setMaxHeight(t)},this.setWidth=function(e){if(0==b.isHorType)throw new Error("setWidth is not appliable to this orientatio ("+b.orientation+"). Please use setHeight");b.panelWidth=e;var t=function(){var e=m.gridpanel_padding_border_left+m.gridpanel_padding_border_right,t=b.panelWidth-e;return 0==m.gridpanel_arrows_always_on&&1==h.getNumPanesEstimationByWidth(t)?t:(e+=2*(c.getElementSize(l).width+m.gridpanel_arrows_padding_hor),b.panelWidth-e)}();h.setMaxWidth(t)},this.init=function(t,i){e(t,i)},this.setHtml=function(){n()},this.run=function(){i()},this.getElement=function(){return s},this.getSize=function(){return c.getElementSize(s)},this.__________Functions_From_Base_____=function(){},this.isPanelClosed=function(){return p.isPanelClosed()},this.getClosedPanelDest=function(){return p.getClosedPanelDest()},this.openPanel=function(e){p.openPanel(e)},this.closePanel=function(e){p.closePanel(e)},this.setOpenedState=function(e){p.setOpenedState(e)},this.setClosedState=function(e){p.setClosedState(e)},this.setDisabledAtStart=function(e){p.setDisabledAtStart(e)}}function UGThumbsGrid(){function e(e,t,i){if(b=e.getObjects(),(P=e).attachThumbsPanel("grid",T),v=jQuery(e),y=b.g_objWrapper,I=b.g_arrItems,!0===i&&(M.isTilesMode=!0),M.numThumbs=I.length,function(e){A=jQuery.extend(A,e),j.setOptions(e),M.isNavigationVertical="top"==A.grid_panes_direction||"bottom"==A.grid_panes_direction,M.spaceBetweenCols=A.grid_space_between_cols,M.spaceBetweenRows=A.grid_space_between_rows}(t),1==M.isTilesMode){C.setFixedMode(),C.setApproveClickFunction(g),C.init(e,A);var n=C.getOptions();M.tileMaxHeight=n.tile_height,M.tileMaxWidth=n.tile_width,j=C.getObjThumbs()}else t.thumb_fixed_size=!0,j.init(e,t)}function t(){var e=P.getSelectedItem();if(function(){if(0==M.isHorizontal){if(0==M.gridHeight)throw new Error("You must set height before run.")}else if(0==M.gridWidth)throw new Error("You must set width before run.")}(),1==M.isFirstTimeRun)(function(){if(0==M.isTilesMode){j.initEvents();var e=w.find(".ug-thumb-wrapper");e.on("click touchend",c),v.on(P.events.ITEM_CHANGE,f)}else C.initEvents();w.bind("mousedown touchstart",h),jQuery("body").bind("mousemove touchmove",p),jQuery(window).add("body").bind("mouseup touchend",m)})(),1==M.isTilesMode?(n(),r(),C.run()):(j.setHtmlProperties(),r(),j.loadThumbsImages());else if(1==M.isTilesMode){1==n()&&(r(),C.run())}if(0==M.isHorizontal?M.isNavigationVertical?function(){var e=E.children(".ug-thumb-wrapper"),i=0,n=0,r=0,o=0,a=0,s=0;M.innerWidth=0,M.numPanes=1,M.arrPanes=[],M.numThumbsInPane=0,M.arrPanes.push(a);var l=e.length;for(t=0;t<l;t++){var u=jQuery(e[t]);x.placeElement(u,i,n);var d=u.outerWidth(),_=u.outerHeight();i+=d+M.spaceBetweenCols;var g=n+_;g>r&&(r=g),++o>=A.grid_num_cols&&(n+=_+M.spaceBetweenRows,i=a,o=0),1==M.numPanes&&M.numThumbsInPane++,g=n+_;var c=s+M.gridHeight;g>c&&(1==M.isMaxHeight&&1==M.numPanes&&(M.gridHeight=r,w.height(M.gridHeight),c=M.gridHeight),n=c+M.spaceBetweenRows,s=n,i=a=0,o=0,t<l-1&&(M.numPanes++,M.arrPanes.push(n)))}E.height(r),M.innerHeight=r,1==M.isMaxHeight&&1==M.numPanes&&(M.gridHeight=r,w.height(r))}():function(){var e=E.children(".ug-thumb-wrapper"),i=0,n=0,r=0,o=0,a=0,s=0;M.innerWidth=0,M.numPanes=1,M.arrPanes=[],M.numThumbsInPane=0,M.arrPanes.push(o);var l=e.length;for(t=0;t<l;t++){var u=jQuery(e[t]);x.placeElement(u,i,n);var d=u.outerWidth(),_=u.outerHeight();i>a&&(a=i);var g=n+_;g>s&&(s=g);var c=a+d;c>M.innerWidth&&(M.innerWidth=c),i+=d+M.spaceBetweenCols,++r>=A.grid_num_cols&&(n+=_+M.spaceBetweenRows,i=o,r=0),1==M.numPanes&&M.numThumbsInPane++,n+_>M.gridHeight&&(n=0,o=M.innerWidth+M.spaceBetweenCols,i=o,r=0,1==M.isMaxHeight&&1==M.numPanes&&(M.gridHeight=s,w.height(M.gridHeight)),t<l-1&&(M.numPanes++,M.arrPanes.push(o)))}E.width(M.innerWidth),1==M.isMaxHeight&&1==M.numPanes&&(M.gridHeight=s,w.height(s))}():function(){var e=E.children(".ug-thumb-wrapper"),i=A.grid_padding,n=A.grid_padding,r=n,o=i,a=0,s=0,l=0,u=0,d=0;M.innerWidth=0,M.numPanes=1,M.arrPanes=[],M.numThumbsInPane=0,M.arrPanes.push(i-A.grid_padding);var _=e.length;for(t=0;t<_;t++){var g=jQuery(e[t]),c=g.outerWidth(),h=g.outerHeight();o-i+c>M.gridWidth&&(r=0,++d>=A.grid_num_rows?(d=0,i=o,r=n,l=0,1==M.numPanes&&(M.gridWidth=a+A.grid_padding,w.width(M.gridWidth),M.gridHeight=u+A.grid_padding,w.height(M.gridHeight)),M.numPanes++,M.arrPanes.push(i-A.grid_padding)):(o=i,r=l+M.spaceBetweenRows)),x.placeElement(g,o,r);var p=o+c;p>a&&(a=p);var m=r+h;m>l&&(l=m),m>u&&(u=m),m>s&&(s=m);var p=a+c;p>M.innerWidth&&(M.innerWidth=p),o+=c+M.spaceBetweenCols,1==M.numPanes&&M.numThumbsInPane++}M.innerWidth=a+A.grid_padding,M.innerHeight=u+A.grid_padding,E.width(M.innerWidth),E.height(M.innerHeight),1==M.numPanes&&(M.gridWidth=a+A.grid_padding,M.gridHeight=u+A.grid_padding,w.width(M.gridWidth),w.height(M.gridHeight))}(),1==M.isFirstTimeRun&&M.isTilesMode){var t=j.getThumbs();t.each(function(e,t){y.trigger(M.eventSizeChange,jQuery(t))}),t.fadeTo(0,1)}null!=e&&o(e.index),S.trigger(T.events.PANE_CHANGE,M.currentPane),M.isFirstTimeRun=!1}function i(){if(1==M.isTilesMode)var e=C.getGlobalTileSize();else e=j.getGlobalThumbSize();return e}function n(){if(0==M.isTilesMode)throw new Error("Dynamic size can be set only in tiles mode");var e=!1,t=P.isMobileMode(),n=M.spaceBetweenCols;1==t?(M.spaceBetweenCols=A.grid_space_between_mobile,M.spaceBetweenRows=A.grid_space_between_mobile):(M.spaceBetweenCols=A.grid_space_between_cols,M.spaceBetweenRows=A.grid_space_between_rows),M.spaceBetweenCols!=n&&(e=!0);var r=i().width,o=M.tileMaxWidth;return x.getNumItemsInSpace(M.gridWidth,M.tileMaxWidth,M.spaceBetweenCols)<A.grid_min_cols&&(o=x.getItemSizeInSpace(M.gridWidth,A.grid_min_cols,M.spaceBetweenCols)),C.setTileSizeOptions(o),o!=r&&(e=!0),e}function r(){var e,t,n;0==M.isHorizontal?(e=i().width,t=A.grid_num_cols*e+(A.grid_num_cols-1)*M.spaceBetweenCols+2*A.grid_padding,n=M.gridHeight,M.gridWidth=t,x.setElementSize(w,t,n),x.setElementSize(E,t,n),M.innerWidth=t,M.innerHeight=n):function(){var e=i().height,t=M.gridWidth,n=A.grid_num_rows*e+(A.grid_num_rows-1)*M.spaceBetweenRows+2*A.grid_padding;M.gridHeight=n,x.setElementSize(w,t,n),x.setElementSize(E,t,n),M.innerWidth=t,M.innerHeight=n}()}function o(e){var t=d(e);return-1!=t&&void T.gotoPane(t,"scroll")}function a(e){var t=l(e);return 0!=t&&void E.stop(!0).animate(t,{duration:A.grid_transition_duration,easing:A.grid_transition_easing,queue:!1})}function s(){a(-M.arrPanes[M.currentPane])}function l(e){var t={};return 1==M.isNavigationVertical?t.top=e+"px":t.left=e+"px",t}function u(){var e=x.getElementSize(E);return 1==M.isNavigationVertical?e.top:e.left}function d(e){return 0==function(e){if(0>e||e>=M.numThumbs)throw new Error("Thumb not exists: "+e);return!0}(e)?-1:Math.floor(e/M.numThumbsInPane)}function _(){var e=x.getStoredEventData(M.storedEventID),t=u();diffPos=Math.abs(e.startInnerPos-t);var i=1==M.isNavigationVertical?M.gridHeight:M.gridWidth,n=Math.round(3*i/8);return diffPos>=n||e.diffTime<300&&diffPos>25}function g(){return 1==M.numPanes||x.isApproveStoredEventClick(M.storedEventID,M.isNavigationVertical)}function c(e){if(1==function(){if(1==M.numPanes)return!1;var e=x.getStoredEventData(M.storedEventID),t=e.diffTime,i=u(),n=Math.abs(i-e.startInnerPos);return n>30||n>5&&t>300}())return!0;var t=jQuery(this),i=j.getItemByThumb(t);P.selectItem(i)}function h(e){if(1==M.numPanes)return!0;if(1==M.touchActive)return!0;0==M.isTilesMode&&e.preventDefault(),M.touchActive=!0;var t={startInnerPos:u()};x.storeEventData(e,M.storedEventID,t)}function p(e){if(0==M.touchActive)return!0;e.preventDefault(),x.updateStoredEventData(e,M.storedEventID);var t=x.getStoredEventData(M.storedEventID,M.isNavigationVertical);if(0!=A.grid_vertical_scroll_ondrag&&1!=M.isNavigationVertical&&"vert"===x.handleScrollTop(M.storedEventID))return!0;var i=t.diffMousePos,n=t.startInnerPos+i,r=i>0?"prev":"next",o=M.arrPanes[M.numPanes-1];0==A.grid_carousel&&n>0&&"prev"==r&&(n/=3),0==A.grid_carousel&&-o>n&&"next"==r&&(n=t.startInnerPos+i/3),function(e){var t=l(e);0!=t&&E.css(t)}(n)}function m(e){if(0==M.touchActive)return!0;x.updateStoredEventData(e,M.storedEventID);var t=x.getStoredEventData(M.storedEventID,M.isNavigationVertical);if(M.touchActive=!1,0==_())return s(),!0;"next"==(u()-t.startInnerPos>0?"prev":"next")?0==A.grid_carousel&&T.isLastPane()?s():T.nextPane():0==A.grid_carousel&&T.isFirstPane()?s():T.prevPane()}function f(){var e=P.getSelectedItem();j.setThumbSelected(e.objThumbWrapper),o(e.index)}var v,b,y,I,w,E,T=this,S=jQuery(this),P=new UniteGalleryMain,x=new UGFunctions,j=new UGThumbsGeneral,C=new UGTileDesign,A={grid_panes_direction:"left",grid_num_cols:2,grid_min_cols:2,grid_num_rows:2,grid_space_between_cols:10,grid_space_between_rows:10,grid_space_between_mobile:10,grid_transition_duration:300,grid_transition_easing:"easeInOutQuad",grid_carousel:!1,grid_padding:0,grid_vertical_scroll_ondrag:!1};this.events={PANE_CHANGE:"pane_change"};var M={eventSizeChange:"thumb_size_change",isHorizontal:!1,isMaxHeight:!1,isMaxWidth:!1,gridHeight:0,gridWidth:0,innerWidth:0,innerHeight:0,numPanes:0,arrPanes:0,numThumbs:0,currentPane:0,numThumbsInPane:0,isNavigationVertical:!1,touchActive:!1,startScrollPos:0,isFirstTimeRun:!0,isTilesMode:!1,storedEventID:"thumbsgrid",tileMaxWidth:null,tileMaxHeight:null,spaceBetweenCols:null,spaceBetweenRows:null};this.destroy=function(){if(0==M.isTilesMode){var e=w.find(".ug-thumb-wrapper");e.off("click"),e.off("touchend"),v.on(P.events.ITEM_CHANGE),j.destroy()}else C.destroy();w.unbind("mousedown"),w.unbind("touchstart"),jQuery("body").unbind("mousemove"),jQuery("body").unbind("touchmove"),jQuery(window).add("body").unbind("touchend"),jQuery(window).add("body").unbind("mouseup"),S.off(T.events.PANE_CHANGE)},this.__________EXTERNAL_GENERAL_________=function(){},this.setThumbUnselected=function(e){j.setThumbUnselected(e)},this.isItemThumbVisible=function(e){return d(e.index)==M.currentPane},this.__________EXTERNAL_API_________=function(){},this.getNumPanesEstimationByHeight=function(e){if(1==M.isTilesMode)var t=A.tile_height;else t=j.getOptions().thumb_height;var i=j.getNumThumbs(),n=Math.ceil(i/A.grid_num_cols),r=n*t+(n-1)*M.spaceBetweenRows;return Math.ceil(r/e)},this.getNumPanesEstimationByWidth=function(e){if(M.isTilesMode)var t=A.tile_width;else t=j.getOptions().thumb_width;var i=j.getNumThumbs(),n=Math.ceil(i/A.grid_num_rows),r=n*t+(n-1)*M.spaceBetweenCols;return Math.ceil(r/e)},this.getHeightEstimationByWidth=function(e){if(0==M.isTilesMode)throw new Error("This function works only with tiles mode");var t=j.getNumThumbs(),i=x.getNumItemsInSpace(e,A.tile_width,M.spaceBetweenCols),n=Math.ceil(t/i);return n>A.grid_num_rows&&(n=A.grid_num_rows),x.getSpaceByNumItems(n,A.tile_height,M.spaceBetweenRows)+2*A.grid_padding},this.getElement=function(){return w},this.getSize=function(){return x.getElementSize(w)},this.getNumPanes=function(){return M.numPanes},this.isFirstPane=function(){return 0==M.currentPane},this.isLastPane=function(){return M.currentPane==M.numPanes-1},this.getPaneInfo=function(){return{pane:M.currentPane,total:M.numPanes}},this.getPane=function(){return M.currentPane},this.setWidth=function(e){M.gridWidth=e,M.isHorizontal=!0},this.setMaxWidth=function(e){M.gridWidth=e,M.isMaxWidth=!0,M.isHorizontal=!0},this.setHeight=function(e){M.gridHeight=e,M.isHorizontal=!1},this.setMaxHeight=function(e){M.gridHeight=e,M.isMaxHeight=!0,M.isHorizontal=!1},this.gotoPane=function(e,t){if(0==function(e){if(e>=M.numPanes||0>e)throw new Error("Pane "+index+" doesn't exists.");return!0}(e))return!1;if(e==M.currentPane)return!1;var i=-M.arrPanes[e];M.currentPane=e,a(i),S.trigger(T.events.PANE_CHANGE,e)},this.nextPane=function(){var e=M.currentPane+1;if(e>=M.numPanes){if(0==A.grid_carousel)return!0;e=0}T.gotoPane(e,"next")},this.prevPane=function(){var e=M.currentPane-1;return!(0>e&&(e=M.numPanes-1,0==A.grid_carousel))&&void T.gotoPane(e,"prev")},this.attachNextPaneButton=function(e){return x.setButtonOnClick(e,T.nextPane),1==A.grid_carousel||(T.isLastPane()&&e.addClass("ug-button-disabled"),void S.on(T.events.PANE_CHANGE,function(){T.isLastPane()?e.addClass("ug-button-disabled"):e.removeClass("ug-button-disabled")}))},this.attachPrevPaneButton=function(e){return x.setButtonOnClick(e,T.prevPane),1==A.grid_carousel||(T.isFirstPane()&&e.addClass("ug-button-disabled"),void S.on(T.events.PANE_CHANGE,function(){T.isFirstPane()?e.addClass("ug-button-disabled"):e.removeClass("ug-button-disabled")}))},this.attachBullets=function(e){e.setActive(M.currentPane),jQuery(e).on(e.events.BULLET_CLICK,function(t,i){T.gotoPane(i,"theme"),e.setActive(i)}),jQuery(T).on(T.events.PANE_CHANGE,function(t,i){e.setActive(i)})},this.getObjTileDesign=function(){return C},this.init=function(t,i,n){e(t,i,n)},this.run=function(){t()},this.setHtml=function(e){!function(e){var t=y;e&&(t=e),t.append("<div class='ug-thumbs-grid'><div class='ug-thumbs-grid-inner'></div></div>"),w=t.children(".ug-thumbs-grid"),E=w.children(".ug-thumbs-grid-inner"),1==M.isTilesMode?C.setHtml(E):j.setHtmlThumbs(E)}(e)}}function UGTiles(){function e(e,t){g_objects=e.getObjects(),Q=e,L=jQuery(e),H=g_objects.g_objWrapper,g_objects.g_arrItems,(U=jQuery.extend(U,t)).tiles_min_columns<1&&(U.tiles_min_columns=1),0!=U.tiles_max_columns&&U.tiles_max_columns<U.tiles_min_columns&&(U.tiles_max_columns=U.tiles_min_columns),B.init(e,U),F=B.getObjThumbs()}function t(){if(N.addClass("ug-tiles-rest-mode"),V.isTransInited=!0,1==U.tiles_enable_transition){N.addClass("ug-tiles-transit");var e=B.getOptions();1==e.tile_enable_image_effect&&0==e.tile_image_effect_reverse&&N.addClass("ug-tiles-transit-overlays"),V.isTransActive=!0}}function i(){return W.getElementSize(N).width}function n(){return 0!=V.isTransInited&&(N.addClass("ug-tiles-transition-active"),N.removeClass("ug-tiles-rest-mode"),0!=V.isTransActive&&void B.disableEvents())}function r(){return 0!=V.isTransInited&&(N.removeClass("ug-tiles-transition-active"),void N.addClass("ug-tiles-rest-mode"))}function o(){1==V.isTransActive?(setTimeout(function(){B.enableEvents(),B.triggerSizeChangeEventAllTiles(),r()},800),V.handle&&clearTimeout(V.handle),V.handle=setTimeout(function(){r(),B.triggerSizeChangeEventAllTiles(),V.handle=null},2e3)):(B.triggerSizeChangeEventAllTiles(),r())}function a(){Y.colWidth=(Y.availWidth-Y.colGap*(Y.numCols-1))/Y.numCols,Y.colWidth=Math.floor(Y.colWidth),Y.totalWidth=W.getSpaceByNumItems(Y.numCols,Y.colWidth,Y.colGap)}function s(){if(Y.colWidth=U.tiles_col_width,Y.minCols=U.tiles_min_columns,Y.maxCols=U.tiles_max_columns,0==Q.isMobileMode()?Y.colGap=U.tiles_space_between_cols:Y.colGap=U.tiles_space_between_cols_mobile,Y.galleryWidth=i(),Y.availWidth=Y.galleryWidth,1==U.tiles_include_padding&&(Y.availWidth=Y.galleryWidth-2*Y.colGap),1==U.tiles_exact_width)Y.numCols=W.getNumItemsInSpace(Y.availWidth,Y.colWidth,Y.colGap),Y.maxCols>0&&Y.numCols>Y.maxCols&&(Y.numCols=Y.maxCols),Y.numCols<Y.minCols?(Y.numCols=Y.minCols,a()):Y.totalWidth=Y.numCols*(Y.colWidth+Y.colGap)-Y.colGap;else{var e=W.getNumItemsInSpaceRound(Y.availWidth,Y.colWidth,Y.colGap);e<Y.minCols?e=Y.minCols:0!=Y.maxCols&&e>Y.maxCols&&(e=Y.maxCols),Y.numCols=e,a()}switch(U.tiles_align){case"center":default:Y.addX=Math.round((Y.galleryWidth-Y.totalWidth)/2);break;case"left":Y.addX=0;break;case"right":Y.addX=Y.galleryWidth-Y.totalWidth}for(Y.arrPosx=[],col=0;col<Y.numCols;col++){var t=W.getColX(col,Y.colWidth,Y.colGap);Y.arrPosx[col]=t+Y.addX}}function l(){Y.maxColHeight=0,Y.colHeights=[0]}function u(e,t,i,n){if(null==n)n=function(){var e=0,t=999999999;for(col=0;col<Y.numCols;col++){if(null==Y.colHeights[col]||0==Y.colHeights[col])return col;Y.colHeights[col]<t&&(e=col,t=Y.colHeights[col])}return e}();var r=0;void 0!==Y.colHeights[n]&&(r=Y.colHeights[n]);var o=B.getTileHeightByWidth(Y.colWidth,e);if(null===o){if(1==U.tiles_enable_transition)throw new Error("Can't know tile height, please turn off transition");o=W.getElementSize(e).height}var a=Y.arrPosx[n];W.placeElement(e,a,r);var s=r+o;Y.colHeights[n]=s+Y.colGap,Y.maxColHeight<s&&(Y.maxColHeight=s),1==t&&e.show().fadeTo(0,1),1==i&&N.height(Y.maxColHeight)}function d(e){e||(e=!1),s(),l();var t=F.getThumbs(F.type.GET_THUMBS_RATIO);n(),B.resizeAllTiles(Y.colWidth,B.resizemode.VISIBLE_ELEMENTS,t);for(var i=0;i<t.length;i++){var r=jQuery(t[i]),a=void 0;1==U.tiles_keep_order&&(a=W.getColByIndex(Y.numCols,i)),u(r,e,!1,a)}o();var d=N.height();1==V.isTransActive&&d>Y.maxColHeight?setTimeout(function(){N.height(Y.maxColHeight)},700):N.height(Y.maxColHeight)}function _(e,t){if(!0!==t&&0==function(e){var t=e.index();if(!0===Q.getItem(t).ordered_placed)return!1;var i=W.getPrevRowSameColIndex(t,Y.numCols);return 0>i||!0===Q.getItem(i).ordered_placed}(e))return!1;var i=e.index(),n=W.getColByIndex(Y.numCols,i),r=Q.getItem(i);B.resizeTile(e,Y.colWidth),u(e,!0,!0,n),r.ordered_placed=!0;var o=Q.getNumItems(),a=W.getNextRowSameColIndex(i,Y.numCols);if(a>=o)return!1;var s=F.getThumbByIndex(a),l=Q.getItem(a);F.isThumbLoaded(s),F.isThumbLoaded(s)&&!l.ordered_placed&&_(s,!0)}function g(){var e=F.getThumbs(F.type.GET_THUMBS_NO_RATIO);if(!e||0==e.length)return!1;if(V.isAllLoaded=!1,1==V.isFirstPlaced){s(),l();var i=Math.abs(Y.galleryWidth-Y.totalWidth);if(1==U.tiles_set_initial_height&&0==W.isScrollbarExists()&&25>i){var n=(e.length,Math.ceil(e.length/Y.numCols))*U.tiles_col_width*.75;N.height(n),s()}}e.fadeTo(0,0);var r=e.find("img.ug-thumb-image"),o=Y.numCols,a=Y.galleryWidth;W.checkImagesLoaded(r,function(){s(),(o!=Y.numCols||a!=Y.galleryWidth)&&d(!1),t(),D.trigger(G.events.ALL_TILES_LOADED)},function(e,t){1==V.isFirstPlaced&&Q.triggerEvent(G.events.TILES_FIRST_PLACED),function(e,t){if(1==t)return!1;e=jQuery(e);var i=jQuery(e).parent();F.triggerImageLoadedEvent(i,e),1==U.tiles_keep_order?_(i):(B.resizeTile(i,Y.colWidth),u(i,!0,!0))}(e,t)})}function c(){var e=i(),t=F.getThumbs(!0),n=U.tiles_justified_row_height,r=[],o=0,a=U.tiles_justified_space_between,s=t.length;jQuery.each(t,function(e,t){t=jQuery(t);var i=F.getItemByThumb(t),a=i.thumbWidth;i.thumbHeight!==n&&(a=Math.floor(i.thumbRatioByWidth*n)),r[e]=a,o+=a});var l=Math.ceil(o/e);l>s&&(l=s);var u=o/l,d=[],_=0,g=[],c=[],h=0,p=0;jQuery.each(t,function(e,t){var i=r[e];h+i/2>(p+1)*u&&(g[d.length]=_,d.push(c),c=[],_=0,p++),h+=i,_+=i,c.push(t)}),g[d.length]=_,d.push(c);var m=[],f=[],v=0;return jQuery.each(d,function(t,i){var o=(i.length,g[t]),s=(i.length-1)*a,l=(e-s)/o,u=Math.round(n*l);v+=u,t>0&&(v+=a),f.push(u);var d=u/n,_=[],c=s;jQuery.each(i,function(e,t){var i=jQuery(t).index(),n=r[i],o=Math.round(n*d);_[e]=o,c+=o});var h=c-e;jQuery.each(_,function(e,t){return 0!=h&&(0>h?(_[e]=t+1,h++):(_[e]=t-1,h--),void(e==_.length-1&&0!=h&&(_[e]-=h)))}),m[t]=_}),{arrRows:d,arrRowWidths:m,arrRowHeights:f,gap:a,totalHeight:v}}function h(e){if(!e)e=!1;var t=i(),r=c();N.height(r.totalHeight),i()!=t&&(r=c()),n();var a=0,s=0;jQuery.each(r.arrRows,function(t,i){var n=r.arrRowWidths[t],o=r.arrRowHeights[t],l=0;jQuery.each(i,function(t,i){var u=jQuery(i),d=o,_=n[t];B.resizeTile(u,_,d,B.resizemode.VISIBLE_ELEMENTS),W.placeElement(u,l,a),(l+=_)>s&&(s=l),l+=r.gap,1==e&&jQuery(i).show()}),a+=o+r.gap}),o()}function p(){var e=i();switch(X.galleryWidth=e,k={},X.colWidth=U.tiles_nested_col_width,X.optimalTileWidth=U.tiles_nested_optimal_tile_width,X.currentGap=U.tiles_space_between_cols,1==Q.isMobileMode()&&(X.currentGap=U.tiles_space_between_cols_mobile),null==X.colWidth?X.colWidth=Math.floor(X.optimalTileWidth/X.nestedOptimalCols):X.optimalTileWidth>X.colWidth?X.nestedOptimalCols=Math.ceil(X.optimalTileWidth/X.colWidth):X.nestedOptimalCols=1,X.maxColumns=W.getNumItemsInSpace(e,X.colWidth,X.currentGap),X.colWidth=W.getItemSizeInSpace(e,X.maxColumns,X.currentGap),X.gridY=0,R=[],F.getThumbs(!0).each(function(){var e=function(e){var t,i,n={},r=X.colWidth,o=X.currentGap,a=B.getTileImageSize(e),s=e.index(),l=Math.ceil(function(e){return Math.abs(Math.sin(Math.abs(1e3*Math.sin(e))))}(s)*(1*X.nestedOptimalCols/3)+2*X.nestedOptimalCols/3),u=a.width,d=a.height,_=u/d;return u>d?(t=l,0==(i=Math.round(t/_))&&(i=1)):(i=l,0==(t=Math.round(i*_))&&(t=1)),n.dimWidth=t,n.dimHeight=i,n.width=t*r+o*(t-1),n.height=i*r+o*(i-1),n.imgWidth=u,n.imgHeight=d,n.left=0,n.top=0,n}(jQuery(this));R.push(e)}),X.optimalTileWidth>X.colWidth?X.nestedOptimalCols=Math.ceil(X.optimalTileWidth/X.colWidth):X.nestedOptimalCols=1,X.totalWidth=X.maxColumns*(X.colWidth+X.currentGap)-X.currentGap,U.tiles_align){case"center":default:X.addX=Math.round((X.galleryWidth-X.totalWidth)/2);break;case"left":X.addX=0;break;case"right":X.addX=X.galleryWidth-X.totalWidth}X.maxGridY=0}function m(e){var t=i();p(),f();var r=X.maxGridY*(X.colWidth+X.currentGap)-X.currentGap;N.height(r),i()!=t&&(p(),f()),0==U.tiles_nested_debug&&function(e){if(!e)var e=!1;n();for(var t=0;t<R.length;t++)M(t,e);N.height(X.maxColHeight),o()}(e)}function f(e){if(1==U.tiles_nested_debug)return void 0===e&&(e=!0),function(e,t){if(0==t){for(var i=X.currentItem;i<R.length;i++)v(i,!0);X.currentItem=R.length-1}else v(X.currentItem,!0);for(i=0;i<=X.currentItem;i++)M(i,!0);X.currentItem++}(0,e),!1;for(var t=0;t<R.length;t++)v(t,!0)}function v(e,t){if(!t)t=!1;X.maxColHeight=0;for(var i=W.getObjectLength(k),n=X.gridY;i+1>=n;n++){for(var r=0;r<X.maxColumns;r++)if(0==P(X.gridY)||0==C(X.gridY,r)){return void b(e,S(r),r)}X.gridY++}}function b(e,t,i){var n=jQuery.extend(!0,{},R[e]),r=n.dimWidth,o=t-n.dimWidth,a=X.nestedOptimalCols;if(t<=n.dimWidth||.33*a>=o||a>=t)I(e,t);else if(a>=o)a>=4?1==T(Math.floor(t/2),i)?I(e,Math.floor(t/2)+1):I(e,Math.floor(t/2)):I(objImage,t);else if(1==T(r,i))switch(r>=a){case!0:I(e,r-1);break;case!1:I(e,r+1)}var s=function(e,t,i){var n=X.gridY-1,r=0,o=0,a=1,s=[],l=[];if(s.push(e),n>=0){for(o=0;n>=0;){if(r=k[n][i],void 0!==k[n][i-1]&&k[n][i-1]==k[n][i]||void 0!==k[n][i+t]&&k[n][i+t-1]==k[n][i+t]||k[n][i]!=k[n][i+t-1])return l.push(a),l.push(s),l;o!=r&&(a++,s.push(r)),n--,o=r}return l.push(a),l.push(s),l}return[0,[]]}(e,(n=jQuery.extend(!0,{},R[e])).dimWidth,i);if(X.columnsValueToEnableHeightResize<=s[0]&&X.maxColumns>=2*X.nestedOptimalCols){var l=function(e,t){var i=0,n=0,r=t.dimWidth,o=t.dimHeight,a=0,s=0,l=jQuery.map(k,function(e,t){return[e]});if(void 0===l[X.gridY]||void 0===l[X.gridY][e-1])n=0;else for(var u=0;void 0!==k[X.gridY+u]&&-1!=k[X.gridY+u][e-1];)a=k[X.gridY+u][e-2],u++,n++;if(void 0===l[X.gridY]||void 0===l[X.gridY][e+r])i=0;else for(u=0;void 0!==k[X.gridY+u]&&-1!=k[X.gridY+u][e+r];)s=k[X.gridY+u][e+r+1],u++,i++;var d=0,_=0;return Math.abs(o-n)<Math.abs(o-i)&&0!=n?(d=n,_=a):0!=i?(d=i,_=s):d=o,{newHeight:d,idToResize:_}}(i,n),u=w(e,l.newHeight,!0);R[e].dimHeight=u.dimHeight;var d=function(e,t){for(var i=0,n=0,r=[],o=0,a=0,s=0;s<e[1].length;s++){var l=e[1][s],u=R[e[1][s]];if(n+=u.dimHeight,0!=s)i+=u.dimHeight,r.push([l,u.dimHeight]);else{var d=I(l,t,!0);i+=d.dimHeight,r.push([e[1][s],d.dimHeight])}}o=u.left,a=u.top;for(var _=n,g=[],s=r.length-1;s>=0;s--){var c,l=r[s][0];0!=s?(c=Math.max(Math.round(1*n/3),Math.floor(r[s][1]*(n/i))),_-=c,(d=w(l,c,!0)).left=o,d.top=a,g.push({tileID:l,sizes:d}),a+=d.dimHeight):((d=w(l,c=_,!0)).left=o,d.top=a,g.push({tileID:l,sizes:d}))}return g}(s,u.dimWidth),_=!1;(function(e){for(var t=0,i=0,n=0;n<e.length-1;n++){var r=e[n].sizes,o=-1,a=-1;P(r.top+r.dimHeight)&&X.maxColumns>r.left+r.dimWidth&&(o=k[r.top+r.dimHeight-1][r.left+r.dimWidth],a=k[r.top+r.dimHeight][r.left+r.dimWidth]),o!=a&&t++}for(var n=0;n<e.length-1;n++){var r=e[n].sizes,o=-1,a=-1;P(r.top+r.dimHeight)&&r.left-1>=0&&(o=k[r.top+r.dimHeight-1][r.left-1],a=k[r.top+r.dimHeight][r.left-1]),o!=a&&i++}return Math.max(i,t)})(d)>=2&&(_=!0),l.newHeight>=n.dimHeight&&(n=w(e,l.newHeight,!0));var g=function(e,t,i){var n=R[e],r=n.dimHeight,o=(n.dimWidth,n.left),a=n.top,s=(parseInt(a/(X.colWidth+X.currentGap)),parseInt(o/(X.colWidth+X.currentGap)),r-t+i),l=w(e,s,!0),u=[];return u.push({tileID:e,sizes:l}),u}(l.idToResize,l.newHeight,n.dimHeight);n.top=X.gridY,n.left=i,g.push({tileID:e,sizes:n});var c=E(g);return E(d)>c||1==_?void y(g):void y(d)}n.left=i,n.top=X.gridY,R[e]=n,x(e,n,i,X.gridY),X.maxGridY=n.top+n.dimHeight}function y(e){for(var t=0;t<e.length;t++){var i=e[t].sizes,n=e[t].tileID;R[n]=jQuery.extend(!0,{},i),x(n,i,i.left,i.top)}}function I(e,t,i){i||(i=!1);var n=X.colWidth,r=X.currentGap,o=R[e],a=o.imgWidth/o.imgHeight;if(dimWidth=t,dimHeight=Math.round(dimWidth/a),1==i){var s=jQuery.extend(!0,{},o);return s.dimWidth=dimWidth,s.dimHeight=dimHeight,s.width=dimWidth*n+r*(dimWidth-1),s.height=dimHeight*n+r*(dimHeight-1),s}o.dimWidth=dimWidth,o.dimHeight=dimHeight,o.width=dimWidth*n+r*(dimWidth-1),o.height=dimHeight*n+r*(dimHeight-1)}function w(e,t,i){i||(i=!1);var n=R[e],r=n.dimWidth,o=X.colWidth,a=X.currentGap;if(1==i){var s=jQuery.extend(!0,{},n);return s.dimHeight=t,s.width=r*o+a*(r-1),s.height=t*o+a*(t-1),s}n.dimHeight=t,n.width=r*o+a*(r-1),n.height=t*o+a*(t-1)}function E(e){for(var t=0,i=0,n=0;n<e.length;n++){var r=R[e[n].tileID];if(0==r.dimHeight||0==r.height)return;resizeVal=r.dimWidth/r.dimHeight/(r.imgWidth/r.imgHeight),resizeVal<1&&(resizeVal=1/resizeVal),t+=resizeVal,i++}return t/i}function T(e,t){var i=X.gridY-1;return!(0>=i||0==P(i))&&k[i][t+e-1]!=k[i][t+e]}function S(e){var t=e,i=0;if(1==P(X.gridY))for(;0==C(X.gridY,t);)i++,t++;else i=X.maxColumns;return i}function P(e){return void 0!==k[e]}function x(e,t,i,n){for(var r=0;r<t.dimHeight;r++)for(var o=0;o<t.dimWidth;o++)0==P(n+r)&&j(n+r),A(n+r,i+o,e)}function j(e){k[e]=new Object;for(var t=0;t<X.maxColumns;t++)k[e][t]=-1}function C(e,t){return-1!=k[e][t]}function A(e,t,i){k[e][t]=i}function M(e,t){var i=F.getThumbByIndex(e),n=R[e],r=n.top*(X.colWidth+X.currentGap),o=X.addX+n.left*(X.colWidth+X.currentGap);B.resizeTile(i,n.width,n.height,B.resizemode.VISIBLE_ELEMENTS),W.placeElement(i,o,r),r+n.height>X.maxColHeight&&(X.maxColHeight=r+n.height),1==t&&i.fadeTo(0,1)}function O(){if(1==V.isFirstTimeRun)return!0;if(0==V.isAllLoaded)return!1;switch(U.tiles_type){case"columns":d(!1);break;case"justified":h(!1);break;case"nested":1==Q.isMobileMode()?d(!1):m(!1)}}function z(){switch(H.children(".ug-tile").show(),1==V.isFirstTimeRun&&(D.on(G.events.ALL_TILES_LOADED,function(){V.isAllLoaded=!0}),L.on(Q.events.SIZE_CHANGE,O),L.on(G.events.TILES_FIRST_PLACED,function(){V.isFirstPlaced=!1}),B.initEvents()),B.run(),U.tiles_type){default:case"columns":g();break;case"justified":e=jQuery(H).find("img.ug-thumb-image"),i=F.getThumbs(),V.isAllLoaded=!1,i.fadeTo(0,0),W.checkImagesLoaded(e,function(){setTimeout(function(){h(!0),i.fadeTo(0,1),Q.triggerEvent(G.events.TILES_FIRST_PLACED),t(),D.trigger(G.events.ALL_TILES_LOADED)})},function(e,t){e=jQuery(e);var i=jQuery(e).parent();F.triggerImageLoadedEvent(i,e)});break;case"nested":!function(){var e=jQuery(H).find("img.ug-thumb-image"),i=F.getThumbs();V.isAllLoaded=!1,i.fadeTo(0,0),W.checkImagesLoaded(e,function(){1==Q.isMobileMode()?d(!0):m(!0),Q.triggerEvent(G.events.TILES_FIRST_PLACED),t(),D.trigger(G.events.ALL_TILES_LOADED)},function(e,t){e=jQuery(e);var i=jQuery(e).parent();F.triggerImageLoadedEvent(i,e)})}()}var e,i;V.isFirstTimeRun=!1}var L,H,N,k,R,G=this,D=jQuery(this),Q=new UniteGalleryMain,W=new UGFunctions,B=new UGTileDesign,F=new UGThumbsGeneral,Y={},U={tiles_type:"columns",tiles_col_width:250,tiles_align:"center",tiles_exact_width:!1,tiles_space_between_cols:3,tiles_space_between_cols_mobile:3,tiles_include_padding:!0,tiles_min_columns:2,tiles_max_columns:0,tiles_keep_order:!1,tiles_set_initial_height:!0,tiles_justified_row_height:150,tiles_justified_space_between:3,tiles_nested_optimal_tile_width:250,tiles_nested_col_width:null,tiles_nested_debug:!1,tiles_enable_transition:!0};this.events={THUMB_SIZE_CHANGE:"thumb_size_change",TILES_FIRST_PLACED:"tiles_first_placed",ALL_TILES_LOADED:"all_tiles_loaded"};var V={isFirstTimeRun:!0,handle:null,isTransActive:!1,isTransInited:!1,isFirstPlaced:!0,isAllLoaded:!1},X={colWidth:null,nestedOptimalCols:5,gridY:0,maxColumns:0,columnsValueToEnableHeightResize:3,resizeLeftRightToColumn:!0,currentItem:0,currentGap:null,optimalTileWidth:null,maxGridY:0};this.destroy=function(){L.off(Q.events.SIZE_CHANGE),B.destroy(),L.off(G.events.TILES_FIRST_PLACED)},this.init=function(t,i){e(t,i)},this.setHtml=function(e){!function(e){e||(e=N||H);N=e;var t=U.tiles_type;e.addClass("ug-tiletype-"+t),B.setHtml(e),e.children(".ug-thumb-wrapper").hide()}(e)},this.getObjTileDesign=function(){return B},this.run=function(){z()},this.runNewItems=function(){if(!N)throw new Error("Can't run new items - parent not set");switch(B.setHtml(N,!0),B.run(!0),U.tiles_type){case"columns":g();break;default:case"justified":case"nested":throw new Error("Tiles type: "+U.tiles_type+" not support load more yet")}}}function UGTileDesign(){function e(e,t){A=e,jQuery(e);var n=A.getObjects();x=n.g_objWrapper,A.getArrItems(),z=jQuery.extend(z,L),z=jQuery.extend(z,t),function(){if(1==z.tile_enable_overlay?(z.thumb_overlay_opacity=z.tile_overlay_opacity,z.thumb_overlay_color=z.tile_overlay_color):0==z.tile_enable_icons?z.thumb_color_overlay_effect=!1:z.thumb_overlay_opacity=0,z.tile_as_link&&(z.thumb_wrapper_as_link=!0,z.thumb_link_newpage=z.tile_link_newpage),1==z.tile_enable_outline&&0==z.tile_enable_border&&(z.tile_enable_outline=!1),H.tileInnerReduce=0,z.tile_enable_border&&(H.tileInnerReduce=2*z.tile_border_width,O.setThumbInnerReduce(H.tileInnerReduce)),H.isSaparateIcons=!M.isRgbaSupported(),1==z.tile_enable_textpanel){switch(z.tile_textpanel_position){case"top":z.tile_textpanel_align="top";case"bottom":H.isTextpanelOutside=!0,z.tile_textpanel_always_on=!0,z.tile_textpanel_offset=0;break;case"inside_top":z.tile_textpanel_align="top";break;case"middle":z.tile_textpanel_align="middle",z.tile_textpanel_appear_type="fade"}0==z.tile_textpanel_always_on&&(H.isSaparateIcons=!0)}0!=z.tile_textpanel_offset&&(z.tile_textpanel_appear_type="fade",z.tile_textpanel_margin=z.tile_textpanel_offset),"title_and_desc"==z.tile_textpanel_source&&(z.tile_textpanel_enable_description=!0,z.tile_textpanel_desc_style_as_title=!0)}(),O.init(e,z);var r=["overlay"];H.funcCustomTileHtml&&(r=[]),O.setCustomThumbs(i,r,{allow_onresize:!1});var o=O.getOptions();z=jQuery.extend(z,o),H.ratioByWidth=z.tile_width/z.tile_height,H.ratioByHeight=z.tile_height/z.tile_width,z.tile_size_by==j.sizeby.GLOBAL_RATIO&&H.isTextpanelOutside&&(H.hasImageContainer=!0)}function t(){var e=A.isMobileMode();switch(H.isTextPanelHidden=!1,1==e&&0==z.tile_textpanel_always_on&&(H.isTextPanelHidden=!0),H.isVideoplayIconAlwaysOn=z.tile_videoplay_icon_always_on,z.tile_videoplay_icon_always_on){case"always":H.isVideoplayIconAlwaysOn=!0;break;case"never":H.isVideoplayIconAlwaysOn=!1;break;case"mobile_only":H.isVideoplayIconAlwaysOn=1==e;break;case"desktop_only":H.isVideoplayIconAlwaysOn=0==e}}function i(e,t){if(e.addClass("ug-tile"),H.funcCustomTileHtml)return H.funcCustomTileHtml(e,t),!1;var i="";1==H.hasImageContainer&&(i+="<div class='ug-image-container ug-trans-enabled'>");var n="ug-thumb-image";(0==z.tile_enable_image_effect||1==z.tile_image_effect_reverse)&&(n+=" ug-trans-enabled");var r=M.stripTags(t.title);r=M.htmlentitles(r),i+='<img src="'+M.escapeDoubleSlash(t.urlThumb)+"\" alt='"+r+"' class='"+n+"'>",1==H.hasImageContainer&&(i+="</div>"),e.append(i),z.tile_size_by==j.sizeby.GLOBAL_RATIO&&e.fadeTo(0,0);var a={};if(1==z.tile_enable_background&&(a["background-color"]=z.tile_background_color),1==z.tile_enable_border&&(a["border-width"]=z.tile_border_width+"px",a["border-style"]="solid",a["border-color"]=z.tile_border_color,z.tile_border_radius&&(a["border-radius"]=z.tile_border_radius+"px")),1==z.tile_enable_outline&&(a.outline="1px solid "+z.tile_outline_color),1==z.tile_enable_shadow){var s=z.tile_shadow_h+"px ";s+=z.tile_shadow_v+"px ",s+=z.tile_shadow_blur+"px ",s+=z.tile_shadow_spread+"px ",s+=z.tile_shadow_color,a["box-shadow"]=s}e.css(a);var l="";if(z.tile_enable_icons){if(0==z.tile_as_link&&1==z.tile_enable_action){var u="ug-button-play ug-icon-zoom";"image"!=t.type&&(u="ug-button-play ug-icon-play"),l+="<div class='ug-tile-icon "+u+"' style='display:none'></div>"}if(t.link&&1==z.tile_show_link_icon||1==z.tile_as_link)if(0==z.tile_as_link){var d="";1==z.tile_link_newpage&&(d=" target='_blank'"),l+="<a href='"+t.link+"'"+d+" class='ug-tile-icon ug-icon-link'></a>"}else l+="<div class='ug-tile-icon ug-icon-link' style='display:none'></div>";var _=H.isSaparateIcons;if(0==_&&"image"!=t.type&&1==H.isVideoplayIconAlwaysOn&&(_=!0),_)var g=e;else g=e.children(".ug-thumb-overlay");g.append(l);var c=g.children("."+u);0==c.length?c=null:c.hide();var h=g.children(".ug-icon-link");0==h.length?h=null:h.hide(),h||1!=z.tile_enable_action||e.addClass("ug-tile-clickable")}else 1==z.tile_enable_action&&e.addClass("ug-tile-clickable");if(1==z.tile_enable_image_effect){var p="";0==z.tile_image_effect_reverse&&(p=" ug-trans-enabled");var m="<div class='ug-tile-image-overlay"+p+"' >",f=" ug-"+z.tile_image_effect_type+"-effect";m+='<img src="'+M.escapeDoubleSlash(t.urlThumb)+"\" alt='"+t.title+"' class='"+f+p+"'>",m+="</div>",e.append(m),1==z.tile_image_effect_reverse&&e.children(".ug-tile-image-overlay").fadeTo(0,0)}if(1==z.tile_enable_textpanel){var v=new UGTextPanel;v.init(A,z,"tile");var b="";(1==z.tile_textpanel_always_on||1==H.isTextpanelOutside)&&(b="ug-trans-enabled"),v.appendHTML(e,b);var y=t.title,I="";switch(z.tile_textpanel_source){case"desc":case"description":y=t.description;break;case"desc_title":""!=t.description&&(y=t.description);break;case"title_and_desc":y=t.title,I=t.description}if(v.setTextPlain(y,I),0==z.tile_textpanel_always_on&&v.getElement().fadeTo(0,0),e.data("objTextPanel",v),1==z.tile_textpanel_always_on)o(e).css("z-index",2);if(1==H.isTextpanelOutside){e.append("<div class='ug-tile-cloneswrapper'></div>");var w=e.children(".ug-tile-cloneswrapper"),E=new UGTextPanel;E.init(A,z,"tile"),E.appendHTML(w),E.setTextPlain(y,I),e.data("objTextPanelClone",E)}}null!==t.addHtml&&e.append(t.addHtml)}function n(e){return e.children(".ug-tile-image-overlay")}function r(e){return e.data("objTextPanel")}function o(e){return e.children(".ug-textpanel")}function a(e){if(1==H.isTextpanelOutside)var t=function(e){var t=e.find(".ug-tile-cloneswrapper .ug-textpanel");if(0==t.length)throw new Error("text panel cloned element not found");return t}(e);else t=o(e);return t?M.getElementSize(t).height:0}function s(e){var t=e.find(".ug-icon-link");return 0==t.length?null:t}function l(e){var t=e.find(".ug-button-play");return 0==t.length?null:t}function u(e){return!!e.hasClass("ug-thumb-over")}function d(e){return e.hasClass("ug-tile-clickable")}function _(e){return 1==z.tile_enable_icons&&1==H.isVideoplayIconAlwaysOn&&"image"!=e.type}function g(e,t,i,r){var o=n(e),s=j.getTileImage(e),l=function(e){return e.find(".ug-tile-image-overlay img")}(e);t-=H.tileInnerReduce,i-=H.tileInnerReduce;var u=null;if(1==H.isTextpanelOutside){var d=a(e);if(i-=d,"top"==z.tile_textpanel_position&&(u=d),1==H.hasImageContainer){var _=function(e){return 0==H.hasImageContainer?null:e.children(".ug-image-container")}(e);M.setElementSize(_,t,i),null!==u&&M.placeElement(_,0,u)}}if(0==z.tile_enable_image_effect)M.scaleImageCoverParent(s,t,i),0==H.hasImageContainer&&null!==u&&M.placeElement(s,0,u);else{var g="nothing";!0===r&&0==H.isTextpanelOutside&&(g=1==z.tile_image_effect_reverse?"effect":"image"),"effect"!=g&&(M.setElementSize(o,t,i),null!==u&&M.placeElement(o,0,u),M.scaleImageCoverParent(l,t,i)),"image"!=g&&(1==H.hasImageContainer?M.scaleImageCoverParent(s,t,i):"effect"==g?(M.scaleImageCoverParent(s,t,i),null!==u&&M.placeElement(s,0,u)):M.cloneElementSizeAndPos(l,s,!1,null,u))}}function c(e,t,i,n){var o=null;if(i&&(o=i-H.tileInnerReduce),n&&(n-=H.tileInnerReduce),"clone"==t)return function(e){return e.data("objTextPanelClone")}(e).refresh(!0,!0,o),j.getItemByTile(e).textPanelCloneSizeSet=!0,!1;var s=r(e);if(!s)return!1;var l=null;if(1==H.isTextpanelOutside&&(l=a(e)),s.refresh(!1,!0,o,l),1==z.tile_textpanel_always_on||"fade"==z.tile_textpanel_appear_type)if(1==H.isTextpanelOutside&&n&&"bottom"==z.tile_textpanel_position){var u=n-l;s.positionPanel(u)}else s.positionPanel()}function h(e){var t=(j.getItemByTile(e),l(e)),i=s(e),n=M.getElementSize(e);g(e,n.width,n.height),1==z.tile_enable_textpanel&&c(e,"regular",n.width,n.height);var r=n.width-H.tileInnerReduce,u=n.height-H.tileInnerReduce,d=0;if(1==H.isTextpanelOutside){var _=a(e);u-=_,"top"==z.tile_textpanel_position&&(d=_)}var h=function(e){return e.children(".ug-thumb-overlay")}(e);if(M.setElementSizeAndPosition(h,0,d,r,u),t||i){var p=0;if(1==z.tile_enable_textpanel&&0==H.isTextPanelHidden&&0==H.isTextpanelOutside){var m=o(e),f=M.getElementSize(m);f.height>0&&(p=Math.floor(f.height/2*-1))}}if(t&&i){var v=M.getElementSize(t),b=M.getElementSize(i),y=z.tile_space_between_icons,I=v.width+y+b.width,w=Math.floor((n.width-I)/2);y>w&&(y=Math.floor((n.width-v.width-b.width)/3),I=v.width+y+b.width,w=Math.floor((n.width-I)/2)),M.placeElement(t,w,"middle",0,p),M.placeElement(i,w+v.width+y,"middle",0,p)}else t&&M.placeElement(t,"center","middle",0,p),i&&M.placeElement(i,"center","middle",0,p);t&&t.show(),i&&i.show()}function p(e,t){var i=(j.getItemByTile(e),n(e)),r=z.thumb_transition_duration;if(0==z.tile_image_effect_reverse){var o=j.getTileImage(e);t?(o.fadeTo(0,1),i.stop(!0).fadeTo(r,0)):i.stop(!0).fadeTo(r,1)}else t?i.stop(!0).fadeTo(r,1):i.stop(!0).fadeTo(r,0)}function m(e,t){var i=z.thumb_transition_duration,n=o(e);if(!n)return!0;if("slide"==z.tile_textpanel_appear_type){var r=M.getElementSize(n);if(0==r.width)return!1;var a=-r.height,s={},l={},u="bottom";"inside_top"==z.tile_textpanel_position&&(u="top"),s[u]=a+"px",l[u]="0px",1==t?(n.fadeTo(0,1),0==n.is(":animated")&&n.css(s),l.opacity=1,n.stop(!0).animate(l,i)):n.stop(!0).animate(s,i)}else 1==t?n.stop(!0).fadeTo(i,1):n.stop(!0).fadeTo(i,0)}function f(e,t,i){var n=z.thumb_transition_duration;i&&!0===i&&(n=0);var r=l(e),o=s(e),a=t?1:0;r&&r.stop(!0).fadeTo(n,a),o&&o.stop(!0).fadeTo(n,a)}function v(e,t){if(t=jQuery(t),z.tile_enable_image_effect&&p(t,!0),1==z.tile_enable_textpanel&&0==z.tile_textpanel_always_on&&0==H.isTextPanelHidden&&m(t,!0),H.isSaparateIcons&&1==z.tile_enable_icons){var i=1==z.thumb_overlay_reverse;0==_(j.getItemByTile(t))&&f(t,i,!1)}}function b(e,t){if(t=jQuery(t),z.tile_enable_image_effect&&p(t,!1),1==z.tile_enable_textpanel&&0==z.tile_textpanel_always_on&&m(t,!1),1==H.isSaparateIcons&&1==z.tile_enable_icons){var i=1!=z.thumb_overlay_reverse;0==_(j.getItemByTile(t))?f(t,i,!1):f(t,!0,!0)}}function y(e,t,i){return t=jQuery(t),1==z.tile_visible_before_image&&!0!==t.data("image_placed")&&!0!==i||(h(t),void O.setThumbNormalStyle(t))}function I(e,t,i){h(t),i.fadeTo(0,1),t.data("image_placed",!0)}function w(e){return 1==d(e)?(C.trigger(j.events.TILE_CLICK,e),!0):void(0==u(e)&&(function(e){O.getThumbs().not(e).each(function(e,t){O.setThumbNormalStyle(jQuery(t))})}(e),O.setThumbOverStyle(e)))}function E(e){var t=jQuery(this),i=t.prop("tagName").toLowerCase(),n=!0;if(H.funcParentApproveClick&&0==H.funcParentApproveClick()&&(n=!1),"a"==i)0==n&&e.preventDefault();else if(0==u(t))1==n&&w(t);else{if(0==d(t))return!0;1==n&&C.trigger(j.events.TILE_CLICK,t)}}function T(e){e.stopPropagation();var t=jQuery(this).parents(".ug-tile"),i=!0;return H.funcParentApproveClick&&0==H.funcParentApproveClick()&&(i=!1),0==u(t)?(w(t),!0):1==i?(C.trigger(j.events.TILE_CLICK,t),!1):void 0}function S(e){var t=jQuery(this).parents(".ug-tile");H.funcParentApproveClick&&0==H.funcParentApproveClick()&&e.preventDefault(),0==u(t)&&0==z.tile_as_link&&(e.preventDefault(),w(t))}var P,x,j=this,C=jQuery(this),A=new UniteGalleryMain,M=new UGFunctions,O=new UGThumbsGeneral;this.resizemode={FULL:"full",WRAPPER_ONLY:"wrapper_only",VISIBLE_ELEMENTS:"visible_elements"},this.sizeby={GLOBAL_RATIO:"global_ratio",TILE_RATIO:"tile_ratio",IMAGE_RATIO:"image_ratio",CUSTOM:"custom"},this.events={TILE_CLICK:"tile_click"};var z={tile_width:250,tile_height:200,tile_size_by:j.sizeby.IMAGE_RATIO,tile_visible_before_image:!1,tile_enable_background:!0,tile_background_color:"#F0F0F0",tile_enable_border:!1,tile_border_width:3,tile_border_color:"#F0F0F0",tile_border_radius:0,tile_enable_outline:!1,tile_outline_color:"#8B8B8B",tile_enable_shadow:!1,tile_shadow_h:1,tile_shadow_v:1,tile_shadow_blur:3,tile_shadow_spread:2,tile_shadow_color:"#8B8B8B",tile_enable_action:!0,tile_as_link:!1,tile_link_newpage:!0,tile_enable_overlay:!0,tile_overlay_opacity:.4,tile_overlay_color:"#000000",tile_enable_icons:!0,tile_show_link_icon:!1,tile_videoplay_icon_always_on:"never",tile_space_between_icons:26,tile_enable_image_effect:!1,tile_image_effect_type:"bw",tile_image_effect_reverse:!1,tile_enable_textpanel:!1,tile_textpanel_source:"title",tile_textpanel_always_on:!1,tile_textpanel_appear_type:"slide",tile_textpanel_position:"inside_bottom",tile_textpanel_offset:0},L={thumb_color_overlay_effect:!0,thumb_overlay_reverse:!0,thumb_image_overlay_effect:!1,tile_textpanel_enable_description:!1,tile_textpanel_bg_opacity:.6,tile_textpanel_padding_top:8,tile_textpanel_padding_bottom:8},H={ratioByHeight:0,ratioByWidth:0,eventSizeChange:"thumb_size_change",funcCustomTileHtml:null,funcCustomPositionElements:null,funcParentApproveClick:null,isSaparateIcons:!1,tileInnerReduce:0,isTextpanelOutside:!1,hasImageContainer:!1,isVideoplayIconAlwaysOn:!1,isTextPanelHidden:!1};this.loadTileImage=function(e){var t=j.getTileImage(e);M.checkImagesLoaded(t,null,function(t,i){I(0,e,jQuery(t))})},this.setHtml=function(e,i){P=e,!0!==i&&t(),O.setHtmlThumbs(e,i)},this.initEvents=function(){O.initEvents(),jQuery(O).on(O.events.SETOVERSTYLE,v),jQuery(O).on(O.events.SETNORMALSTYLE,b),jQuery(O).on(O.events.PLACEIMAGE,I),x.on(H.eventSizeChange,y),P.on("click",".ug-tile",E),P.on("click",".ug-tile .ug-button-play",T),P.on("click",".ug-tile .ug-icon-link",S)},this.destroy=function(){if(P.off("click",".ug-tile"),P.off("click",".ug-tile .ug-button-play"),P.off("click",".ug-tile .ug-icon-link"),jQuery(O).off(O.events.SETOVERSTYLE),jQuery(O).off(O.events.SETNORMALSTYLE),jQuery(O).off(O.events.PLACEIMAGE),x.off(H.eventSizeChange),1==z.tile_enable_textpanel){var e=O.getThumbs();jQuery.each(e,function(e,t){var i=r(jQuery(t));i&&i.destroy()})}O.destroy()},this.init=function(t,i,n){e(t,i)},this.setFixedMode=function(){z.tile_size_by=j.sizeby.GLOBAL_RATIO,z.tile_visible_before_image=!0},this.setApproveClickFunction=function(e){H.funcParentApproveClick=e},this.resizeTile=function(e,t,i,n){if(1==H.isTextpanelOutside&&c(e,"clone",t),t){if(!i)i=j.getTileHeightByWidth(t,e)}else t=z.tile_width,i=z.tile_height;switch(M.setElementSize(e,t,i),n){default:case j.resizemode.FULL:j.triggerSizeChangeEvent(e,!0);break;case j.resizemode.WRAPPER_ONLY:return!0;case j.resizemode.VISIBLE_ELEMENTS:if(H.funcCustomTileHtml)return j.triggerSizeChangeEvent(e,!0),!0;g(e,t,i,!0),1==z.tile_enable_textpanel&&1==z.tile_textpanel_always_on&&t&&c(e,"regular",t,i)}},this.resizeAllTiles=function(e,i,n){t();var r=null;if(z.tile_size_by==j.sizeby.GLOBAL_RATIO&&(r=j.getTileHeightByWidth(e)),!n)n=O.getThumbs();n.each(function(t,n){j.resizeTile(jQuery(n),e,r,i)})},this.triggerSizeChangeEvent=function(e,t){if(!e)return!1;if(!t)t=!1;x.trigger(H.eventSizeChange,[e,t])},this.triggerSizeChangeEventAllTiles=function(e){O.getThumbs().each(function(){var t=jQuery(this);j.triggerSizeChangeEvent(t,e)})},this.disableEvents=function(){O.getThumbs().css("pointer-events","none")},this.enableEvents=function(){O.getThumbs().css("pointer-events","auto")},this.setOptions=function(e){z=jQuery.extend(z,e),O.setOptions(e)},this.setTileSizeOptions=function(e){if(z.tile_size_by!==j.sizeby.GLOBAL_RATIO)throw new Error("setNewTileOptions works with global ration only");z.tile_width=e,z.tile_height=Math.floor(e*H.ratioByHeight)},this.setCustomFunctions=function(e,t){H.funcCustomTileHtml=e,H.funcCustomPositionElements=t},this.run=function(e){var t=O.type.GET_THUMBS_ALL;!0===e&&(t=O.type.GET_THUMBS_NEW);var i=O.getThumbs(t);z.tile_size_by==j.sizeby.GLOBAL_RATIO&&j.resizeAllTiles(z.tile_width,j.resizemode.WRAPPER_ONLY,i),1==z.tile_enable_image_effect&&0==z.tile_image_effect_reverse&&i.children(".ug-thumb-image").fadeTo(0,0),O.setHtmlProperties(i),1==z.tile_visible_before_image&&(i.children(".ug-thumb-image").fadeTo(0,0),O.loadThumbsImages())},this._____________EXTERNAL_GETTERS____________=function(){},this.getObjThumbs=function(){return O},this.getOptions=function(){return z},this.getTileImage=function(e){return e.find("img.ug-thumb-image")},this.getItemByTile=function(e){return O.getItemByThumb(e)},this.getTileHeightByWidth=function(e,t){var i=function(e){var t=H.ratioByHeight;switch(z.tile_size_by){default:t=H.ratioByHeight;break;case j.sizeby.IMAGE_RATIO:if(!e)throw new Error("tile should be given for tile ratio");var i=j.getItemByTile(e);if(void 0!==i.thumbRatioByHeight){if(0==i.thumbRatioByHeight)throw trace(i),new Error("the item ratio not inited yet");t=i.thumbRatioByHeight}break;case j.sizeby.CUSTOM:return null}return t}(t);if(null===i)return null;var n=Math.floor((e-H.tileInnerReduce)*i)+H.tileInnerReduce;return t&&1==H.isTextpanelOutside&&z.tile_size_by==j.sizeby.IMAGE_RATIO&&(n+=a(t)),n},this.getTileImageSize=function(e){var t=j.getItemByTile(e);if(!t.thumbWidth||!t.thumbHeight)throw new Error("Can't get image size - image not inited.");return{width:t.thumbWidth,height:t.thumbHeight}},this.getGlobalTileSize=function(){if(z.tile_size_by!=j.sizeby.GLOBAL_RATIO)throw new Error("The size has to be global ratio");return{width:z.tile_width,height:z.tile_height}}}function UGAviaControl(){function e(e){jQuery("body").on("touchstart",function(e){return 0==u.isControlEnabled||void(u.touchEnabled=!0)}),jQuery("body").mousemove(function(e){if(0==u.isControlEnabled)return!0;if(1==u.touchEnabled)return jQuery("body").off("mousemove"),!0;u.isMouseInsideStrip=o.ismouseover();var r=n.isTouchMotionActive();1==u.isMouseInsideStrip&&0==r?function(e){var i=function(e){return 0==l?function(e){var t=s.strip_padding_left,i=s.strip_padding_right,n=o.width()-t-i,r=a.width();if(n>r)return null;var l=o.offset().left,u=e-l-t,d=s.thumb_width,_=n-s.thumb_width;d>u&&(u=d),u>_&&(u=_);var g=(u-d)/(_-d)*(r-n);return g=-1*Math.round(g)+t}(e):function(e){var t=s.strip_padding_top,i=(s.strip_padding_bottom,o.height()),n=a.height();if(i>n)return null;var r=o.offset().top,l=e-r-t;if(0>l)return null;var u=s.thumb_height,d=i-s.thumb_height;u>l&&(l=u),l>d&&(l=d);var _=(l-u)/(d-u)*(n-i);return _=-1*Math.round(_)+t}(e)}(e);null!==i&&(u.is_strip_moving=!0,u.strip_finalPos=i,1!=u.isStripMoving&&(u.isStripMoving=!0,u.handle_timeout=setInterval(t,10)))}(function(e){return 0==l?e.pageX:e.pageY}(e)):i()})}function t(){if(0==u.is_strip_moving)return!1;var e=n.getInnerStripPos();Math.floor(e)==Math.floor(u.strip_finalPos)&&i();var t,r=Math.abs(u.strip_finalPos-e);1>r?t=r:(t=r/4)>0&&1>t&&(t=1),u.strip_finalPos<e&&(t*=-1);var o=e+t;n.positionInnerStrip(o)}function i(){return 0!=u.isStripMoving&&(u.isStripMoving=!1,void(u.handle_timeout=clearInterval(u.handle_timeout)))}var n,r,o,a,s,l,u={touchEnabled:!1,isMouseInsideStrip:!1,strip_finalPos:0,handle_timeout:"",isStripMoving:!1,isControlEnabled:!0};this.enable=function(){u.isControlEnabled=!0},this.disable=function(){u.isControlEnabled=!1},this.init=function(t){n=t,r=t.getObjects(),r.g_gallery,o=r.g_objStrip,a=r.g_objStripInner,s=r.g_options,l=r.isVertical,e()},this.destroy=function(){jQuery("body").off("touchstart"),jQuery("body").off("mousemove")}}function UGSlider(){function e(e,t,i){ie=e,i&&($=i,t=se.convertCustomPrefixOptions(t,$,"slider")),Q=jQuery(e);var n=ie.getObjects();if(W=n.g_objWrapper,n.g_objThumbs,t.hasOwnProperty("slider_progress_indicator_type")&&(de.slider_progress_indicator_type=t.slider_progress_indicator_type),"bar"==de.slider_progress_indicator_type&&(de=jQuery.extend(de,_e)),t&&ee.setOptions(t),function(){var e=ie.getOptions(),t=e.gallery_skin;""==de.slider_bullets_skin&&(de.slider_bullets_skin=t),""==de.slider_arrows_skin&&(de.slider_arrows_skin=t),""==de.slider_zoompanel_skin&&(de.slider_zoompanel_skin=t),""==de.slider_play_button_skin&&(de.slider_play_button_skin=t),""==de.slider_fullscreen_button_skin&&(de.slider_fullscreen_button_skin=t),de.video_enable_closebutton=de.slider_video_enable_closebutton,"zoom"!=e.gallery_mousewheel_role&&(de.slider_zoom_mousewheel=!1)}(),1==de.slider_enable_bullets){oe=new UGBullets;var r={bullets_skin:de.slider_bullets_skin,bullets_space_between:de.slider_bullets_space_between};oe.init(ie,r)}de.slider_enable_text_panel&&(ue=new UGTextPanel).init(ie,de,"slider"),de.slider_enable_zoom_panel&&(J=new UGZoomButtonsPanel).init(ee,de);var o=ie.getGalleryID();ae.init(de,!1,o)}function t(){if(1==ge.isRunOnce)return!1;if(ge.isRunOnce=!0,de.slider_background_color){var e=de.slider_background_color;1!=de.slider_background_opacity&&(e=se.convertHexToRGB(e,de.slider_background_opacity)),B.css("background-color",e)}else 1!=de.slider_background_opacity&&(e=se.convertHexToRGB("#000000",de.slider_background_opacity),B.css("background-color",e));1==de.slider_control_swipe&&(q=new UGTouchSliderControl).init(ee,de),1==de.slider_control_zoom&&(K=new UGZoomSliderControl).init(ee,de),ue&&ue.run(),Q.on(ie.events.ITEM_IMAGE_UPDATED,L),Q.on(ie.events.ITEM_CHANGE,T),oe&&jQuery(oe).on(oe.events.BULLET_CLICK,S),1==de.slider_enable_arrows&&(se.addClassOnHover(Z,"ug-arrow-hover"),se.addClassOnHover(X,"ug-arrow-hover"),ie.setNextButton(Z),ie.setPrevButton(X)),0==de.slider_controls_always_on&&B.hover(C,A),B.on("touchend click",P),te.on(ee.events.CLICK,x),ue&&1==ge.isTextPanelSaparateHover&&B.hover(h,c),ne&&(se.addClassOnHover(ne,"ug-button-hover"),ie.setPlayButton(ne)),re&&(se.addClassOnHover(re,"ug-button-hover"),ie.setFullScreenToggleButton(re)),K&&te.on(ee.events.ZOOM_CHANGE,j),J&&J.initEvents(),ae.initEvents(),jQuery(ae).on(ae.events.SHOW,O),jQuery(ae).on(ae.events.HIDE,z),N(Y),N(U),N(V),te.on(ee.events.AFTER_PUT_IMAGE,H),B.on("mouseenter",".ug-item-wrapper img",function(e){te.trigger(ee.events.IMAGE_MOUSEENTER)}),B.on("mouseleave",".ug-item-wrapper img",function(e){var t=ee.isMouseInsideSlideImage(e);0==t&&te.trigger(ee.events.IMAGE_MOUSELEAVE)})}function i(e,t){var i="ug-type-square";"round"==de.slider_videoplay_button_type&&(i="ug-type-round");var n="";return n+="<div class='ug-slide-wrapper ug-slide"+t+"'>",n+="<div class='ug-item-wrapper'></div>",n+="<div class='ug-slider-preloader "+e+"'></div>",(n+="<div class='ug-button-videoplay "+i+"' style='display:none'></div>")+"</div>"}function n(e){e&&(W=e);var t=function(){var e;switch(de.slider_loader_type){default:case 1:e="ug-loader1";break;case 2:e="ug-loader2";break;case 3:e="ug-loader3";break;case 4:e="ug-loader4";break;case 5:e="ug-loader5";break;case 6:e="ug-loader6";break;case 7:e="ug-loader7";break;case 8:e="ug-loader8";break;case 9:e="ug-loader9"}return"black"==de.slider_loader_color&&(e+=" ug-loader-black"),e}(),n=(ie.getOptions(),"<div class='ug-slider-wrapper'>");(n+="<div class='ug-slider-inner'>",n+=i(t,1),n+=i(t,2),n+=i(t,3),n+="</div>",1==de.slider_enable_arrows&&(n+="<div class='ug-slider-control ug-arrow-left ug-skin-"+de.slider_arrows_skin+"'></div>",n+="<div class='ug-slider-control ug-arrow-right ug-skin-"+de.slider_arrows_skin+"'></div>"),1==de.slider_enable_play_button&&(n+="<div class='ug-slider-control ug-button-play ug-skin-"+de.slider_play_button_skin+"'></div>"),1==de.slider_enable_fullscreen_button&&(n+="<div class='ug-slider-control ug-button-fullscreen ug-skin-"+de.slider_fullscreen_button_skin+"'></div>"),n+="</div>",W.append(n),B=W.children(".ug-slider-wrapper"),F=B.children(".ug-slider-inner"),Y=F.children(".ug-slide1"),U=F.children(".ug-slide2"),V=F.children(".ug-slide3"),Y.data("slidenum",1),U.data("slidenum",2),V.data("slidenum",3),oe&&oe.appendHTML(B),1==de.slider_enable_arrows&&(X=B.children(".ug-arrow-left"),Z=B.children(".ug-arrow-right")),1==de.slider_enable_play_button&&(ne=B.children(".ug-button-play")),1==de.slider_enable_fullscreen_button&&(re=B.children(".ug-button-fullscreen")),1==de.slider_enable_progress_indicator)&&("bar"==(le=se.initProgressIndicator(de.slider_progress_indicator_type,de,B)).getType()&&"pie"==de.slider_progress_indicator_type&&(de.slider_progress_indicator_type="bar",de=jQuery.extend(de,_e)),ie.setProgressIndicator(le));1==de.slider_enable_text_panel&&(ue.appendHTML(B),0==de.slider_textpanel_always_on)&&(ue.getElement().hide().data("isHidden",!0),ge.isTextPanelSaparateHover=!0);1==de.slider_enable_zoom_panel&&J.appendHTML(B),ae.setHtml(F)}function r(e){var t=R(e);se.placeElementInParentCenter(t);var i=G(e);se.placeElementInParentCenter(i)}function o(){if(oe&&(objBullets=oe.getElement(),se.placeElement(objBullets,de.slider_bullets_align_hor,de.slider_bullets_align_vert,de.slider_bullets_offset_hor,de.slider_bullets_offset_vert),se.placeElement(objBullets,de.slider_bullets_align_hor,de.slider_bullets_align_vert,de.slider_bullets_offset_hor,de.slider_bullets_offset_vert)),1==de.slider_enable_arrows&&(se.placeElement(X,de.slider_arrow_left_align_hor,de.slider_arrow_left_align_vert,de.slider_arrow_left_offset_hor,de.slider_arrow_left_offset_vert),se.placeElement(Z,de.slider_arrow_right_align_hor,de.slider_arrow_left_align_vert,de.slider_arrow_right_offset_hor,de.slider_arrow_right_offset_vert)),0==de.slider_controls_always_on&&w(!0),le){var e=le.getElement();if("bar"==de.slider_progress_indicator_type){var t=B.width();le.setSize(t),se.placeElement(e,"left",de.slider_progress_indicator_align_vert,0,de.slider_progress_indicator_offset_vert)}else se.placeElement(e,de.slider_progress_indicator_align_hor,de.slider_progress_indicator_align_vert,de.slider_progress_indicator_offset_hor,de.slider_progress_indicator_offset_vert)}ue&&ue.positionPanel(),function(){if(ne&&se.placeElement(ne,de.slider_play_button_align_hor,de.slider_play_button_align_vert,de.slider_play_button_offset_hor,de.slider_play_button_offset_vert),re&&se.placeElement(re,de.slider_fullscreen_button_align_hor,de.slider_fullscreen_button_align_vert,de.slider_fullscreen_button_offset_hor,de.slider_fullscreen_button_offset_vert),J){var e=J.getElement();se.placeElement(e,de.slider_zoompanel_align_hor,de.slider_zoompanel_align_vert,de.slider_zoompanel_offset_hor,de.slider_zoompanel_offset_vert)}}(),r(Y),r(U),r(V),ie.isMobileMode()?(1==de.slider_fullscreen_button_mobilehide&&re&&re.hide(),1==de.slider_play_button_mobilehide&&ne&&ne.hide(),1==de.slider_zoompanel_mobilehide&&J&&J.getElement().hide()):(1==de.slider_fullscreen_button_mobilehide&&re&&re.show(),1==de.slider_play_button_mobilehide&&ne&&ne.show(),1==de.slider_zoompanel_mobilehide&&J&&J.getElement().show())}function a(){var e,t,i,n,r=ee.getSlidesReference(),o=0;i=ee.isSlideHasItem(r.objNextSlide),(n=ee.isSlideHasItem(r.objPrevSlide))?(o=r.objPrevSlide.outerWidth(),r.objPrevSlide.css("z-index",1)):r.objPrevSlide.hide(),e=t=o+r.objCurrentSlide.outerWidth(),i?(e=t+r.objNextSlide.outerWidth(),r.objPrevSlide.css("z-index",2)):r.objNextSlide.hide(),r.objCurrentSlide.css("z-index",3),se.placeElement(r.objCurrentSlide,o,0),F.css({left:-o+"px",width:e+"px"}),n&&(se.placeElement(r.objPrevSlide,0,0),se.showElement(r.objPrevSlide)),i&&(se.showElement(r.objNextSlide),se.placeElement(r.objNextSlide,t,0))}function s(e){var t=e.data("index");if(void 0===t||null==t)return!1;var i=ie.getItem(t);return!!i&&void g(e,i)}function l(e){e.stop(!0).hide(100)}function u(e,t,i){var n={};if(1==de.slider_image_border){n["border-style"]="solid";var r=function(e,t){if(10>=(a=de.slider_image_border_width))return a;var i=se.getElementSize(e),n=i.width,r=i.height;if(t&&(t.hasOwnProperty("imageWidth")&&(n=t.imageWidth),t.hasOwnProperty("imageHeight")&&(r=t.imageHeight)),0>=n)return a;var o=r>n?n:r;if(2*a/o<de.slider_image_border_maxratio)return a;var a=o*de.slider_image_border_maxratio/2;return Math.round(a)}(e,i);n["border-width"]=r+"px",n["border-color"]=de.slider_image_border_color,n["border-radius"]=de.slider_image_border_radius}"image"!=t&&1==de.slider_video_constantsize&&(n["background-color"]="#000000"),1==de.slider_image_shadow&&(n["box-shadow"]="3px 3px 10px 0px #353535"),e.css(n)}function d(e,t){var i=de.slider_video_constantsize_width,n=de.slider_video_constantsize_height,r=de.slider_video_constantsize_scalemode;return se.scaleImageExactSizeInParent(e,t.imageWidth,t.imageHeight,i,n,r)}function _(e,t,i){var n=e.children(".ug-item-wrapper"),r=R(e);if(void 0===t.urlImage||""==t.urlImage)throw new Error("The slide don't have big image defined ( data-image='imageurl' ). Please check gallery items.","showbig");var o=t.urlImage,a=e.data("urlImage");e.data("urlImage",o);var s=ee.getScaleMode(e),_=ee.getSlideType(e);if(objPadding=ee.getObjImagePadding(),a==o&&!0!==i){var g=n.children("img");(0==t.imageWidth||0==t.imageHeight)&&ie.checkFillImageSize(g,t);var c={};u(g,_,c="image"!=_&&1==de.slider_video_constantsize?d(g,t):se.scaleImageFitParent(g,t.imageWidth,t.imageHeight,s,objPadding)),te.trigger(ee.events.AFTER_PUT_IMAGE,e)}else if(g=se.placeImageInsideParent(o,n,t.imageWidth,t.imageHeight,s,objPadding),1==t.isBigImageLoaded){if(g.fadeTo(0,1),l(r),"image"!=_&&1==de.slider_video_constantsize)c=d(g,t);else c=se.getImageInsideParentData(n,t.imageWidth,t.imageHeight,s,objPadding);g.css("width",c.imageWidth+"px"),u(g,_,c),te.trigger(ee.events.AFTER_PUT_IMAGE,e)}else g.fadeTo(0,0),function(e){e.stop(!0).show(100)}(r),e.data("isLoading",!0),ee.isSlideCurrent(e)&&te.trigger(ee.events.CURRENTSLIDE_LOAD_START),g.data("itemIndex",t.index),g.on("load",function(){var e=jQuery(this),t=e.data("itemIndex");e.fadeTo(0,1);var i=e.parent().parent(),n=ee.getSlideType(i),r=R(i),o=ee.getObjImagePadding(),a=ee.getScaleMode(i);l(r),i.data("isLoading",!1),ee.isSlideCurrent(i)&&te.trigger(ee.events.CURRENTSLIDE_LOAD_END),ie.onItemBigImageLoaded(null,e);var s=ie.getItem(t),_={};"image"!=n&&1==de.slider_video_constantsize?d(e,s):_=se.scaleImageFitParent(e,s.imageWidth,s.imageHeight,a,o),e.fadeTo(0,1),u(e,n,_),te.trigger(ee.events.AFTER_PUT_IMAGE,i)})}function g(e,t){try{var i=e.children(".ug-item-wrapper");if(null==t)return i.html(""),e.removeData("index"),e.removeData("type"),e.removeData("urlImage"),!1;e.data("index"),e.data("index",t.index),e.data("type",t.type),1==de.slider_enable_links&&"image"==t.type&&(t.link?e.addClass("ug-slide-clickable"):e.removeClass("ug-slide-clickable")),_(e,t);var n=G(e);switch(t.type){case"image":n.hide();break;default:n.show()}}catch(e){throw void 0!==e.fileName&&"showbig"==e.fileName&&ie.showErrorMessageReplaceGallery(e.message),i.html(""),new Error(e)}}function c(){if(!ue)return!1;if(1==p())return!1;var e=ue.getElement(),t=0;(1==ge.isTextPanelSaparateHover||1==de.slider_textpanel_always_on)&&(t=de.slider_controls_appear_duration),e.stop().fadeTo(t,0),e.data("isHidden",!0)}function h(){if(!ue)return!1;if(0==p())return!1;var e=ue.getElement(),t=0;(1==ge.isTextPanelSaparateHover||1==de.slider_textpanel_always_on)&&(e.show(),ue.positionElements(),t=de.slider_controls_appear_duration),e.stop().show().fadeTo(t,1),e.data("isHidden",!1)}function p(){return!1!==ue.getElement().data("isHidden")}function m(){var e=ee.getCurrentSlide(),t=ee.getSlideImage(e),i=se.getElementSize(e),n=i.left,r=i.top;if(1==de.slider_video_constantsize){var o=se.getElementSize(t);n+=o.left,r+=o.top}else n+=de.slider_video_padding_left,r+=de.slider_video_padding_top;ae.setPosition(n,r)}function f(){var e=de.slider_video_constantsize_width,t=de.slider_video_constantsize_height;ae.setSize(e,t),u(ae.getObject(),"video")}function v(e,t,i){te.trigger(ee.events.TRANSITION_START);var n=de.slider_transition;switch(i&&(n=i),ee.stopSlideAction(null,!0),n){default:case"fade":y(t);break;case"slide":!function e(t,i){var n=ee.isAnimating();if(1==n)return ge.itemWaiting=i,!0;null!=ge.itemWaiting&&(ge.itemWaiting=null);var r=ee.getSlidesReference();switch(t){case"right":g(r.objPrevSlide,i),a();var o=se.getElementSize(r.objPrevSlide),s=-o.left;ee.switchSlideNums("right");break;case"left":g(r.objNextSlide,i),a();var l=se.getElementSize(r.objNextSlide),s=-l.left;ee.switchSlideNums("left");break;default:throw new Error("wrong direction: "+t)}var u=de.slider_transition_speed,d=de.slider_transition_easing,_={duration:u,easing:d,queue:!1,always:function(){if(ee.stopSlideAction(),ae.hide(),null!=ge.itemWaiting){var t=function(e){var t=ee.getSlidesReference().objCurrentSlide.data("index"),i=e.index,n="left";return t>i&&(n="right"),n}(ge.itemWaiting);e(t,ge.itemWaiting)}else ee.placeNabourItems(),te.trigger(ee.events.TRANSITION_END)}};F.animate({left:s+"px"},_)}(e,t);break;case"lightbox_open":y(t,!1,!0)}}function b(e,t,i){i?e.fadeTo(de.slider_transition_speed,t,i):e.fadeTo(de.slider_transition_speed,t)}function y(e,t,i){if(!t)t=!1;var n=ee.getSlidesReference();g(n.objNextSlide,e);var r=se.getElementSize(n.objCurrentSlide);se.placeElement(n.objNextSlide,r.left,r.top);var o=ge.numCurrent;if(ge.numCurrent=ge.numNext,ge.numNext=o,te.trigger(ee.events.ITEM_CHANGED),n.objNextSlide.stop(!0),n.objCurrentSlide.stop(!0),1==t)n.objCurrentSlide.fadeTo(0,0),n.objNextSlide.fadeTo(0,1),ee.placeNabourItems(),te.trigger(ee.events.TRANSITION_END),!0!==i&&ae.hide();else{if(n.objNextSlide.fadeTo(0,0),b(n.objCurrentSlide,0,function(){ee.placeNabourItems(),te.trigger(ee.events.TRANSITION_END),!0!==i&&ae.hide()}),1==ae.isVisible())b(ae.getObject(),0);b(n.objNextSlide,1)}}function I(){return B.children(".ug-slider-control")}function w(e){if(0==se.isTimePassed("sliderControlsToggle"))return!1;if(0==ge.isControlsVisible)return!1;if(!e)e=!1;var t=I();!0===e?t.stop().fadeTo(0,0).hide():t.stop().fadeTo(de.slider_controls_appear_duration,0,function(){t.hide()}),ge.isControlsVisible=!1}function E(e){if(0==se.isTimePassed("sliderControlsToggle"))return!1;if(1==ge.isControlsVisible)return!0;if(!e)e=!1;var t=I();!0===e?t.stop().show():(t.stop().show().fadeTo(0,0),t.fadeTo(de.slider_controls_appear_duration,1)),ge.isControlsVisible=!0}function T(e,t,i){var n=ie.getSelectedItem();ee.setItem(n,!1,i);var r=n.index;oe&&oe.setActive(r),ue&&0==ge.isTextPanelSaparateHover&&h(),function(e){if(e==ge.currentControlsMode)return!1;switch(e){case"image":J&&J.getElement().show();break;case"video":J&&J.getElement().hide();break;default:throw new Error("wrong controld mode: "+e)}ge.currentControlsMode=e}("image"==n.type?"image":"video")}function S(e,t){ie.selectItem(t)}function P(e){return!(!q||0!=q.isTapEventOccured(e))||void te.trigger(ee.events.CLICK,e)}function x(){var e=ee.getCurrentSlide().hasClass("ug-slide-clickable"),t=ee.getCurrentItem();return e?(0==de.slider_links_newpage?location.href=t.link:window.open(t.link,"_blank"),!0):void(0==de.slider_controls_always_on&&1==de.slider_controls_appear_ontap&&1==ee.isCurrentSlideType("image")&&(0==ge.isControlsVisible?E():w(),ue&&1==de.slider_textpanel_always_on&&ee.isCurrentSlideType("image")&&ee.isCurrentSlideImageFit()&&h()))}function j(e){ue&&ee.isCurrentSlideType("image")&&0==ee.isCurrentSlideImageFit()&&c()}function C(){E()}function A(){w()}function M(e){var t=e.parent();ee.startSlideAction(t)}function O(){ie.isPlayMode()&&ie.pausePlaying(),te.trigger(ee.events.ACTION_START)}function z(){ie.isPlayMode()&&ie.continuePlaying(),te.trigger(ee.events.ACTION_END)}function L(e,t,i){Y.data("index")==t&&(objItem=ie.getItem(t),_(Y,objItem,!0)),U.data("index")==t&&(objItem=ie.getItem(t),_(U,objItem,!0)),V.data("index")==t&&(objItem=ie.getItem(t),_(V,objItem,!0))}function H(e,t){t=jQuery(t);var i=ee.getSlideImage(t),n=G(t),r=se.getElementSize(i);se.placeElement(n,"center","middle",r.left,r.top,i)}function N(e){var t=G(e);se.addClassOnHover(t),se.setButtonOnClick(t,M)}function k(e){switch(e){case 1:return Y;case 2:return U;case 3:return V;default:throw new Error("wrong num: "+e)}}function R(e){if(!e)e=ee.getCurrentSlide();return e.children(".ug-slider-preloader")}function G(e){return e.children(".ug-button-videoplay")}function D(e){if(!e)e=ee.getCurrentSlide();var t=e.data("index");return null==t?null:ie.getItem(t)}var Q,W,B,F,Y,U,V,X,Z,q,K,J,$,ee=this,te=jQuery(ee),ie=new UniteGalleryMain,ne=null,re=null,oe=null,ae=new UGVideoPlayer,se=new UGFunctions,le=null,ue=null;this.events={ITEM_CHANGED:"item_changed",BEFORE_SWITCH_SLIDES:"before_switch",BEFORE_RETURN:"before_return",AFTER_RETURN:"after_return",ZOOM_START:"slider_zoom_start",ZOOM_END:"slider_zoom_end",ZOOMING:"slider_zooming",ZOOM_CHANGE:"slider_zoom_change",START_DRAG:"start_drag",AFTER_DRAG_CHANGE:"after_drag_change",ACTION_START:"action_start",ACTION_END:"action_end",CLICK:"slider_click",TRANSITION_START:"slider_transition_start",TRANSITION_END:"slider_transition_end",AFTER_PUT_IMAGE:"after_put_image",IMAGE_MOUSEENTER:"slider_image_mouseenter",IMAGE_MOUSELEAVE:"slider_image_mouseleave",CURRENTSLIDE_LOAD_START:"slider_current_loadstart",CURRENTSLIDE_LOAD_END:"slider_current_loadend"};var de={slider_scale_mode:"fill",slider_scale_mode_media:"fill",slider_scale_mode_fullscreen:"down",slider_item_padding_top:0,slider_item_padding_bottom:0,slider_item_padding_left:0,slider_item_padding_right:0,slider_background_color:"",slider_background_opacity:1,slider_image_padding_top:0,slider_image_padding_bottom:0,slider_image_padding_left:0,slider_image_padding_right:0,slider_image_border:!1,slider_image_border_width:10,slider_image_border_color:"#ffffff",slider_image_border_radius:0,slider_image_border_maxratio:.35,slider_image_shadow:!1,slider_video_constantsize:!1,slider_video_constantsize_scalemode:"fit",slider_video_constantsize_width:854,slider_video_constantsize_height:480,slider_video_padding_top:0,slider_video_padding_bottom:0,slider_video_padding_left:0,slider_video_padding_right:0,slider_video_enable_closebutton:!0,slider_transition:"slide",slider_transition_speed:300,slider_transition_easing:"easeInOutQuad",slider_control_swipe:!0,slider_control_zoom:!0,slider_zoom_mousewheel:!0,slider_vertical_scroll_ondrag:!1,slider_loader_type:1,slider_loader_color:"white",slider_enable_links:!0,slider_links_newpage:!1,slider_enable_bullets:!1,slider_bullets_skin:"",slider_bullets_space_between:-1,slider_bullets_align_hor:"center",slider_bullets_align_vert:"bottom",slider_bullets_offset_hor:0,slider_bullets_offset_vert:10,slider_enable_arrows:!0,slider_arrows_skin:"",slider_arrow_left_align_hor:"left",slider_arrow_left_align_vert:"middle",slider_arrow_left_offset_hor:20,slider_arrow_left_offset_vert:0,slider_arrow_right_align_hor:"right",slider_arrow_right_align_vert:"middle",slider_arrow_right_offset_hor:20,slider_arrow_right_offset_vert:0,slider_enable_progress_indicator:!0,slider_progress_indicator_type:"pie",slider_progress_indicator_align_hor:"right",slider_progress_indicator_align_vert:"top",slider_progress_indicator_offset_hor:10,slider_progress_indicator_offset_vert:10,slider_enable_play_button:!0,slider_play_button_skin:"",slider_play_button_align_hor:"left",slider_play_button_align_vert:"top",slider_play_button_offset_hor:40,slider_play_button_offset_vert:8,slider_play_button_mobilehide:!1,slider_enable_fullscreen_button:!0,slider_fullscreen_button_skin:"",slider_fullscreen_button_align_hor:"left",slider_fullscreen_button_align_vert:"top",slider_fullscreen_button_offset_hor:11,slider_fullscreen_button_offset_vert:9,slider_fullscreen_button_mobilehide:!1,slider_enable_zoom_panel:!0,slider_zoompanel_skin:"",slider_zoompanel_align_hor:"left",slider_zoompanel_align_vert:"top",slider_zoompanel_offset_hor:12,slider_zoompanel_offset_vert:92,slider_zoompanel_mobilehide:!1,slider_controls_always_on:!1,slider_controls_appear_ontap:!0,slider_controls_appear_duration:300,slider_enable_text_panel:!0,slider_textpanel_always_on:!0,slider_videoplay_button_type:"square"},_e={slider_progress_indicator_align_hor:"left",slider_progress_indicator_align_vert:"bottom",slider_progress_indicator_offset_hor:0,slider_progress_indicator_offset_vert:0},ge={isRunOnce:!1,isTextPanelSaparateHover:!1,numPrev:1,numCurrent:2,numNext:3,isControlsVisible:!0,currentControlsMode:"image"};this.switchSlideNums=function(e){switch(te.trigger(ee.events.BEFORE_SWITCH_SLIDES),e){case"left":var t=ge.numCurrent;ge.numCurrent=ge.numNext,ge.numNext=ge.numPrev,ge.numPrev=t;break;case"right":t=ge.numCurrent;ge.numCurrent=ge.numPrev,ge.numPrev=ge.numNext,ge.numNext=t;break;default:throw new Error("wrong direction: "+e)}te.trigger(ee.events.ITEM_CHANGED)},this.destroy=function(){te.off(ee.events.AFTER_PUT_IMAGE),Q.off(ie.events.ITEM_IMAGE_UPDATED),Q.off(ie.events.ITEM_CHANGE),oe&&jQuery(oe).on(oe.events.BULLET_CLICK),B.off("mouseenter"),B.off("mouseleave"),B.off("touchend"),B.off("click"),te.off(ee.events.CLICK),K&&te.off(ee.events.ZOOM_CHANGE),te.off(ee.events.BEFORE_SWITCH_SLIDES),jQuery(ae).off(ae.events.SHOW),jQuery(ae).off(ae.events.HIDE),ae.destroy(),B.off("mouseenter",".ug-item-wrapper img"),B.off("mouseleave",".ug-item-wrapper img")},this.________EXTERNAL_GENERAL___________=function(){},this.init=function(t,i,n){e(t,i,n)},this.getSlideImage=function(e){if(!e)e=ee.getCurrentSlide();return e.find(".ug-item-wrapper img")},this.setHtml=function(e){n(e)},this.run=function(){t()},this.isInnerInPlace=function(){var e=ee.getSlidesReference();return-se.getElementSize(e.objCurrentSlide).left==se.getElementSize(F).left},this.isAnimating=function(){return F.is(":animated")},this.isSlideCurrent=function(e){var t=e.data("slidenum");return ge.numCurrent==t},this.isSlideHasItem=function(e){var t=e.data("index");return null!=t},this.getObjImagePadding=function(){return{padding_top:de.slider_image_padding_top,padding_bottom:de.slider_image_padding_bottom,padding_left:de.slider_image_padding_left,padding_right:de.slider_image_padding_right}},this.getSlidesReference=function(){return{objPrevSlide:k(ge.numPrev),objNextSlide:k(ge.numNext),objCurrentSlide:k(ge.numCurrent)}},this.getCurrentSlide=function(){return ee.getSlidesReference().objCurrentSlide},this.getCurrentItemIndex=function(){var e=ee.getSlidesReference().objCurrentSlide.data("index");return null==e&&(e=-1),e},this.getCurrentItem=function(){var e=ee.getCurrentItemIndex();return-1==e?null:ie.getItem(e)},this.getSlideType=function(e){return null==e&&(e=ee.getCurrentSlide()),e.data("type")},this.isMouseInsideSlideImage=function(e){var t=ee.getSlideImage(),i=se.getMousePosition(e);void 0===i.pageX&&(i=q.getLastMousePos());var n=se.getMouseElementPoint(i,t),r=se.getElementSize(t);return isMouseInside=se.isPointInsideElement(n,r),isMouseInside},this.isCurrentSlideType=function(e){return ee.getSlideType()==e},this.isCurrentSlideLoadingImage=function(){return!0===ee.getCurrentSlide().data("isLoading")},this.setItem=function(e,t,i){var n=ee.getSlidesReference(),r=n.objCurrentSlide.data("index"),o=e.index;if(o==r)return!0;if(null==r)g(n.objCurrentSlide,e),ee.placeNabourItems();else{var a="left";ie.getNumItems(),"next"==i?a="left":"prev"==i||r>o?a="right":r>o&&(a="right"),v(a,e,t)}},this.placeNabourItems=function(){var e=ee.getSlidesReference(),t=e.objCurrentSlide.data("index"),i=ie.getPrevItem(t),n=ie.getNextItem(t);g(e.objNextSlide,n),g(e.objPrevSlide,i),a()},this.________EXTERNAL_API___________=function(){},this.stopSlideAction=function(e,t){e||(e=ee.getCurrentSlide()),!0===t?ae.pause():ae.hide()},this.startSlideAction=function(e){e||(e=ee.getCurrentSlide());var t=D(e);if("image"==t.type)return!0;switch(1==de.slider_video_constantsize&&f(),m(),ae.show(),t.type){case"youtube":ae.playYoutube(t.videoid);break;case"vimeo":ae.playVimeo(t.videoid);break;case"html5video":ae.playHtml5Video(t.videoogv,t.videowebm,t.videomp4,t.urlImage);break;case"soundcloud":ae.playSoundCloud(t.trackid);break;case"wistia":ae.playWistia(t.videoid)}},this.getScaleMode=function(e){if(!e)e=ee.getCurrentSlide();return"image"!=ee.getSlideType(e)?de.slider_scale_mode_media:de.slider_scale_mode==de.slider_scale_mode_fullscreen?de.slider_scale_mode:1==ie.isFullScreen()?de.slider_scale_mode_fullscreen:de.slider_scale_mode},this.getObjects=function(){return{g_objSlider:B,g_objInner:F,g_options:de,g_objZoomSlider:K}},this.getObjZoom=function(){return K},this.getOptions=function(){return de},this.getElement=function(){return B},this.getVideoObject=function(){return ae},this.isCurrentSlideImageFit=function(){var e=ee.getCurrentSlide();ee.getSlideType(e),function(e,t){null==t&&(t=ee.getCurrentSlide());var i=ee.getSlideType(t);if(i!=e)throw new Error("Wrong slide type: "+i+", should be: "+e)}("image",e);var t=ee.getSlideImage(e);return 0!=t.length&&se.isImageFitParent(t)},this.isCurrentImageInPlace=function(){var e=ee.getSlideImage();if(0==e.length)return!1;var t=ee.getScaleMode(),i=ee.getObjImagePadding(),n=D(),r=e.parent(),o=se.getImageInsideParentData(r,n.imageWidth,n.imageHeight,t,i),a=se.getElementSize(e),s=!1;return o.imageWidth==a.width&&(s=!0),s},this.isSlideActionActive=function(){return ae.isVisible()},this.isSwiping=function(){return!!q&&q.isTouchActive()},this.isPreloading=function(){return!!R().is(":visible")},this.setOptions=function(e){$&&(e=se.convertCustomPrefixOptions(e,$,"slider")),de=jQuery.extend(de,e)},this.setSize=function(e,t){if(0>e||0>t)return!0;var i={};i.width=e+"px",i.height=t+"px",B.css(i);var n={};n.height=t+"px",n.top="0px",n.left="0px",F.css(n);var r={};r.height=t+"px",r.width=e+"px",Y.css(r),U.css(r),V.css(r);var l=e-de.slider_item_padding_left-de.slider_item_padding_right,u=t-de.slider_item_padding_top-de.slider_item_padding_bottom,d={};if(d.width=l+"px",d.height=u+"px",d.top=de.slider_item_padding_top+"px",d.left=de.slider_item_padding_left+"px",B.find(".ug-item-wrapper").css(d),ue&&ue.setSizeByParent(),o(),s(Y),s(U),s(V),a(),"image"!=ee.getSlideType()&&1==de.slider_video_constantsize)f();else{var _=e-de.slider_video_padding_left-de.slider_video_padding_right,g=t-de.slider_video_padding_top-de.slider_video_padding_bottom;ae.setSize(_,g)}m()},this.refreshSlideItems=function(){return 1==ee.isAnimating()||(s(Y),s(U),s(V),void a())},this.isMouseOver=function(){return B.ismouseover()},this.setPosition=function(e,t){se.placeElement(B,e,t)},this.zoomIn=function(){return!K||void K.zoomIn()},this.zoomOut=function(){return!K||void K.zoomOut()},this.zoomBack=function(){return!K||void K.zoomBack()}}function UGTextPanel(){function e(e,t){if(!t)t=f.textpanel_padding_top;var i=t;if(u){var n=i;if(p.placeElement(u,0,n),1==u.is(":visible")){(i=p.getElementSize(u).bottom)>0&&(v.lastTitleBottom=i)}else{i=20;v.lastTitleBottom>0&&(i=v.lastTitleBottom)}}var o="";if(d&&(o=jQuery.trim(d.text())),""!=o){var a=i;if(u&&(a+=f.textpanel_padding_title_description),p.placeElement(d,0,a),1==jQuery(d).is(":visible")){var s=p.getElementSize(d);i=s.bottom,s.height>0&&(v.lastDescHeight=s.height)}else{var l=16;v.lastDescHeight>0&&(l=v.lastDescHeight),i=a+l}}f.textpanel_height||1!=v.setInternalHeight||r(i+f.textpanel_padding_bottom,e)}function t(){var e=0;if(u&&(e+=u.outerHeight()),d){var t="";d&&(t=jQuery.trim(d.text())),""!=t&&(u&&(e+=f.textpanel_padding_title_description),e+=d.outerHeight())}return e}function i(){var i=t();e(!1,(g.height()-i)/2)}function n(){var i=t();e(!1,g.height()-i-f.textpanel_padding_bottom)}function r(e,t){if(!t)t=!1;if(1==t){if(_)e>_.height()&&_.height(e);var i={height:e+"px"};s.add(g).animate(i,f.textpanel_fade_duration)}else _&&_.height(e),s.add(g).height(e)}function o(){if(1==f.textpanel_enable_bg){(_=s.children(".ug-textpanel-bg")).fadeTo(0,f.textpanel_bg_opacity);var e={"background-color":f.textpanel_bg_color};e=jQuery.extend(e,f.textpanel_bg_css),_.css(e)}if(1==f.textpanel_enable_title){u=g.children(".ug-textpanel-title");var t={};null!==f.textpanel_title_color&&(t.color=f.textpanel_title_color),null!==f.textpanel_title_font_family&&(t["font-family"]=f.textpanel_title_font_family),null!==f.textpanel_title_text_align&&(t["text-align"]=f.textpanel_title_text_align),null!==f.textpanel_title_font_size&&(t["font-size"]=f.textpanel_title_font_size+"px"),null!==f.textpanel_title_bold&&(!0===f.textpanel_title_bold?t["font-weight"]="bold":t["font-weight"]="normal"),f.textpanel_css_title&&(t=jQuery.extend(t,f.textpanel_css_title)),u.css(t)}if(1==f.textpanel_enable_description){d=g.children(".ug-textpanel-description");var i={};null!==f.textpanel_desc_color&&(i.color=f.textpanel_desc_color),null!==f.textpanel_desc_font_family&&(i["font-family"]=f.textpanel_desc_font_family),null!==f.textpanel_desc_text_align&&(i["text-align"]=f.textpanel_desc_text_align),null!==f.textpanel_desc_font_size&&(i["font-size"]=f.textpanel_desc_font_size+"px"),null!==f.textpanel_desc_bold&&(!0===f.textpanel_desc_bold?i["font-weight"]="bold":i["font-weight"]="normal"),f.textpanel_css_title&&(i=jQuery.extend(i,f.textpanel_css_description)),d.css(i)}}function a(){var e=c.getSelectedItem();h.setText(e.title,e.description)}var s,l,u,d,_,g,c,h=this,p=new UGFunctions,m="",f={textpanel_align:"bottom",textpanel_margin:0,textpanel_text_valign:"middle",textpanel_padding_top:10,textpanel_padding_bottom:10,textpanel_height:null,textpanel_padding_title_description:5,textpanel_padding_right:11,textpanel_padding_left:11,textpanel_fade_duration:200,textpanel_enable_title:!0,textpanel_enable_description:!0,textpanel_enable_bg:!0,textpanel_bg_color:"#000000",textpanel_bg_opacity:.4,textpanel_title_color:null,textpanel_title_font_family:null,textpanel_title_text_align:null,textpanel_title_font_size:null,textpanel_title_bold:null,textpanel_css_title:{},textpanel_desc_color:null,textpanel_desc_font_family:null,textpanel_desc_text_align:null,textpanel_desc_font_size:null,textpanel_desc_bold:null,textpanel_css_description:{},textpanel_desc_style_as_title:!1,textpanel_bg_css:{}},v={isFirstTime:!0,setInternalHeight:!0,lastTitleBottom:0,lastDescHeight:0};this.positionElements=function(t){if(!f.textpanel_height||"top"==f.textpanel_text_valign)return e(t),!1;switch(f.textpanel_text_valign){default:case"top":e(!1);break;case"bottom":n();break;case"center":case"middle":i()}},this.init=function(e,t,i){if(c=e,i&&(m=i,t=p.convertCustomPrefixOptions(t,m,"textpanel")),t&&(f=jQuery.extend(f,t)),0==f.textpanel_enable_title&&0==f.textpanel_enable_description)throw new Error("Textpanel Error: The title or description must be enabled");f.textpanel_height&&f.textpanel_height<0&&(f.textpanel_height=null),1==f.textpanel_desc_style_as_title&&(f.textpanel_desc_color||(f.textpanel_desc_color=f.textpanel_title_color),f.textpanel_desc_bold||(f.textpanel_desc_bold=f.textpanel_title_bold),f.textpanel_desc_font_family||(f.textpanel_desc_font_family=f.textpanel_title_font_family),f.textpanel_desc_font_size||(f.textpanel_desc_font_size=f.textpanel_title_font_size),f.textpanel_desc_text_align||(f.textpanel_desc_text_align=f.textpanel_title_text_align))},this.appendHTML=function(e,t){l=e;var i="<div class='ug-textpanel"+(t=t?" "+t:"")+"'>";1==f.textpanel_enable_bg&&(i+="<div class='ug-textpanel-bg"+t+"'></div>"),i+="<div class='ug-textpanel-textwrapper"+t+"'>",1==f.textpanel_enable_title&&(i+="<div class='ug-textpanel-title"+t+"'></div>"),1==f.textpanel_enable_description&&(i+="<div class='ug-textpanel-description"+t+"'></div>"),i+="</div></div>",e.append(i),s=e.children(".ug-textpanel"),g=s.children(".ug-textpanel-textwrapper"),o()},this.destroy=function(){jQuery(c).off(c.events.ITEM_CHANGE)},this.run=function(){h.setSizeByParent(),jQuery(c).on(c.events.ITEM_CHANGE,a)},this.setPanelSize=function(e,t){if(v.setInternalHeight=!0,t)v.setInternalHeight=!1;else t=80;f.textpanel_height&&(t=f.textpanel_height),s.width(e),s.height(t),_&&(_.width(e),_.height(t));var i=e-f.textpanel_padding_left-f.textpanel_padding_right,n=f.textpanel_padding_left;p.setElementSizeAndPosition(g,n,0,i,t),u&&u.width(i),d&&d.width(i),0==v.isFirstTime&&h.positionElements(!1)},this.setSizeByParent=function(){var e=p.getElementSize(l);h.setPanelSize(e.width)},this.setTextPlain=function(e,t){u&&u.html(e),d&&d.html(t)},this.setText=function(e,t){1==v.isFirstTime?(h.setTextPlain(e,t),v.isFirstTime=!1,h.positionElements(!1)):g.stop().fadeTo(f.textpanel_fade_duration,0,function(){h.setTextPlain(e,t),h.positionElements(!0),jQuery(this).fadeTo(f.textpanel_fade_duration,1)})},this.positionPanel=function(e,t){var i={};if(null!=e)i.top=e,i.bottom="auto";else switch(f.textpanel_align){case"top":i.top=f.textpanel_margin+"px";break;case"bottom":i.top="auto",i.bottom=f.textpanel_margin+"px";break;case"middle":i.top=p.getElementRelativePos(s,"middle",f.textpanel_margin)}null!=t&&(i.left=t),s.css(i)},this.setOptions=function(e){m&&(e=p.convertCustomPrefixOptions(e,m,"textpanel")),f=jQuery.extend(f,e)},this.getElement=function(){return s},this.getSize=function(){return p.getElementSize(s)},this.refresh=function(e,t,i,n){o(),i?h.setPanelSize(i,n):h.setSizeByParent(),h.positionElements(!1),!0!==t&&h.positionPanel(),!0===e&&h.show()},this.hide=function(){s.hide()},this.show=function(){s.show()},this.getOptions=function(){return f},this.getOption=function(e){return 0==f.hasOwnProperty(e)?null:f[e]}}function UGZoomButtonsPanel(){function e(e){return!e||!!e.hasClass("ug-zoompanel-button-disabled")}function t(e){e&&e.addClass("ug-zoompanel-button-disabled")}function i(e){e&&e.removeClass("ug-zoompanel-button-disabled")}function n(){if(0==l.isCurrentSlideType("image"))return!0;1==l.isCurrentSlideImageFit()?0==e(a)&&(t(a),t(s)):1==e(a)&&(i(a),i(s))}var r,o,a,s,l=new UGSlider,u=new UGFunctions,d={slider_zoompanel_skin:""};this.init=function(e,t){l=e,t&&(d=jQuery.extend(d,t))},this.appendHTML=function(e){e;var t="<div class='ug-slider-control ug-zoompanel ug-skin-"+d.slider_zoompanel_skin+"'>";t+="<div class='ug-zoompanel-button ug-zoompanel-plus'></div>",t+="<div class='ug-zoompanel-button ug-zoompanel-minus ug-zoompanel-button-disabled'></div>",t+="<div class='ug-zoompanel-button ug-zoompanel-return ug-zoompanel-button-disabled'></div>",t+="</div>",e.append(t),r=e.children(".ug-zoompanel"),o=r.children(".ug-zoompanel-plus"),a=r.children(".ug-zoompanel-minus"),s=r.children(".ug-zoompanel-return")},this.setObjects=function(e,t,i){o=e,s=i,(a=t)&&a.addClass("ug-zoompanel-button-disabled"),s&&s.addClass("ug-zoompanel-button-disabled")},this.getElement=function(){return r},this.initEvents=function(){u.addClassOnHover(o,"ug-button-hover"),u.addClassOnHover(a,"ug-button-hover"),u.addClassOnHover(s,"ug-button-hover"),u.setButtonOnClick(o,function(){return 1==e(o)||void l.zoomIn()}),u.setButtonOnClick(a,function(){return 1==e(a)||void l.zoomOut()}),u.setButtonOnClick(s,function(){return 1==e(s)||void l.zoomBack()}),jQuery(l).on(l.events.ZOOM_CHANGE,n),jQuery(l).on(l.events.ITEM_CHANGED,n)}}function UGBullets(){function e(){var e="",t="";-1!=g.bullets_space_between&&(t=" style='margin-left:"+g.bullets_space_between+"px'");for(var i=0;l>i;i++)e+=0==i?"<div class='ug-bullet'></div>":"<div class='ug-bullet'"+t+"></div>";if(o.html(e),!a){var n=o.find(".ug-bullet:first-child");n.length&&(a=n.width())}}function t(e){if(1==s.isActive(e))return!0;var t=e.index();jQuery(s).trigger(s.events.BULLET_CLICK,t)}function i(){var e=o.children(".ug-bullet");d.setButtonOnClick(e,t),e.on("mousedown mouseup",function(e){return!1})}function n(e){if(0>e||e>=l)throw new Error("wrong bullet index: "+e)}function r(){if(1==_.isInited)return!0;throw new Error("The bullets are not inited!")}var o,a,s=this,l=0,u=new UniteGalleryMain,d=new UGFunctions,_={isInited:!1},g={bullets_skin:"",bullets_addclass:"",bullets_space_between:-1};this.events={BULLET_CLICK:"bullet_click"},this.init=function(e,t,i){u=e,l=i||u.getNumItems(),_.isInited=!0,""==(g=jQuery.extend(g,t)).bullets_skin&&(g.bullets_skin=g.gallery_skin)},this.getBulletsWidth=function(){return 0==l?0:a?l*a+(l-1)*g.bullets_space_between:0},this.appendHTML=function(t){t,r();var n="";""!=g.bullets_addclass&&(n=" "+g.bullets_addclass);var a="<div class='ug-slider-control ug-bullets ug-skin-"+g.bullets_skin+n+"'>";o=jQuery(a+="</div>"),t.append(o),e(),i()},this.updateNumBullets=function(t){l=t,e(),i()},this.getElement=function(){return o},this.setActive=function(e){r(),n(e);var t=o.children(".ug-bullet");t.removeClass("ug-bullet-active"),jQuery(t[e]).addClass("ug-bullet-active"),e},this.isActive=function(e){if(n(e),"number"!=typeof e)var t=e;else t=o.children(".ug-bullet")[e];return!!t.hasClass("ug-bullet-active")},this.getNumBullets=function(){return l}}function UGProgressBar(){var e,t,i=this,n=0,r=new UGFunctions,o={slider_progressbar_color:"#ffffff",slider_progressbar_opacity:.6,slider_progressbar_line_width:5};this.put=function(i,n){n&&(o=jQuery.extend(o,n)),i.append("<div class='ug-progress-bar'><div class='ug-progress-bar-inner'></div></div>"),e=i.children(".ug-progress-bar"),(t=e.children(".ug-progress-bar-inner")).css("background-color",o.slider_progressbar_color),e.height(o.slider_progressbar_line_width),t.height(o.slider_progressbar_line_width),t.width("0%");var r=o.slider_progressbar_opacity,a=t[0];a.style.opacity=r,a.style.filter="alpha(opacity="+100*r+")"},this.putHidden=function(t,n){i.put(t,n),e.hide()},this.getElement=function(){return e},this.setSize=function(n){e.width(n),t.width(n),i.draw()},this.setPosition=function(t,i,n,o){r.placeElement(e,t,i,n,o)},this.draw=function(){var e=100*n;t.width(e+"%")},this.setProgress=function(e){n=r.normalizePercent(e),i.draw()},this.getType=function(){return"bar"}}function UGProgressPie(){function e(e){if(!e)e=0;var i=Math.min(o.slider_progresspie_width,o.slider_progresspie_height)/2,r=t[0].getContext("2d");0==n&&(n=!0,r.rotate(1.5*Math.PI),r.translate(-2*i,0)),r.clearRect(0,0,o.slider_progresspie_width,o.slider_progresspie_height);var a=o.slider_progresspie_width/2,s=o.slider_progresspie_height/2,l=0,u=e*Math.PI*2;if(1==o.slider_progresspie_type_fill)r.beginPath(),r.moveTo(a,s),r.arc(a,s,i,l,u),r.lineTo(a,s),r.fillStyle=o.slider_progresspie_color1,r.fill(),r.closePath();else{r.globalCompositeOperation="source-over",r.beginPath(),r.moveTo(a,s),r.arc(a,s,i,l,u),r.lineTo(a,s),r.fillStyle=o.slider_progresspie_color1,r.fill(),r.closePath(),r.globalCompositeOperation="destination-out";var d=i-o.slider_progresspie_stroke_width;r.beginPath(),r.moveTo(a,s),r.arc(a,s,d,l,u),r.lineTo(a,s),r.fillStyle=o.slider_progresspie_color1,r.fill(),r.closePath()}1==o.slider_progresspie_type_fill&&(l=u,u=2*Math.PI,r.beginPath(),r.arc(a,s,i,l,u),r.lineTo(a,s),r.fillStyle=o.slider_progresspie_color2,r.fill(),r.closePath())}var t,i=this,n=!1,r=new UGFunctions,o={slider_progresspie_type_fill:!1,slider_progresspie_color1:"#B5B5B5",slider_progresspie_color2:"#E5E5E5",slider_progresspie_stroke_width:6,slider_progresspie_width:30,slider_progresspie_height:30};this.put=function(e,i){i&&(o=jQuery.extend(o,i)),e.append("<canvas class='ug-canvas-pie' width='"+o.slider_progresspie_width+"' height='"+o.slider_progresspie_height+"'></canvas>"),t=e.children(".ug-canvas-pie")},this.putHidden=function(n,r){i.put(n,r),e(.1),t.hide()},this.getElement=function(){return t},this.setPosition=function(e,i){r.placeElement(t,e,i)},this.getSize=function(){return{width:o.slider_progresspie_width,height:o.slider_progresspie_height}},this.setProgress=function(t){t=r.normalizePercent(t),t,e(t)},this.getType=function(){return"pie"}}function UGTouchSliderControl(){function e(e){if(!e)e=c.getSlidesReference();return-h.getElementSize(e.objCurrentSlide).left-h.getElementSize(_).left}function t(){var t=c.getSlidesReference(),i=e(t),n=Math.round(3*t.objCurrentSlide.width()/8);if(Math.abs(i)>=n)return!0;var r=Math.abs(m.lastMouseX-m.startMouseX);return Math.abs(m.lastMouseY-m.startMouseY),!(20>r)&&500>jQuery.now()-m.startTime}function i(e){if(1==c.isInnerInPlace())return!1;if(g.trigger(c.events.BEFORE_RETURN),!e)e=c.getSlidesReference();var t=-h.getElementSize(e.objCurrentSlide).left;_.animate({left:t+"px"},{duration:p.slider_transition_return_speed,easing:p.slider_transition_continuedrag_easing,queue:!1,progress:function(e,i,n){if(1==m.isDragVideo){var r=h.getElementSize(_).left-t,o=m.videoStartX+r;m.videoObject.css("left",o)}},complete:function(){g.trigger(c.events.AFTER_RETURN)}})}function n(){var t=c.getSlidesReference(),n=e(t);if(0==n)return!1;var r=n>0?"left":"right",o=!1;switch(r){case"right":if(c.isSlideHasItem(t.objPrevSlide))var a=-h.getElementSize(t.objPrevSlide).left;else o=!0;break;case"left":if(c.isSlideHasItem(t.objNextSlide))a=-h.getElementSize(t.objNextSlide).left;else o=!0}1==o?i(t):_.stop().animate({left:a+"px"},{duration:p.slider_transition_continuedrag_speed,easing:p.slider_transition_continuedrag_easing,queue:!1,progress:function(){if(1==m.isDragVideo){var e=h.getElementSize(_).left-m.startPosx,t=m.videoStartX+e;m.videoObject.css("left",t)}},always:function(){var e;e=r,c.getVideoObject().hide(),c.switchSlideNums(e),c.placeNabourItems(),g.trigger(c.events.AFTER_DRAG_CHANGE)}})}function r(e){var t=h.getMousePosition(e);m.startMouseX=t.pageX,m.startMouseY=t.pageY,m.lastMouseX=m.startMouseX,m.lastMouseY=m.startMouseY,m.startTime=jQuery.now();var i=h.getArrTouches(e);m.startArrTouches=h.getArrTouchPositions(i);var n=h.getElementSize(_);m.startPosx=n.left,m.isInitDataValid=!0,m.isDragVideo=!1,h.storeEventData(e,m.storedEventID)}function o(e){m.touch_active=!1}function a(e,t){m.touch_active=!0,r(t)}function s(e){return e.preventDefault(),m.isDragging=!1,1==c.isAnimating()&&_.stop(!0,!0),h.getArrTouches(e).length>1?(1==m.touch_active&&o(),!0):1==m.touch_active||void a(0,e)}function l(e){if(0==m.touch_active)return!0;if(0==e.buttons)return o(),n(),!0;h.updateStoredEventData(e,m.storedEventID),e.preventDefault();var t=h.getMousePosition(e);m.lastMouseX=t.pageX,m.lastMouseY=t.pageY;var i=null;1==p.slider_vertical_scroll_ondrag&&(i=h.handleScrollTop(m.storedEventID)),"vert"!==i&&function(e){var t=m.lastMouseX-m.startMouseX;if(0==t)return!0;var i=0>t?"left":"right",n=c.getObjZoom();if(n){if(1==n.isPanEnabled(e,i))return m.isInitDataValid=!1,!0;if(0==m.isInitDataValid)return r(e),!0}var o=m.startPosx+t;if(t>0&&o>0)o/=3;else if(0>t){var a=o+_.width();d.width()>a&&(o=m.startPosx+t/3)}if(0==m.isDragging&&(m.isDragging=!0,g.trigger(c.events.START_DRAG)),_.css("left",o+"px"),1==m.isDragVideo){var s=o-m.startPosx,l=m.videoStartX+s;m.videoObject.css("left",l)}}(e)}function u(e){var r=h.getArrTouches(e).length;if(1==c.isInnerInPlace()&&0==m.touch_active&&0==r)return!0;if(0==r&&1==m.touch_active){o();var s=!1;0==h.wasVerticalScroll(m.storedEventID)&&(s=t()),1==s?n():i()}else 1==r&&0==m.touch_active&&a(0,e)}var d,_,g,c=new UGSlider,h=new UGFunctions,p={slider_transition_continuedrag_speed:250,slider_transition_continuedrag_easing:"linear",slider_transition_return_speed:300,slider_transition_return_easing:"easeInOutQuad"},m={touch_active:!1,startMouseX:0,startMouseY:0,lastMouseX:0,lastMouseY:0,startPosx:0,startTime:0,isInitDataValid:!1,slides:null,lastNumTouches:0,isDragging:!1,storedEventID:"touchSlider",videoStartX:0,isDragVideo:!1,videoObject:null};this.isTapEventOccured=function(t){var i=h.getArrTouches(t).length;if(0!=i||0!=m.lastNumTouches)return m.lastNumTouches=i,!1;m.lastNumTouches=i;var n=(e(c.getSlidesReference()),Math.abs(m.lastMouseX-m.startMouseX)),r=Math.abs(m.lastMouseY-m.startMouseY),o=jQuery.now()-m.startTime;return 20>n&&50>r&&500>o},this.init=function(e,t){c=e,g=jQuery(c),g_objects=e.getObjects(),d=g_objects.g_objSlider,_=g_objects.g_objInner,p=jQuery.extend(p,t),d.bind("mousedown touchstart",s),jQuery("body").bind("mousemove touchmove",l),jQuery(window).add("body").bind("mouseup touchend",u)},this.getLastMousePos=function(){return{pageX:m.lastMouseX,pageY:m.lastMouseY}},this.isTouchActive=function(){return m.touch_active}}function UGZoomSliderControl(){function e(e,t){p=e,h=jQuery(p),g_objects=e.getObjects(),c=g_objects.g_objSlider,g_objects.g_objInner,f=jQuery.extend(f,t),c.on("mousewheel",g),c.bind("mousedown touchstart",u),jQuery("body").bind("mousemove touchmove",_),jQuery(window).add("body").bind("mouseup touchend",d),h.bind(p.events.BEFORE_RETURN,function(){l()}),h.bind(p.events.ITEM_CHANGED,function(){v.isZoomedOnce=!1}),h.bind(p.events.ZOOM_CHANGE,function(){v.isZoomedOnce=!0})}function t(){var e=p.getScaleMode();return"down"!=e&&(e="fit"),e}function i(){if(20>(n=jQuery.now())-v.storeImageLastTime)return!1;var e=p.getSlidesReference();if(v.objSlide=e.objCurrentSlide,v.objImage=e.objCurrentSlide.find("img"),0==v.objImage.length)return!1;v.objImageSize=m.getElementSize(v.objImage),v.objParent=v.objImage.parent(),v.objParentSize=m.getElementSize(v.objParent);var i=t();objPadding=p.getObjImagePadding(),v.objFitImageSize=m.getImageInsideParentDataByImage(v.objImage,i,objPadding);var n=jQuery.now();return v.storeImageLastTime=n,!0}function n(e,i){var n=p.getSlidesReference().objCurrentSlide.find("img"),r=t();h.trigger(p.events.ZOOM_START);var o=!0,a=p.getObjImagePadding();if("back"==e){var s=m.getImageOriginalSize(n);m.scaleImageFitParent(n,s.width,s.height,r,a)}else{var l="in"==e;o=m.zoomImageInsideParent(n,l,f.slider_zoom_step,i,r,f.slider_zoom_max_ratio,a)}1==o&&(h.trigger(p.events.ZOOMING),h.trigger(p.events.ZOOM_CHANGE),h.trigger(p.events.ZOOM_END))}function r(e,t,i){var n=m.getArrTouches(t);if(!0===i){if(1!=n.length)return!1}else if(n.length>1)return!1;return!!m.isElementBiggerThenParent(e)}function o(e){v.isPanActive=!0,function(e){var t=m.getMousePosition(e);v.startMouseX=t.pageX,v.startMouseY=t.pageY,v.lastMouseX=v.startMouseX,v.lastMouseY=v.startMouseY,v.startImageX=v.objImageSize.left,v.startImageY=v.objImageSize.top,v.panXActive=v.objImageSize.width>v.objParentSize.width,v.panYActive=v.objImageSize.height>v.objParentSize.height}(e)}function a(e){if(0==v.isZoomActive)return!1;2!=m.getArrTouches(e).length&&(v.isZoomActive=!1,h.trigger(p.events.ZOOM_END))}function s(e){if(1==v.isZoomActive)return!0;var t=m.getArrTouches(e);return 2!=t.length||void function(e){v.isZoomActive=!0,v.startDistance=m.getDistance(e[0].pageX,e[0].pageY,e[1].pageX,e[1].pageY),0==v.startDistance&&(v.startDistance=1),v.startMiddlePoint=m.getMiddlePoint(e[0].pageX,e[0].pageY,e[1].pageX,e[1].pageY),v.objImageSize=m.getElementSize(v.objImage),v.startImageX=v.objImageSize.left,v.startImageY=v.objImageSize.top,v.imageOrientPoint=m.getElementLocalPoint(v.startMiddlePoint,v.objImage),0==m.isPointInsideElement(v.imageOrientPoint,v.objImageSize)&&(v.imageOrientPoint=m.getElementCenterPoint(v.objImage)),h.trigger(p.events.ZOOM_START)}(t)}function l(){if(null==v.objImage||0==v.objImage.length)return!0;if(m.getElementSize(v.objImage).width<v.objFitImageSize.imageWidth){v.objImage.css({position:"absolute",margin:"none"});var e={top:v.objFitImageSize.imageTop+"px",left:v.objFitImageSize.imageLeft+"px",width:v.objFitImageSize.imageWidth+"px",height:v.objFitImageSize.imageHeight+"px"};v.objImage.animate(e,{duration:f.slider_zoom_return_pan_duration,easing:f.slider_zoom_return_pan_easing,queue:!1})}else!function(){var e=!1,t=!1,i=0,n=0,r=m.getElementSize(v.objImage),o=p.getObjImagePadding(),a=m.getElementCenterPosition(v.objImage,o);v.panXActive=v.objImageSize.width>v.objParentSize.width,v.panYActive=v.objImageSize.height>v.objParentSize.height,1==v.panYActive?r.top>0?(n=0,t=!0):r.bottom<v.objParentSize.height&&(n=v.objParentSize.height-r.height,t=!0):r.top!=a.top&&(t=!0,n=a.top),1==v.panXActive?r.left>0?(i=0,e=!0):r.right<v.objParentSize.width&&(i=v.objParentSize.width-r.width,e=!0):r.left!=a.left&&(e=!0,i=a.left);var s={};1==t&&(s.top=n+"px"),1==e&&(s.left=i+"px"),(1==t||1==e)&&v.objImage.animate(s,{duration:f.slider_zoom_return_pan_duration,easing:f.slider_zoom_return_pan_easing,queue:!1})}()}function u(e){return 0==p.isCurrentSlideType("image")||(i(),null==v.objImage||0==v.objImage.length||(e.preventDefault(),1==!(!v.objImage||!v.objImage.is(":animated"))&&v.objImage.stop(!0),1==v.isZoomActive?a(e):s(e),void(1==v.isZoomActive?v.isPanActive=!1:1==r(v.objImage,e)&&1==v.isZoomedOnce&&o(e))))}function d(e){if(0==p.isCurrentSlideType("image"))return!0;if(1==jQuery(e.target).data("ug-button"))return!1;if(i(),null==v.objImage||0==v.objImage.length)return!0;var t=v.isPanActive,n=v.isZoomActive;if(0==p.isInnerInPlace())return v.isZoomActive=!1,v.isPanActive=!1,!0;if(1==v.isZoomActive?a(e):s(e),1==v.isZoomActive)v.isPanActive=!1;else{var u=r(v.objImage,e,!0);1==v.isPanActive?v.isPanActive=!1:1==u&&o(e)}(t||n)&&0==v.isZoomActive&&0==v.isPanActive&&l()}function _(e){return 0==p.isCurrentSlideType("image")||void(1==v.isZoomActive?function(e){var t=m.getArrTouches(e),i=m.getDistance(t[0].pageX,t[0].pageY,t[1].pageX,t[1].pageY)/v.startDistance,n=m.getMiddlePoint(t[0].pageX,t[0].pageY,t[1].pageX,t[1].pageY),r=v.objImageSize.width*i,o=v.objImageSize.height*i,a=m.getImageOriginalSize(v.objImage),s=1;if(a.width>0&&(s=r/a.width),s>f.slider_zoom_max_ratio)return!0;panX=-(v.imageOrientPoint.x*i-v.imageOrientPoint.x),panY=-(v.imageOrientPoint.y*i-v.imageOrientPoint.y);var l=n.x-v.startMiddlePoint.x,u=n.y-v.startMiddlePoint.y,d=v.startImageX+panX+l,_=v.startImageY+panY+u;m.setElementSizeAndPosition(v.objImage,d,_,r,o),h.trigger(p.events.ZOOMING),h.trigger(p.events.ZOOM_CHANGE)}(e):1==v.isPanActive&&function(e){if(null==v.objImage||0==v.objImage.length)return!0;var t=m.getMousePosition(e),i=(t.pageX,v.startMouseX,t.pageY,v.startMouseY,t.pageX-v.lastMouseX),n=t.pageY-v.lastMouseY,r=0>i?"left":"right",o=0>n?"up":"down";v.lastMouseX=t.pageX,v.lastMouseY=t.pageY;var a=m.getElementSize(v.objImage);0==v.panYActive?n=0:"down"==o&&a.top>0?n/=3:"up"==o&&a.bottom<v.objParentSize.height&&(n/=3),0==v.panXActive||0==p.isInnerInPlace()?i=0:"right"==r&&a.left>0?i/=3:"left"==r&&a.right<v.objParentSize.width&&(i/=3);var s=a.left+i,l=a.top+n;m.placeElement(v.objImage,s,l)}(e))}function g(e,t,i,r){return 0==f.slider_zoom_mousewheel||(0==p.isCurrentSlideType("image")||(e.preventDefault(),void n(1==t>0?"in":"out",m.getMousePosition(e))))}var c,h,p=new UGSlider,m=new UGFunctions,f={slider_zoom_step:1.2,slider_zoom_max_ratio:6,slider_zoom_return_pan_duration:400,slider_zoom_return_pan_easing:"easeOutCubic"},v={isPanActive:!1,startMouseX:0,startMouseY:0,lastMouseX:0,lastMouseY:0,startImageX:0,startImageY:0,panXActive:!1,panYActive:!1,objImage:null,objImageSize:null,objParent:null,objParentSize:null,objSlide:null,storeImageLastTime:0,isZoomActive:!1,startDistance:0,startMiddlePoint:null,imageOrientPoint:null,objFitImageSize:null,isZoomedOnce:!1};this.________EXTERNAL_____________=function(){},this.isPanEnabled=function(e,t){if(i(),null==v.objImage||0==v.objImage.length)return!1;if(0==v.isZoomedOnce)return!1;if(0==r(v.objImage,e))return!1;if(0==p.isInnerInPlace())return!1;if("left"==t){if(v.objImageSize.right<=v.objParentSize.width)return!1}else if(v.objImageSize.left>=0)return!1;return!0},this.init=function(t,i){e(t,i)},this.zoomIn=function(){n("in")},this.zoomOut=function(){n("out")},this.zoomBack=function(){n("back")}}function UGWistiaAPI(){function e(){return"undefined"!=typeof Wistia}function t(e,t,n,o,a){r=null,s=!1;var l=e+"_video",u="<div id='"+l+"' class='wistia_embed' style='width:"+n+";height:"+o+";' data-video-width='"+n+"' data-video-height='"+o+"'>&nbsp;</div>";jQuery("#"+e).html(u),r=Wistia.embed(t,{version:"v1",videoWidth:n,videoHeight:o,container:l,autoPlay:a}),s=!0,i()}function i(){r.bind("play",function(){a.trigger(o.events.START_PLAYING)}),r.bind("pause",function(){a.trigger(o.events.STOP_PLAYING)}),r.bind("end",function(){a.trigger(o.events.STOP_PLAYING),a.trigger(o.events.VIDEO_ENDED)})}this.isAPILoaded=!1;var n,r,o=this,a=jQuery(this),s=!1;this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return 1==g_ugWistiaAPI.isAPILoaded||(e()?(g_ugWistiaAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("fast.wistia.com/assets/external/E-v1.js",!0),void(g_ugWistiaAPI.isAPILoaded=!0)))},this.doCommand=function(e){if(null==r)return!1;if(0==s)return!1;switch(e){case"play":r.play();break;case"pause":r.pause()}},this.pause=function(){o.doCommand("pause")},this.play=function(){o.doCommand("play")},this.putVideo=function(i,r,o,a,s){return e()?(t(i,r,o,a,s),!0):(this.loadAPI(),void(n=setInterval(function(){e()&&(t(i,r,o,a,s),clearInterval(n))},500)))},this.isPlayerReady=function(){return!(!s||!r)}}function UGSoundCloudAPI(){function e(){return"undefined"!=typeof SC}function t(e,t,n,a,s){r=null,g_isPlayerReady=!1;var l=e+"_iframe",u=location.protocol+"//w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/"+t;u+="&amp;buying=false&amp;liking=false&amp;download=false&amp;sharing=false&amp;show_artwork=true&show_comments=false&amp;show_playcount=true&amp;show_user=false&amp;hide_related=true&amp;visual=true&amp;start_track=0&amp;callback=true";var d="<iframe id='"+l+"' src="+(u+=!0===s?"&amp;auto_play=true":"&amp;auto_play=false")+" width='"+n+"' height='"+a+"' frameborder='0' scrolling='no' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>";jQuery("#"+e).html(d),(r=SC.Widget(l)).bind(SC.Widget.Events.READY,function(){r&&(g_isPlayerReady=!0,i())}),o=e}function i(){r.bind(SC.Widget.Events.PLAY,function(){s.trigger(a.events.START_PLAYING)}),r.bind(SC.Widget.Events.PAUSE,function(){s.trigger(a.events.STOP_PLAYING)}),r.bind(SC.Widget.Events.FINISH,function(){s.trigger(a.events.STOP_PLAYING),s.trigger(a.events.VIDEO_ENDED)})}this.isAPILoaded=!1;var n,r,o,a=this,s=jQuery(this);this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return 1==g_ugSoundCloudAPI.isAPILoaded||(e()?(g_ugSoundCloudAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("w.soundcloud.com/player/api.js",!0),void(g_ugSoundCloudAPI.isAPILoaded=!0)))},this.putSound=function(i,r,o,a,s){return e()?(t(i,r,o,a,s),!0):(this.loadAPI(),void(n=setInterval(function(){e()&&(t(i,r,o,a,s),clearInterval(n))},500)))},this.doCommand=function(e){if(null==r)return!1;if(0==g_isPlayerReady)return!1;switch(e){case"play":r.play();break;case"pause":r.pause()}},this.pause=function(){a.doCommand("pause")},this.play=function(){a.doCommand("play")},this.destroy=function(){g_isPlayerReady=!1,r=null,o&&(jQuery("#"+o).html(""),o=null)}}function UGHtml5MediaAPI(){function e(){return"undefined"!=typeof mejs}function t(e,t,n,o,a){r=null,g_isPlayerReady=!1;var s=location.protocol+"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/flashmediaelement-cdn.swf",l=location.protocol+"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/silverlightmediaelement.xap",u=e+"_video",d="";a&&!0===a&&(d="autoplay='autoplay'");var _="";t.posterImage&&(_="poster='"+t.posterImage+"'");var g="<video id='"+u+"' width='"+n+"' height='"+o+"'  controls='controls' preload='none' "+d+" "+_+">";""!=t.mp4&&(g+="<source type='video/mp4' src='"+t.mp4+"' />"),""!=t.webm&&(g+="<source type='video/webm' src='"+t.webm+"' />"),""!=t.ogv&&(g+="<source type='video/ogg' src='"+t.ogv+"' />"),g+="<object width='"+n+"' height='"+o+"' type='application/x-shockwave-flash' data='"+s+"'>",g+="<param name='movie' value='"+s+"' />",g+="<param name='flashvars' value='controls=true&file="+t.mp4+"' />",g+="</object>",g+="</video>",jQuery("#"+e).html(g),new MediaElement(u,{enablePluginDebug:!1,flashName:s,silverlightName:l,success:function(e,t){g_isPlayerReady=!0,r=e,0==a&&r.pause(),i()},error:function(e){trace(e)}})}function i(){g_ugFunctions.addEvent(r,"play",function(){a.trigger(o.events.START_PLAYING)}),g_ugFunctions.addEvent(r,"pause",function(){a.trigger(o.events.STOP_PLAYING)}),g_ugFunctions.addEvent(r,"ended",function(){a.trigger(o.events.STOP_PLAYING),a.trigger(o.events.VIDEO_ENDED)})}this.isAPILoaded=!1;var n,r,o=this,a=jQuery(this);this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return 1==g_ugHtml5MediaAPI.isAPILoaded||(e()?(g_ugHtml5MediaAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelement.min.js",!0),g_ugFunctions.loadCss("cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelementplayer.min.css",!0),void(g_ugHtml5MediaAPI.isAPILoaded=!0)))},this.putVideo=function(i,r,o,a,s){return e()?(t(i,r,o,a,s),!0):(this.loadAPI(),void(n=setInterval(function(){e()&&(t(i,r,o,a,s),clearInterval(n))},500)))},this.doCommand=function(e){if(null==r)return!1;if(0==g_isPlayerReady)return!1;switch(e){case"play":r.play();break;case"pause":r.pause()}},this.pause=function(){o.doCommand("pause")},this.play=function(){o.doCommand("play")}}function UGVimeoAPI(){function e(){return"undefined"!=typeof Froogaloop}function t(e,t,n,o,a){s=null,l=!1;var u=location.protocol+"//player.vimeo.com/video/"+t+"?api=1";!0===a&&(u+="&amp;byline=0&amp;autoplay=1&amp;title=0&amp;portrait=0");var d="<iframe src="+u+" width='"+n+"' height='"+o+"' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>";jQuery("#"+e).html(d);var _=jQuery("#"+e+" iframe")[0];(s=Froogaloop(_)).addEvent("ready",function(){s&&(l=!0,i())}),r=e}function i(){return!!s&&(s.addEvent("cuechange",function(){1==u&&o.play()}),s.addEvent("play",function(){a.trigger(o.events.START_PLAYING)}),s.addEvent("pause",function(){a.trigger(o.events.STOP_PLAYING)}),void s.addEvent("finish",function(){a.trigger(o.events.STOP_PLAYING),a.trigger(o.events.VIDEO_ENDED)}))}this.isAPILoaded=!1;var n,r,o=this,a=jQuery(this),s=null,l=!1,u=!1;this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return 1==g_ugVimeoAPI.isAPILoaded||(e()?(g_ugVimeoAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("f.vimeocdn.com/js/froogaloop2.min.js",!0),void(g_ugVimeoAPI.isAPILoaded=!0)))},this.doCommand=function(e){return null!=s&&(0!=l&&void s.api(e))},this.pause=function(){o.doCommand("pause")},this.play=function(){o.doCommand("play")},this.destroy=function(){s&&(s.api("unload"),s=null,l=!1),r&&jQuery("#"+r).html("")},this.putVideo=function(i,r,o,a,s){return e()?(t(i,r,o,a,s),!0):(this.loadAPI(),void(n=setInterval(function(){e()&&(t(i,r,o,a,s),clearInterval(n))},500)))},this.isPlayerReady=function(){return!(!l||!s)},this.changeVideo=function(e,t){return 0!=o.isPlayerReady()&&(u=t,void s.api("loadVideo",e))},this.getVideoImages=function(e,t,i){var n=location.protocol+"//vimeo.com/api/v2/video/"+e+".json";jQuery.get(n,{},function(e){var n={};n.preview=e[0].thumbnail_large,n.thumb=e[0].thumbnail_medium,i(t,n)})}}function UGYoutubeAPI(){function e(e,t,r,a,u){s&&l&&s.destroy();var d={controls:2,showinfo:_.video_youtube_showinfo,rel:0};!0===u&&(d.autoplay=1),l=!1,s=new YT.Player(e,{height:a,width:r,videoId:t,playerVars:d,events:{onReady:i,onStateChange:n}}),o=e}function t(){return"undefined"!=typeof YT&&void 0!==YT.Player}function i(){l=!0}function n(){if("function"!=typeof s.getPlayerState)return trace("Youtube API error: can't get player state"),!1;var e=s.getPlayerState();switch(e){case YT.PlayerState.PLAYING:u.trigger(a.events.START_PLAYING);break;case YT.PlayerState.ENDED:u.trigger(a.events.STOP_PLAYING),u.trigger(a.events.VIDEO_ENDED);break;default:d==YT.PlayerState.PLAYING&&u.trigger(a.events.STOP_PLAYING)}d=e}this.isAPILoaded=!1;var r,o,a=this,s=null,l=!1,u=jQuery(this),d=-1,_={video_youtube_showinfo:!0};this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.setOptions=function(e){_=jQuery.extend(_,e)},this.putVideo=function(i,n,o,a,s){return t()?(e(i,n,o,a,s),!0):(this.loadAPI(),void(r=setInterval(function(){t()&&(e(i,n,o,a,s),clearInterval(r))},500)))},this.loadAPI=function(){return 1==g_ugYoutubeAPI.isAPILoaded||("undefined"!=typeof YT?(g_ugYoutubeAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("https://www.youtube.com/player_api",!1),void(g_ugYoutubeAPI.isAPILoaded=!0)))},this.doCommand=function(e,t){if(!s)return!0;if(0==l)return!1;switch(e){case"play":if("function"!=typeof s.playVideo)return!1;s.playVideo();break;case"pause":if("function"!=typeof s.pauseVideo)return!1;s.pauseVideo();break;case"seek":if("function"!=typeof s.seekTo)return!1;s.seekTo(t);break;case"stopToBeginning":var i=s.getPlayerState();switch(s.pauseVideo(),i){case YT.PlayerState.PLAYING:case YT.PlayerState.ENDED:case YT.PlayerState.PAUSED:s.seekTo(0)}}},this.play=function(){a.doCommand("play")},this.pause=function(){a.doCommand("pause")},this.destroy=function(){try{s&&(l=!1,s.clearVideo(),s.destroy())}catch(e){jQuery("#"+o).html("")}},this.stopToBeginning=function(){a.doCommand("stopToBeginning")},this.changeVideo=function(e,t){return 0!=a.isPlayerReady()&&void(t&&1==t?s.loadVideoById(e,0,"large"):s.cueVideoById(e,0,"large"))},this.isPlayerReady=function(){return!(!l||!s)},this.getVideoImages=function(e){var t={};return t.preview="https://i.ytimg.com/vi/"+e+"/sddefault.jpg",t.thumb="https://i.ytimg.com/vi/"+e+"/default.jpg",t}}function UGVideoPlayer(){function e(){c.hide()}function t(){h.trigger(c.events.PLAY_START),d&&d.hide()}function i(){h.trigger(c.events.PLAY_STOP),d&&d.show()}function n(){h.trigger(c.events.VIDEO_ENDED)}function r(e){var t=["youtube","vimeo","html5","soundcloud","wistia"];for(var i in t){var n=t[i];if(n!=e)switch(n){case"youtube":m.pause(),m.destroy(),s.hide();break;case"vimeo":f.pause(),f.destroy(),l.hide();break;case"html5":v.pause(),u.hide();break;case"soundcloud":b.pause(),b.destroy(),_.hide();break;case"wistia":y.pause(),g.hide()}}}var o,a,s,l,u,d,_,g,c=this,h=jQuery(this),p=new UGFunctions,m=new UGYoutubeAPI,f=new UGVimeoAPI,v=new UGHtml5MediaAPI,b=new UGSoundCloudAPI,y=new UGWistiaAPI,I=null,w={video_enable_closebutton:!0};this.events={SHOW:"video_show",HIDE:"video_hide",PLAY_START:"video_play_start",PLAY_STOP:"video_play_stop",VIDEO_ENDED:"video_ended"};var E={standAloneMode:!1,youtubeInnerID:"",vimeoPlayerID:"",html5PlayerID:"",wistiaPlayerID:"",soundCloudPlayerID:""};this.init=function(e,t,i){if(!(o=i))throw new Error("missing gallery ID for video player, it's a must!");w=jQuery.extend(w,e),m.setOptions(w),t&&1==t&&(E.standAloneMode=!0)},this.setHtml=function(e){E.youtubeInnerID=o+"_youtube_inner",E.vimeoPlayerID=o+"_videoplayer_vimeo",E.html5PlayerID=o+"_videoplayer_html5",E.wistiaPlayerID=o+"_videoplayer_wistia",E.soundCloudPlayerID=o+"_videoplayer_soundcloud";var t="<div class='ug-videoplayer' style='display:none'>";t+="<div class='ug-videoplayer-wrapper ug-videoplayer-youtube' style='display:none'><div id='"+E.youtubeInnerID+"'></div></div>",t+="<div id='"+E.vimeoPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-vimeo' style='display:none'></div>",t+="<div id='"+E.html5PlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-html5'></div>",t+="<div id='"+E.soundCloudPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-soundcloud'></div>",t+="<div id='"+E.wistiaPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-wistia'></div>",0==E.standAloneMode&&1==w.video_enable_closebutton&&(t+="<div class='ug-videoplayer-button-close'></div>"),t+="</div>",e.append(t),a=e.children(".ug-videoplayer"),s=a.children(".ug-videoplayer-youtube"),l=a.children(".ug-videoplayer-vimeo"),u=a.children(".ug-videoplayer-html5"),_=a.children(".ug-videoplayer-soundcloud"),g=a.children(".ug-videoplayer-wistia"),0==E.standAloneMode&&1==w.video_enable_closebutton&&(d=a.children(".ug-videoplayer-button-close"))},this.destroy=function(){d&&(d.off("click"),d.off("touchend")),jQuery(m).off(m.events.START_PLAYING),jQuery(m).off(m.events.STOP_PLAYING),jQuery(f).off(f.events.START_PLAYING),jQuery(f).off(f.events.STOP_PLAYING),jQuery(v).off(v.events.START_PLAYING),jQuery(v).off(v.events.STOP_PLAYING),jQuery(b).off(b.events.START_PLAYING,t),jQuery(b).off(b.events.STOP_PLAYING,i),jQuery(y).off(y.events.START_PLAYING,t),jQuery(y).off(y.events.STOP_PLAYING,i),I=null},this.initEvents=function(){d&&(p.setButtonMobileReady(d),p.setButtonOnClick(d,e)),jQuery(m).on(m.events.START_PLAYING,t),jQuery(m).on(m.events.STOP_PLAYING,i),jQuery(m).on(m.events.VIDEO_ENDED,n),jQuery(f).on(f.events.START_PLAYING,t),jQuery(f).on(f.events.STOP_PLAYING,i),jQuery(f).on(f.events.VIDEO_ENDED,n),jQuery(v).on(v.events.START_PLAYING,t),jQuery(v).on(v.events.STOP_PLAYING,i),jQuery(v).on(v.events.VIDEO_ENDED,n),jQuery(b).on(b.events.START_PLAYING,t),jQuery(b).on(b.events.STOP_PLAYING,i),jQuery(b).on(b.events.VIDEO_ENDED,n),jQuery(y).on(y.events.START_PLAYING,t),jQuery(y).on(y.events.STOP_PLAYING,i),jQuery(y).on(y.events.VIDEO_ENDED,n)},this.setSize=function(e,t){p.setElementSize(a,e,t),d&&p.placeElement(d,"right","top")},this.setPosition=function(e,t){p.placeElement(a,e,t)},this.getObject=function(){return a},this.show=function(){return 1==c.isVisible()||(a.show(),a.fadeTo(0,1),d&&d.show(),void h.trigger(c.events.SHOW))},this.hide=function(){return 0==c.isVisible()||(r(),I=null,a.hide(),void h.trigger(c.events.HIDE))},this.getActiveAPI=function(){switch(I){case"youtube":return m;case"vimeo":return f;case"wistia":return y;case"soundcloud":return b;case"html5":return v;default:return null}},this.pause=function(){var e=c.getActiveAPI();return null!=e&&void("function"==typeof e.pause&&e.pause())},this.isVisible=function(){return a.is(":visible")},this.playYoutube=function(e,t){if(void 0===t)t=!0;r("youtube"),s.show(),0==s.children("#"+E.youtubeInnerID).length&&s.append("<div id='"+E.youtubeInnerID+"'></div>"),1==m.isPlayerReady()&&1==E.standAloneMode?m.changeVideo(e,t):m.putVideo(E.youtubeInnerID,e,"100%","100%",t),I="youtube"},this.playVimeo=function(e,t){if(void 0===t)t=!0;r("vimeo"),l.show(),f.putVideo(E.vimeoPlayerID,e,"100%","100%",t),I="vimeo"},this.playHtml5Video=function(e,t,i,n,o){if(void 0===o)o=!0;r("html5"),u.show();var a={ogv:e,webm:t,mp4:i,posterImage:n};v.putVideo(E.html5PlayerID,a,"100%","100%",o),I="html5"},this.playSoundCloud=function(e,t){if(void 0===t)t=!0;r("soundcloud"),_.show(),b.putSound(E.soundCloudPlayerID,e,"100%","100%",t),I="soundcloud"},this.playWistia=function(e,t){if(void 0===t)t=!0;r("wistia"),g.show(),y.putVideo(E.wistiaPlayerID,e,"100%","100%",t),I="wistia"}}function ugCheckForMinJQueryVersion(){if(0==g_ugFunctions.checkMinJqueryVersion("1.8.0"))throw new Error("The gallery can run from jquery 1.8 You have jQuery "+jQuery.fn.jquery+" Please update your jQuery library.")}function ugCheckForErrors(e,t){try{"jquery"==t?(function(){if("undefined"==typeof jQuery)throw new Error("jQuery library not included")}(),ugCheckForMinJQueryVersion()):(ugCheckForMinJQueryVersion(),function(){if("function"==typeof jQuery.fn.unitegallery)return!0;var e="You have some jquery.js library include that comes after the gallery files js include.";throw e+="<br> This include eliminates the gallery libraries, and make it not work.","cms"==t?(e+="<br><br> To fix it you can:<br>&nbsp;&nbsp;&nbsp; 1. In the Gallery Settings -> Troubleshooting set option:  <strong><b>Put JS Includes To Body</b></strong> option to true.",e+="<br>&nbsp;&nbsp;&nbsp; 2. Find the double jquery.js include and remove it."):e+="<br><br> Please find and remove this jquery.js include and the gallery will work. <br> * There should be only one jquery.js include before all other js includes in the page.",new Error(e)}())}catch(r){var i=r.message;if(i="<div style='font-size:16px;color:#BC0C06;max-width:900px;border:1px solid red;padding:10px;'>"+(i="Unite Gallery Error: "+i)+"</div>","jquery"==t){var n=document.getElementById(e);n.innerHTML=i,n.style.display="block"}else jQuery(e).show().html(i);return!1}return!0}function UniteGalleryMain(){function __________INIT_GALLERY_______(){}function getThemeFunction(e){var t=e;return-1==t.indexOf("UGTheme_")&&(t="UGTheme_"+t),t}function initTheme(objCustomOptions){if(objCustomOptions.hasOwnProperty("gallery_theme"))g_options.gallery_theme=objCustomOptions.gallery_theme;else{var defaultTheme=g_options.gallery_theme;0==g_ugFunctions.isThemeRegistered(defaultTheme)&&(g_options.gallery_theme=g_ugFunctions.getFirstRegisteredTheme())}var themeFunction=getThemeFunction(g_options.gallery_theme);try{g_options.gallery_theme=eval(themeFunction)}catch(e){}g_options.gallery_theme=eval(themeFunction),g_objTheme=new g_options.gallery_theme,g_objTheme.init(t,objCustomOptions)}function resetOptions(){g_options=jQuery.extend({},g_temp.originalOptions),g_selectedItemIndex=-1,g_selectedItem=null,g_objSlider=void 0,g_objThumbs=void 0,g_objSlider=void 0}function checkForStartupErrors(){try{ugCheckForMinJQueryVersion()}catch(e){throwErrorShowMessage(e.message)}"object"==typeof g_objWrapper.outerWidth()&&throwErrorShowMessage("You have some buggy script. most chances jquery-ui.js that destroy jquery outerWidth, outerHeight functions. The gallery can't run. Please update jquery-ui.js to latest version."),setTimeout(function(){ugCheckForErrors(g_galleryID,"cms")},5e3)}function runGallery(e,i,n,r){var o="object"==typeof i;if(o&&(g_temp.objCustomOptions=i),1==g_temp.isRunFirstTime){if(g_galleryID=e,0==(g_objWrapper=jQuery(g_galleryID)).length)return trace("div with id: "+g_galleryID+" not found"),!1;g_objParent=g_objWrapper.parent(),checkForStartupErrors(),g_temp.originalOptions=jQuery.extend({},g_options),o&&(g_options=jQuery.extend(g_options,i)),1==g_options.gallery_enable_cache&&g_options.gallery_initial_catid&&cacheItems(g_options.gallery_initial_catid),t.setSizeClass(),fillItemsArray(g_objWrapper.children()),loadAPIs(),g_objWrapper.find("img").fadeTo(0,0).hide(),g_objWrapper.show(),clearInitData()}else if(t.destroy(),resetOptions(),g_options=jQuery.extend(g_options,g_temp.objCustomOptions),n){if(r&&1==g_options.gallery_enable_cache&&cacheItems(r,n),"noitems"==n)return showErrorMessage("No items in this category",""),!1;g_objWrapper.html(n),fillItemsArray(g_objWrapper.children()),loadAPIs(),g_objWrapper.children().fadeTo(0,0).hide(),g_objWrapper.show(),clearInitData()}1==g_temp.isRunFirstTime&&1==g_options.gallery_enable_tabs&&(g_objTabs=new UGTabs).init(t,g_options),1==g_temp.isRunFirstTime&&1==g_options.gallery_enable_loadmore&&(g_objLoadMore=new UGLoadMore).init(t,g_options),o&&modifyInitParams(g_temp.objCustomOptions),validateParams(),1==g_options.gallery_shuffle&&t.shuffleItems(),initTheme(g_temp.objCustomOptions),setGalleryHtml(),setHtmlObjectsProperties(),0==g_objWrapper.width()?g_functions.waitForWidth(g_objWrapper,runGalleryActually):runGalleryActually()}function runGalleryActually(){t.setSizeClass(),0==g_temp.isFreestyleMode&&1==g_options.gallery_preserve_ratio&&setHeightByOriginalRatio(),g_objTheme.run(),g_objTabs&&g_temp.isRunFirstTime&&g_objTabs.run(),preloadBigImages(),initEvents(),g_numItems>0&&t.selectItem(0),1==g_options.gallery_autoplay&&t.startPlayMode(),g_temp.isRunFirstTime=!1}function showErrorMessage(e,t){if(void 0===t)t="<b>Unite Gallery Error: </b>";else t="<b>"+t+": </b>";var i="<div class='ug-error-message-wrapper'><div class='ug-error-message'>"+(e=t+e)+"</div></div>";g_objWrapper.children().remove(),g_objWrapper.html(i),g_objWrapper.show()}function throwErrorShowMessage(e){throw showErrorMessage(e),new Error(e)}function modifyInitParams(){g_options.gallery_images_preload_type||(g_options.gallery_images_preload_type="minimal"),(null==g_options.gallery_min_height||g_options.gallery_height<g_options.gallery_min_height)&&(g_options.gallery_min_height=0),(null==g_options.gallery_min_width||g_options.gallery_width<g_options.gallery_min_width)&&(g_options.gallery_min_width=0)}function validateParams(){if(!g_options.gallery_theme)throw new Error("The gallery can't run without theme");if(jQuery.isNumeric(g_options.gallery_height)&&g_options.gallery_height<g_options.gallery_min_height)throw new Error("The <b>gallery_height</b> option must be bigger then <b>gallery_min_height option</b>");if(g_options.gallery_width<g_options.gallery_min_width)throw new Error("The <b>gallery_width</b> option must be bigger then <b>gallery_min_width option</b>")}function setGalleryHtml(){g_objWrapper.addClass("ug-gallery-wrapper"),g_objWrapper.append("<div class='ug-overlay-disabled' style='display:none'></div>"),t.setSizeClass()}function clearInitData(){g_objWrapper.children().remove()}function storeLastSize(){var e=t.getSize();g_temp.lastWidth=e.width,g_temp.lastHeight=e.height}function setHeightByOriginalRatio(){var e=t.getSize();if(e.width/e.height!=e.orig_ratio){var i=e.width/e.orig_ratio;(i=Math.round(i))<g_options.gallery_min_height&&(i=g_options.gallery_min_height),g_objWrapper.height(i)}}function setHtmlObjectsProperties(){var e={"max-width":g_functions.getCssSizeParam(g_options.gallery_width),"min-width":g_functions.getCssSizeParam(g_options.gallery_min_width)};if(0==g_temp.isFreestyleMode){var t=g_functions.getCssSizeParam(g_options.gallery_height);e.height=t}else e.overflow="visible";g_options.gallery_background_color&&(e["background-color"]=g_options.gallery_background_color),g_objWrapper.css(e)}function fillItemByChild(e){var i=t.isMobileMode(),n="";if("a"==(r=e.prop("tagName").toLowerCase())){n=e.attr("href");var r=(e=e.children()).prop("tagName").toLowerCase()}var o=e.data("type");null==o&&(o="image");var a={};if(a.type=o,"img"==r){var s=e.data("lazyload-src");s&&""!=s&&(e.attr("src",s),jQuery.removeData(e,"lazyload-src"));var l=e.data("image"),u=e.data("thumb");void 0===l&&(l=null),void 0===u&&(u=null);var d=e.attr("src");l||(l=d),u||(u=d),u||(u=l),l||(l=u),a.urlThumb=u,a.urlImage=l,a.title=e.attr("alt"),a.objThumbImage=e,a.objThumbImage.attr("src",a.urlThumb)}else{if("image"==o)throw trace("Problematic gallery item found:"),trace(e),trace("Please look for some third party js script that could add this item to the gallery"),new Error("The item should not be image type");a.urlThumb=e.data("thumb"),a.title=e.data("title"),a.objThumbImage=null,a.urlImage=e.data("image")}if(1==i){var _=e.data("thumb-mobile");void 0!==_&&""!=_&&(a.urlThumb=_,"img"==r&&e.attr("src",a.urlThumb));var g=e.data("image-mobile");void 0!==g&&""!=g&&(a.urlImage=g)}a.link=n,a.description=e.attr("title"),a.description||(a.description=e.data("description")),a.description||(a.description=""),a.isNewAdded=!1,a.isLoaded=!1,a.isThumbImageLoaded=!1,a.objPreloadImage=null,a.isBigImageLoadStarted=!1,a.isBigImageLoaded=!1,a.isBigImageLoadError=!1,a.imageWidth=0,a.imageHeight=0,a.thumbWidth=0,a.thumbHeight=0,a.thumbRatioByWidth=0,a.thumbRatioByHeight=0;var c=e.data("width"),h=e.data("height");c&&"number"==typeof c&&h&&"number"==typeof h&&(a.thumbWidth=c,a.thumbHeight=h,a.thumbRatioByWidth=c/h,a.thumbRatioByHeight=h/c),a.addHtml=null;var p=null==a.urlImage||""==a.urlImage,m=null==a.urlThumb||""==a.urlThumb;switch(a.type){case"youtube":if(a.videoid=e.data("videoid"),p||m){var f=g_ugYoutubeAPI.getVideoImages(a.videoid);p&&(a.urlImage=f.preview),m&&(a.urlThumb=f.thumb,"img"==r&&e.attr("src",a.urlThumb))}g_temp.isYoutubePresent=!0;break;case"vimeo":a.videoid=e.data("videoid"),g_temp.isVimeoPresent=!0;break;case"html5video":a.videoogv=e.data("videoogv"),a.videowebm=e.data("videowebm"),a.videomp4=e.data("videomp4"),g_temp.isHtml5VideoPresent=!0;break;case"soundcloud":a.trackid=e.data("trackid"),g_temp.isSoundCloudPresent=!0;break;case"wistia":a.videoid=e.data("videoid"),g_temp.isWistiaPresent=!0;break;case"custom":var v=e.children("img");v.length&&(v=jQuery(v[0]),a.urlThumb=v.attr("src"),a.title=v.attr("alt"),a.objThumbImage=v);var b=e.children().not("img:first-child");b.length&&(a.addHtml=b.clone())}return a.objThumbImage&&(a.objThumbImage.removeAttr("data-description",""),a.objThumbImage.removeAttr("data-image",""),a.objThumbImage.removeAttr("data-thumb",""),a.objThumbImage.removeAttr("title","")),a}function fillItemsArray(e,t){if(!0!==t)g_arrItems=[];else for(var i=0;g_numItems>i;i++)g_arrItems[i].isNewAdded=!1;for(i=0;i<e.length;i++){var n=fillItemByChild(jQuery(e[i]));numIndex=g_arrItems.length,n.index=numIndex,!0===t&&(n.isNewAdded=!0),g_arrItems.push(n)}g_numItems=g_arrItems.length}function loadAPIs(){g_temp.isYoutubePresent&&g_ugYoutubeAPI.loadAPI(),g_temp.isVimeoPresent&&g_ugVimeoAPI.loadAPI(),g_temp.isHtml5VideoPresent&&g_ugHtml5MediaAPI.loadAPI(),g_temp.isSoundCloudPresent&&g_ugSoundCloudAPI.loadAPI(),g_temp.isWistiaPresent&&g_ugWistiaAPI.loadAPI()}function preloadBigImages(){if("visible"!=g_options.gallery_images_preload_type||g_objThumbs||(g_options.gallery_images_preload_type="minimal"),1==g_temp.isAllItemsPreloaded)return!0;switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":jQuery(g_arrItems).each(function(){preloadItemImage(this)});break;case"visible":jQuery(g_arrItems).each(function(){1==g_objThumbs.isItemThumbVisible(this)&&preloadItemImage(this)})}}function checkPreloadItemImage(e){if(1==e.isBigImageLoadStarted||1==e.isBigImageLoaded||1==e.isBigImageLoadError)return!1;switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":preloadItemImage(e);break;case"visible":1==g_objThumbs.isItemThumbVisible(e)&&preloadItemImage(e)}}function preloadItemImage(e){if(1==e.isBigImageLoadStarted||1==e.isBigImageLoaded||1==e.isBigImageLoadError)return!0;var i=e.urlImage;return""==i||null==i?(e.isBigImageLoadError=!0,!1):(e.isBigImageLoadStarted=!0,e.objPreloadImage=jQuery("<img/>").attr("src",i),e.objPreloadImage.data("itemIndex",e.index),e.objPreloadImage.on("load",t.onItemBigImageLoaded),e.objPreloadImage.on("error",function(){var e=jQuery(this).data("itemIndex"),i=g_arrItems[e];i.isBigImageLoadError=!0,i.isBigImageLoaded=!1;var n=jQuery(this).attr("src");console.log("Can't load image: "+n),g_objGallery.trigger(t.events.ITEM_IMAGE_UPDATED,[e,i.urlImage]),i.objThumbImage.attr("src",i.urlThumb)}),void checkAllItemsStartedPreloading())}function preloadNearBigImages(e){if(1==g_temp.isAllItemsPreloaded)return!1;if(!e)e=g_selectedItem;if(!e)return!0;var t=e.index,i=t-1,n=t+1;i>0&&preloadItemImage(g_arrItems[i]),g_numItems>n&&preloadItemImage(g_arrItems[n])}function checkAllItemsStartedPreloading(){if(1==g_temp.isAllItemsPreloaded)return!1;for(var e in g_arrItems)if(0==g_arrItems[e].isBigImageLoadStarted)return!1;g_temp.isAllItemsPreloaded=!0}function __________END_INIT_GALLERY_______(){}function __________EVENTS_____________(){}function onSliderMouseEnter(e){1==g_options.gallery_pause_on_mouseover&&0==t.isFullScreen()&&1==g_temp.isPlayMode&&g_objSlider&&0==g_objSlider.isSlideActionActive()&&t.pausePlaying()}function onSliderMouseLeave(e){1==g_options.gallery_pause_on_mouseover&&1==g_temp.isPlayMode&&g_objSlider&&0==g_objSlider.isSlideActionActive()&&(0==g_objSlider.isCurrentSlideLoadingImage()&&t.continuePlaying())}function onKeyPress(e){var i=jQuery(e.target);if(i.is("textarea")||i.is("select")||i.is("input"))return!0;var n=e.charCode?e.charCode:e.keyCode?e.keyCode:e.which?e.which:0,r=!0;switch(n){case 39:t.nextItem();break;case 37:t.prevItem();break;default:r=!1}1==r&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),g_objGallery.trigger(t.events.GALLERY_KEYPRESS,[n,e])}function onGalleryResized(){var e;if(0==(e=t.getSize()).width)return!0;if(t.setSizeClass(),(e=t.getSize()).width!=g_temp.lastWidth||0==g_temp.isFreestyleMode&&e.height!=g_temp.lastHeight){var i=!1;if(g_temp.funcCustomHeight){var n=g_temp.funcCustomHeight(e);n&&(g_objWrapper.height(n),i=!0)}0==i&&1==g_options.gallery_preserve_ratio&&0==g_temp.isFreestyleMode&&setHeightByOriginalRatio(),storeLastSize(),g_objGallery.trigger(t.events.SIZE_CHANGE)}}function onThumbsChange(e){"visible"==g_options.gallery_images_preload_type&&0==g_temp.isAllItemsPreloaded&&preloadBigImages()}function onFullScreenChange(){var e=g_functions.isFullScreen(),i=e?t.events.ENTER_FULLSCREEN:t.events.EXIT_FULLSCREEN,n=g_functions.getGlobalData("fullscreenID");return g_galleryID!==n||(e?g_objWrapper.addClass("ug-fullscreen"):g_objWrapper.removeClass("ug-fullscreen"),g_objGallery.trigger(i),void onGalleryResized())}function onItemImageUpdated(e,i){checkPreloadItemImage(t.getItem(i))}function onCurrentSlideImageLoadEnd(){1==t.isPlayMode()&&t.continuePlaying()}function initEvents(){if(g_objWrapper.on("dragstart",function(e){e.preventDefault()}),g_objGallery.on(t.events.ITEM_IMAGE_UPDATED,onItemImageUpdated),g_objThumbs)switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).on(g_objThumbs.events.STRIP_MOVE,onThumbsChange);break;case"grid":jQuery(g_objThumbs).on(g_objThumbs.events.PANE_CHANGE,onThumbsChange)}if("advance"==g_options.gallery_mousewheel_role&&0==g_temp.isFreestyleMode&&g_objWrapper.on("mousewheel",t.onGalleryMouseWheel),storeLastSize(),jQuery(window).resize(function(){g_objWrapper.css("width","auto"),g_functions.whenContiniousEventOver("gallery_resize",onGalleryResized,g_temp.resizeDelay)}),setTimeout(function(){setInterval(onGalleryResized,2e3)},1e4),g_functions.addFullScreenChangeEvent(onFullScreenChange),g_objSlider){if(jQuery(g_objSlider).on(g_objSlider.events.ITEM_CHANGED,function(){var e=g_objSlider.getCurrentItemIndex();-1!=e&&t.selectItem(e)}),1==g_options.gallery_pause_on_mouseover)g_objSlider.getElement().hover(onSliderMouseEnter,onSliderMouseLeave),g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){onSliderMouseLeave()});retriggerEvent(g_objSlider,g_objSlider.events.ACTION_START,t.events.SLIDER_ACTION_START),retriggerEvent(g_objSlider,g_objSlider.events.ACTION_END,t.events.SLIDER_ACTION_END),jQuery(g_objSlider).on(g_objSlider.events.CURRENTSLIDE_LOAD_END,onCurrentSlideImageLoadEnd)}1==g_options.gallery_control_keyboard&&jQuery(document).keydown(onKeyPress)}function __________GENERAL_______(){}function cacheItems(e,t){if(t)"noitems"!=(i=t)&&(i=jQuery(t).clone());else var i=g_objWrapper.children().clone();g_objCache[e]=i}function removeAllSizeClasses(e){e||(e=g_objWrapper),e.removeClass("ug-under-480"),e.removeClass("ug-under-780"),e.removeClass("ug-under-960")}function retriggerEvent(e,t,i){jQuery(e).on(t,function(e){g_objGallery.trigger(i,[this])})}function advanceNextStep(){var e=jQuery.now(),i=e-g_temp.playTimeLastStep;if(g_temp.playTimeLastStep=e,0==t.isGalleryVisible())return!1;if(g_temp.playTimePassed+=i,g_temp.objProgress){var n=g_temp.playTimePassed/g_options.gallery_play_interval;g_temp.objProgress.setProgress(n)}g_temp.playTimePassed>=g_options.gallery_play_interval&&(t.nextItem(),g_temp.playTimePassed=0)}function unselectSeletedItem(){return null==g_selectedItem||(g_objThumbs&&g_objThumbs.setThumbUnselected(g_selectedItem.objThumbWrapper),g_selectedItem=null,void(g_selectedItemIndex=-1))}function toFakeFullScreen(){jQuery("body").addClass("ug-body-fullscreen"),g_objWrapper.addClass("ug-fake-fullscreen"),g_temp.isFakeFullscreen=!0,g_objGallery.trigger(t.events.ENTER_FULLSCREEN),g_objGallery.trigger(t.events.SIZE_CHANGE)}function exitFakeFullscreen(){jQuery("body").removeClass("ug-body-fullscreen"),g_objWrapper.removeClass("ug-fake-fullscreen"),g_temp.isFakeFullscreen=!1,g_objGallery.trigger(t.events.EXIT_FULLSCREEN),g_objGallery.trigger(t.events.SIZE_CHANGE)}var t=this,g_galleryID,g_objGallery=jQuery(t),g_objWrapper,g_objParent,g_objThumbs,g_objSlider,g_functions=new UGFunctions,g_objTabs,g_objLoadMore,g_arrItems=[],g_numItems,g_selectedItem=null,g_selectedItemIndex=-1,g_objTheme,g_objCache={};this.events={ITEM_CHANGE:"item_change",SIZE_CHANGE:"size_change",ENTER_FULLSCREEN:"enter_fullscreen",EXIT_FULLSCREEN:"exit_fullscreen",START_PLAY:"start_play",STOP_PLAY:"stop_play",PAUSE_PLAYING:"pause_playing",CONTINUE_PLAYING:"continue_playing",SLIDER_ACTION_START:"slider_action_start",SLIDER_ACTION_END:"slider_action_end",ITEM_IMAGE_UPDATED:"item_image_updated",GALLERY_KEYPRESS:"gallery_keypress",GALLERY_BEFORE_REQUEST_ITEMS:"gallery_before_request_items",OPEN_LIGHTBOX:"open_lightbox",CLOSE_LIGHTBOX:"close_lightbox"};var g_options={gallery_width:900,gallery_height:500,gallery_min_width:150,gallery_min_height:100,gallery_theme:"default",gallery_skin:"default",gallery_images_preload_type:"minimal",gallery_autoplay:!1,gallery_play_interval:3e3,gallery_pause_on_mouseover:!0,gallery_mousewheel_role:"zoom",gallery_control_keyboard:!0,gallery_carousel:!0,gallery_preserve_ratio:!0,gallery_background_color:"",gallery_debug_errors:!1,gallery_shuffle:!1,gallery_urlajax:null,gallery_enable_tabs:!1,gallery_enable_loadmore:!1,gallery_enable_cache:!0,gallery_initial_catid:""},g_temp={objCustomOptions:{},isAllItemsPreloaded:!1,isFreestyleMode:!1,lastWidth:0,lastHeigh:0,handleResize:null,isInited:!1,isPlayMode:!1,isPlayModePaused:!1,playTimePassed:0,playTimeLastStep:0,playHandle:"",playStepInterval:33,objProgress:null,isFakeFullscreen:!1,thumbsType:null,isYoutubePresent:!1,isVimeoPresent:!1,isHtml5VideoPresent:!1,isSoundCloudPresent:!1,isWistiaPresent:!1,resizeDelay:100,isRunFirstTime:!0,originalOptions:{},funcCustomHeight:null};this.onItemBigImageLoaded=function(e,t){if(!t)t=jQuery(this);var i=t.data("itemIndex"),n=g_arrItems[i];n.isBigImageLoaded=!0;var r=g_functions.getImageOriginalSize(t);n.imageWidth=r.width,n.imageHeight=r.height},this.checkFillImageSize=function(e,t){if(!t){var i=e.data("itemIndex");if(void 0===i)throw new Error("Wrong image given to gallery.checkFillImageSize");t=g_arrItems[i]}var n=g_functions.getImageOriginalSize(e);t.imageWidth=n.width,t.imageHeight=n.height},this.setFreestyleMode=function(){g_temp.isFreestyleMode=!0},this.attachThumbsPanel=function(e,t){g_temp.thumbsType=e,g_objThumbs=t},this.initSlider=function(e,i){if(!e)e={};e=jQuery.extend(g_temp.objCustomOptions,e),(g_objSlider=new UGSlider).init(t,e,i)},this.onGalleryMouseWheel=function(e,i,n,r){e.preventDefault(),i>0?t.prevItem():t.nextItem()},this.destroy=function(){if(g_objWrapper.off("dragstart"),g_objGallery.off(t.events.ITEM_IMAGE_UPDATED),g_objThumbs)switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).off(g_objThumbs.events.STRIP_MOVE);break;case"grid":jQuery(g_objThumbs).off(g_objThumbs.events.PANE_CHANGE)}if(g_objWrapper.off("mousewheel"),jQuery(window).off("resize"),g_functions.destroyFullScreenChangeEvent(),g_objSlider){jQuery(g_objSlider).off(g_objSlider.events.ITEM_CHANGED);var e=g_objSlider.getElement();e.off("mouseenter"),e.off("mouseleave"),g_objGallery.off(t.events.ENTER_FULLSCREEN),jQuery(g_objSlider).off(g_objSlider.events.ACTION_START),jQuery(g_objSlider).off(g_objSlider.events.ACTION_END),jQuery(g_objSlider).off(g_objSlider.events.CURRENTSLIDE_LOAD_END)}1==g_options.gallery_control_keyboard&&jQuery(document).off("keydown"),g_objTheme&&"function"==typeof g_objTheme.destroy&&g_objTheme.destroy(),g_objWrapper.html("")},this.getArrItems=function(){return g_arrItems},this.getObjects=function(){return{g_galleryID:g_galleryID,g_objWrapper:g_objWrapper,g_objThumbs:g_objThumbs,g_objSlider:g_objSlider,g_options:g_options,g_arrItems:g_arrItems,g_numItems:g_numItems}},this.getObjSlider=function(){return g_objSlider},this.getItem=function(e){if(0>e)throw new Error("item with index: "+e+" not found");if(e>=g_numItems)throw new Error("item with index: "+e+" not found");return g_arrItems[e]},this.getWidth=function(){return t.getSize().width},this.getHeight=function(){return t.getSize().height},this.getSize=function(){var e=g_functions.getElementSize(g_objWrapper);return e.orig_width=g_options.gallery_width,e.orig_height=g_options.gallery_height,e.orig_ratio=e.orig_width/e.orig_height,e},this.getGalleryID=function(){return g_galleryID.replace("#","")},this.getNextItem=function(e,t){"object"==typeof e&&(e=e.index);var i=e+1;if(!0!==t&&1==g_numItems)return null;if(i>=g_numItems){if(1!=g_options.gallery_carousel&&!0!==t)return null;i=0}return g_arrItems[i]},this.getPrevItem=function(e){"object"==typeof e&&(e=e.index);var t=e-1;if(0>t){if(1!=g_options.gallery_carousel&&!0!==forceCarousel)return null;t=g_numItems-1}return g_arrItems[t]},this.getSelectedItem=function(){return g_selectedItem},this.getSelectedItemIndex=function(){return g_selectedItemIndex},this.getNumItems=function(){return g_numItems},this.isLastItem=function(){return g_selectedItemIndex==g_numItems-1},this.isFirstItem=function(){return 0==g_selectedItemIndex},this.getOptions=function(){return g_options},this.getElement=function(){return g_objWrapper},this.___________SET_CONTROLS___________=function(){},this.setNextButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.nextItem)},this.setPrevButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.prevItem)},this.setFullScreenToggleButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnTap(e,t.toggleFullscreen),g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){e.addClass("ug-fullscreenmode")}),g_objGallery.on(t.events.EXIT_FULLSCREEN,function(){e.removeClass("ug-fullscreenmode")})},this.destroyFullscreenButton=function(e){g_functions.destroyButton(e),g_objGallery.off(t.events.ENTER_FULLSCREEN),g_objGallery.off(t.events.EXIT_FULLSCREEN)},this.setPlayButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.togglePlayMode),g_objGallery.on(t.events.START_PLAY,function(){e.addClass("ug-stop-mode")}),g_objGallery.on(t.events.STOP_PLAY,function(){e.removeClass("ug-stop-mode")})},this.destroyPlayButton=function(e){g_functions.destroyButton(e),g_objGallery.off(t.events.START_PLAY),g_objGallery.off(t.events.STOP_PLAY)},this.setProgressIndicator=function(e){g_temp.objProgress=e},this.setTextContainers=function(e,i){g_objGallery.on(t.events.ITEM_CHANGE,function(){var n=t.getSelectedItem();e.html(n.title),i.html(n.description)})},this.showDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").show()},this.hideDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").hide()},this.___________END_SET_CONTROLS___________=function(){},this.___________PLAY_MODE___________=function(){},this.startPlayMode=function(){if(g_temp.isPlayMode=!0,g_temp.isPlayModePaused=!1,g_temp.playTimePassed=0,g_temp.playTimeLastStep=jQuery.now(),g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval),g_temp.objProgress){var e=g_temp.objProgress.getElement();g_temp.objProgress.setProgress(0),e.show()}g_objGallery.trigger(t.events.START_PLAY),g_objSlider&&1==g_objSlider.isCurrentSlideLoadingImage()&&t.pausePlaying()},this.resetPlaying=function(){return 0==g_temp.isPlayMode||(g_temp.playTimePassed=0,void(g_temp.playTimeLastStep=jQuery.now()))},this.pausePlaying=function(){return 1==g_temp.isPlayModePaused||(g_temp.isPlayModePaused=!0,clearInterval(g_temp.playHandle),void g_objGallery.trigger(t.events.PAUSE_PLAYING))},this.continuePlaying=function(){return 0==g_temp.isPlayModePaused||(g_temp.isPlayModePaused=!1,g_temp.playTimeLastStep=jQuery.now(),void(g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval)))},this.stopPlayMode=function(){(g_temp.isPlayMode=!1,clearInterval(g_temp.playHandle),g_temp.playTimePassed=0,g_temp.objProgress)&&g_temp.objProgress.getElement().hide();g_objGallery.trigger(t.events.STOP_PLAY)},this.isPlayMode=function(){return g_temp.isPlayMode},this.togglePlayMode=function(){0==t.isPlayMode()?t.startPlayMode():t.stopPlayMode()},this.___________GENERAL_EXTERNAL___________=function(){},this.shuffleItems=function(){for(var e in g_arrItems=g_functions.arrayShuffle(g_arrItems))g_arrItems[e].index=parseInt(e)},this.setOptions=function(e){g_options=jQuery.extend(g_options,e)},this.selectItem=function(e,i){"number"==typeof e&&(e=t.getItem(e));var n=e.index;if(n==g_selectedItemIndex)return!0;(unselectSeletedItem(),g_selectedItem=e,g_selectedItemIndex=n,g_objGallery.trigger(t.events.ITEM_CHANGE,[e,i]),1==g_temp.isPlayMode)&&(t.resetPlaying(),1==g_objSlider.isCurrentSlideLoadingImage()&&t.pausePlaying())},this.nextItem=function(){var e=g_selectedItemIndex+1;return 0==g_numItems||(0==g_options.gallery_carousel&&e>=g_numItems||(e>=g_numItems&&(e=0),void t.selectItem(e,"next")))},this.prevItem=function(){var e=g_selectedItemIndex-1;return-1==g_selectedItemIndex&&(e=0),0==g_numItems||(0==g_options.gallery_carousel&&0>e||(0>e&&(e=g_numItems-1),void t.selectItem(e,"prev")))},this.isFullScreen=function(){return 1==g_temp.isFakeFullscreen||1==g_functions.isFullScreen()},this.isFakeFullscreen=function(){return g_temp.isFakeFullscreen},this.toFullScreen=function(){g_functions.setGlobalData("fullscreenID",g_galleryID);var e=g_objWrapper.get(0);0==g_functions.toFullscreen(e)&&toFakeFullScreen()},this.exitFullScreen=function(){1==g_temp.isFakeFullscreen?exitFakeFullscreen():g_functions.exitFullscreen()},this.toggleFullscreen=function(){0==t.isFullScreen()?t.toFullScreen():t.exitFullScreen()},this.resize=function(e,t,i){g_objWrapper.css("width","auto"),g_objWrapper.css("max-width",e+"px"),t&&g_objWrapper.height(t),i||!0===i||onGalleryResized()},this.setSizeClass=function(e,i){if(!e)e=g_objWrapper;if(!i)i=t.getSize().width;if(0==i)i=jQuery(window).width();var n="";return 480>=i?n="ug-under-480":780>=i?n="ug-under-780":960>i&&(n="ug-under-960"),1==e.hasClass(n)||(removeAllSizeClasses(e),void(""!=n&&e.addClass(n)))},this.isMobileMode=function(){return!!g_objWrapper.hasClass("ug-under-480")},this.isSmallWindow=function(){var e=jQuery(window).width();return!e||480>=e},this.isGalleryVisible=function(){return g_objWrapper.is(":visible")},this.changeItems=function(e,t){if(!e)e="noitems";runGallery(g_galleryID,"nochange",e,t)},this.addItems=function(e){if(!e||0==e.length)return!1;var t=g_objWrapper.children(".ug-newitems-wrapper");if(0==t.length&&g_objWrapper.append("<div class='ug-newitems-wrapper' style='display:none'></div>"),(t=g_objWrapper.children(".ug-newitems-wrapper")).append(e),fillItemsArray(jQuery(t.children()),!0),loadAPIs(),!g_objTheme||"function"!=typeof g_objTheme.addItems)throw new Error("addItems function not found in the theme");t.remove(),g_objTheme.addItems()},this.getNewAddedItemsIndexes=function(){var e=[];return jQuery.each(g_arrItems,function(t,i){1==i.isNewAdded&&e.push(t)}),e},this.showErrorMessageReplaceGallery=function(e){showErrorMessage(e)},this.setFuncCustomHeight=function(e){g_temp.funcCustomHeight=e},this.__________EXTERNAL_EVENTS_______=function(){},this.triggerEvent=function(e,t){t?("array"!=jQuery.type(t)&&(t=[t]),g_objGallery.trigger(e,t)):g_objGallery.trigger(e)},this.onEvent=function(e,t){g_objGallery.on(e,t)},this.destroyEvent=function(e){g_objGallery.off(e)},this.__________AJAX_REQUEST_______=function(){},this.ajaxRequest=function(e,t,i,n){if(!i||"function"!=typeof i)throw new Error("ajaxRequest error: success function should be passed");var r=g_options.gallery_urlajax;if(!r||""==r)throw new Error("ajaxRequest error: Ajax url don't passed");if(void 0===t)t={};var o={action:"unitegallery_ajax_action",client_action:e,galleryID:g_galleryID,data:t};jQuery.ajax({type:"post",url:g_options.gallery_urlajax,dataType:"json",data:o,success:function(e){if(!e)throw new Error("Empty ajax response!");if(-1==e||0===e)throw new Error("ajax error!!!");if(void 0===e.success)throw new Error("ajax error!!!");return 0==e.success?(showErrorMessage(e.message,"ajax error"),!1):void i(e)},error:function(e,t,i){console.log("Ajax Error!!! "+t),responseText=e.responseText,n&&"function"==typeof n?n(responseText):trace(responseText)}})},this.requestNewItems=function(e,i,n){var r=g_options.gallery_enable_cache;if(n||(n=e),1==i&&(r=!1),1==r&&g_objCache.hasOwnProperty(n)){var o=g_objCache[n];t.changeItems(o,n)}else g_objGallery.trigger(t.events.GALLERY_BEFORE_REQUEST_ITEMS),t.ajaxRequest("front_get_cat_items",{catid:e},function(e){var i=e.html;t.changeItems(i,n)})},this.run=function(e,t){if(g_options.gallery_debug_errors,t&&t.hasOwnProperty("gallery_debug_errors")&&(g_options.gallery_debug_errors=t.gallery_debug_errors),1==g_options.gallery_debug_errors)try{runGallery(e,t)}catch(e){if("object"==typeof e){var i=e.message,n=e.lineNumber,r=e.fileName;e.stack,i+=" <br><br> in file: "+r,i+=" <b> line "+n+"</b>",trace(e)}else i=e;showErrorMessage(i=i.replace("Error:",""))}else runGallery(e,t)}}function UGLightbox(){function e(e,i){U=e,N=jQuery(e),q=jQuery.extend(q,J),q=jQuery.extend(q,i),K.originalOptions=jQuery.extend({},q),"compact"==q.lightbox_type&&(K.isCompact=!0,q=jQuery.extend(q,$),q=jQuery.extend(q,i)),t(),1==K.putSlider?(U.initSlider(q,"lightbox"),g_objects=e.getObjects(),V=g_objects.g_objSlider):V=null,1==q.lightbox_show_textpanel?Z.init(U,q,"lightbox"):Z=null}function t(){1==K.isCompact&&1==q.lightbox_show_textpanel&&(q.lightbox_slider_image_padding_bottom=K.initTextPanelHeight),1==K.isCompact&&"inside"==q.lightbox_arrows_position&&(K.isArrowsInside=!0),1==K.isArrowsInside&&0==q.lightbox_arrows_inside_alwayson&&(K.isArrowsOnHoverMode=!0),0==q.lightbox_show_textpanel&&(K.isTopPanelEnabled=!1,K.topPanelHeight=0,q.lightbox_slider_image_padding_top=0)}function i(e){if(!V)return!0;var t={slider_image_padding_top:e};V.setOptions(t),V.refreshSlideItems()}function n(e){if(!B)return!1;if(!Z)return!1;var t=B.height();if(0==t)return!1;if(0==B.is(":visible"))return!1;var n=t,r=Z.getSize().height;t!=K.topPanelHeight&&(n=K.topPanelHeight),r>n&&(n=r),t!=n&&(B.height(n),V&&0==V.isAnimating()&&i(n))}function r(e){var t={},i=q.lightbox_textpanel_width;i>e.width-47-40?(t.textpanel_padding_left=47,t.textpanel_padding_right=40,t.textpanel_title_text_align="center",t.textpanel_desc_text_align="center"):(t.textpanel_padding_left=Math.floor((e.width-i)/2),t.textpanel_padding_right=t.textpanel_padding_left,t.textpanel_title_text_align="left",t.textpanel_desc_text_align="left",q.lightbox_textpanel_title_text_align&&(t.textpanel_title_text_align=q.lightbox_textpanel_desc_text_align),q.lightbox_textpanel_desc_text_align&&(t.textpanel_desc_text_align=q.lightbox_textpanel_desc_text_align)),Z.setOptions(t),Z.refresh(!0,!0),n(),Z.positionPanel()}function o(e){if(0==K.isOpened)return!1;if(!Z)return!1;if(!V)return!1;var t=X.getElementSize(k),i=Z.getSize();if(0==i.width||i.height>120)return!1;if(!e){var n=V.getSlideImage();e=X.getElementSize(n)}if(0==e.height||0==e.width)return!1;if(e.bottom+i.height<t.height)return!1;var r=V.getOptions(),o=i.height;if(o!=r.slider_image_padding_bottom){var a={slider_image_padding_bottom:o};if(0==V.isAnimating())return V.setOptions(a),V.refreshSlideItems(),!0}return!1}function a(e){var t=(X.getElementSize(k),V.getSlideImage()),i=X.getElementSize(t);if(0==i.width)return!1;K.textPanelLeft=i.left,K.textPanelTop=i.bottom;var n=i.width;if(W){var r=X.getElementSize(W);n-=r.width;var a=i.right-r.width;X.placeElement(W,a,K.textPanelTop)}Z&&(Z.show(),Z.refresh(!0,!0,n),function(e,t){if(!e){var i=V.getSlideImage();e=X.getElementSize(i)}K.textPanelTop=e.bottom,!0===t&&Z.positionPanel(K.textPanelTop,K.textPanelLeft)}(i)),0==o(i)&&(K.positionFrom="handleCompactTextpanelSizes",Z&&(Z.positionPanel(K.textPanelTop,K.textPanelLeft),!0===e&&(e(),y())))}function s(){return 0==V.isCurrentSlideType("image")||1==V.isCurrentImageInPlace()}function l(e,t){if(0==K.isArrowsInside)return!1;if(!G)return!1;var i=s();if(G.show(),D.show(),K.positionFrom="positionArrowsInside",1==K.isArrowsOnHoverMode&&1==i&&0==h()&&p(!0),0==i)var n=X.getElementRelativePos(G,"left",q.lightbox_arrows_offset),r=X.getElementRelativePos(G,"middle"),o=X.getElementRelativePos(D,"right",q.lightbox_arrows_offset),a=r;else{var l=V.getSlideImage(),u=X.getElementSize(l);n=(X.getElementSize(V.getElement()),X.getElementRelativePos(G,"left",0,l)+u.left+q.lightbox_arrows_inside_offset),r=X.getElementRelativePos(G,"middle",0,l)+u.top,o=X.getElementRelativePos(G,"right",0,l)+u.left-q.lightbox_arrows_inside_offset,a=r}if(!0===t){var d={left:n,top:r},_={left:o,top:a};G.stop().animate(d,{duration:K.fadeDuration}),D.stop().animate(_,{duration:K.fadeDuration})}else G.stop(),D.stop(),X.placeElement(G,n,r),X.placeElement(D,o,a);1==e&&m(t)}function u(e,t){K.positionFrom=null;var i=s(),n=X.getElementRelativePos(Q,"right",2,k);if(0==i)var r=2,o=n;else{var a=V.getSlideImage(),l=X.getElementSize(a),u=X.getElementSize(V.getElement()),d=X.getElementSize(Q);u.top==u.height&&(u.top=0);o=u.left+l.right-d.width/2+q.lightbox_compact_closebutton_offsetx;2>(r=u.top+l.top-d.height/2-q.lightbox_compact_closebutton_offsety)&&(r=2),o>n&&(o=n)}if(!0===t){var _={left:o,top:r};Q.stop().animate(_,{duration:K.fadeDuration})}else Q.stop(),X.placeElement(Q,o,r);!0===e&&function(e){!0!==e&&Q.stop(),Q.fadeTo(K.fadeDuration,1)}(t)}function d(){Q&&Q.stop().fadeTo(K.fadeDuration,0),g(),c(),K.positionFrom="hideCompactElements",1==K.isArrowsInside&&p()}function _(){var e=X.getElementSize(k);B&&X.setElementSizeAndPosition(B,0,0,e.width,K.topPanelHeight),G&&0==K.isArrowsInside&&(1==q.lightbox_hide_arrows_onvideoplay&&(G.show(),D.show()),X.placeElement(G,"left","middle",q.lightbox_arrows_offset),X.placeElement(D,"right","middle",q.lightbox_arrows_offset)),0==K.isCompact&&X.placeElement(Q,"right","top",2,2),Z&&(K.positionFrom="positionElements",0==K.isCompact?r(e):(b(),y()));var t=e.width,i=e.height;if(V){if(B){var n={slider_image_padding_top:B.height()};V.setOptions(n)}V.setSize(t,i),V.setPosition(0,0)}}function g(){Z&&Z.getElement().stop().fadeTo(K.fadeDuration,0)}function c(){W&&W.stop().fadeTo(K.fadeDuration,0)}function h(){if(!K.lastMouseX)return!0;var e={pageX:K.lastMouseX,pageY:K.lastMouseY};return V.isMouseInsideSlideImage(e)}function p(e,t){return!!G&&(1==K.isArrowsOnHoverMode&&!1===t?(h(),!0):void(!0===e?(G.stop().fadeTo(0,0),D.stop().fadeTo(0,0)):(G.stop().fadeTo(K.fadeDuration,0),D.stop().fadeTo(K.fadeDuration,0))))}function m(e,t){return!!G&&(1==K.isArrowsOnHoverMode&&!0!==t&&1==s()||(1==V.isSwiping()||(!0!==e&&(G.stop(),D.stop()),G.fadeTo(K.fadeDuration,1),void D.fadeTo(K.fadeDuration,1))))}function f(e){if(!Z)return!1;if(!e)e=V.getCurrentItem();Z.setTextPlain(e.title,e.description)}function v(e){if(!W)return!1;if(!e)e=V.getCurrentItem();var t=U.getNumItems(),i=e.index+1;W.html(i+" / "+t)}function b(){return!!Z&&void Z.getElement().show().stop().fadeTo(K.fadeDuration,1)}function y(){W&&W.stop().fadeTo(K.fadeDuration,1)}function I(){return 0==K.isCompact||void d()}function w(){if(0==K.isCompact)return!0;(K.positionFrom="onZoomChange",u(!1,!0),l(!1,!0),1==K.isCompact)&&(0==(V.isCurrentSlideType("image")&&1==V.isCurrentImageInPlace())?(g(),c()):(K.positionFrom="onZoomChange",b(),y()))}function E(){if(0==K.isCompact)return!0;K.positionFrom="onSliderAfterReturn",u(!0),l(!0),0==o()&&a(),b(),y()}function T(e,t){return t=jQuery(t),0==K.isCompact||(0==V.isSlideCurrent(t)||(K.positionFrom="onSliderAfterPutImage",u(!0),l(!0),void a()))}function S(){var e=V.getOptions().slider_image_padding_top;if(B){var t=B.height();t!=e&&i(t)}if(1==K.isCompact){if(f(),v(),K.positionFrom="onSliderTransitionEnd",u(!0),l(!0),0==V.isSlideActionActive())0==o()&&a();b(),y()}}function P(e,t){0==K.isCompact?(W&&v(t),Z&&(f(t),0==K.isRightNowOpened&&(Z.positionElements(!1),n(),Z.positionPanel()))):0==V.isAnimating()&&(Z&&f(t),W&&v(t)),0==K.isSliderChangedOnce&&(K.isSliderChangedOnce=!0,Y.trigger(F.events.LIGHTBOX_INIT))}function x(e,t){if("image"!=V.getSlideType()&&0==K.isCompact&&V.isSlideActionActive())return!0;if(1==V.isPreloading())return F.close("slider"),!0;1==q.lightbox_close_on_emptyspace&&(0==V.isMouseInsideSlideImage(t)&&F.close("slider_inside"))}function j(){_()}function C(){B?!!B&&B.hide():W&&W.hide(),G&&1==q.lightbox_hide_arrows_onvideoplay&&(G.hide(),D.hide())}function A(){B?(!!B&&B.show(),n()):W&&W.show(),G&&1==q.lightbox_hide_arrows_onvideoplay&&(G.show(),D.show())}function M(e,t,i){var n=!1;switch(t){case 27:1==K.isOpened&&F.close("keypress");break;case 38:case 40:case 33:case 34:n=!0}1==K.isOpened&&1==n&&i.preventDefault()}function O(){1==K.isArrowsOnHoverMode&&m(!1,!0)}function z(e){K.positionFrom="hideCompactElements",1==K.isArrowsOnHoverMode&&1==s()&&p(!1,!0)}function L(e){K.lastMouseX=e.pageX,K.lastMouseY=e.pageY,1==(!G||0==G.is(":visible")||1!=G.css("opacity"))&&h()&&0==V.isAnimating()&&(K.positionFrom="onMouseMove",G&&0==G.is(":animated")&&m(!1,!0))}function H(e,t,i,n){if(0==K.isOpened)return!0;switch(q.gallery_mousewheel_role){default:case"zoom":"image"!=V.getSlideType()&&e.preventDefault();break;case"none":e.preventDefault();break;case"advance":U.onGalleryMouseWheel(e,t,i,n)}}var N,k,R,G,D,Q,W,B,F=this,Y=jQuery(this),U=new UniteGalleryMain,V=new UGSlider,X=new UGFunctions,Z=new UGTextPanel,q={lightbox_type:"wide",lightbox_show_textpanel:!0,lightbox_textpanel_width:550,lightbox_hide_arrows_onvideoplay:!0,lightbox_arrows_position:"sides",lightbox_arrows_offset:10,lightbox_arrows_inside_offset:10,lightbox_arrows_inside_alwayson:!1,lightbox_overlay_color:null,lightbox_overlay_opacity:1,lightbox_top_panel_opacity:null,lightbox_show_numbers:!0,lightbox_numbers_size:null,lightbox_numbers_color:null,lightbox_numbers_padding_top:null,lightbox_numbers_padding_right:null,lightbox_compact_closebutton_offsetx:1,lightbox_compact_closebutton_offsety:1,lightbox_close_on_emptyspace:!0};this.events={LIGHTBOX_INIT:"lightbox_init"};var K={topPanelHeight:44,initTextPanelHeight:26,isOpened:!1,isRightNowOpened:!1,putSlider:!0,isCompact:!1,fadeDuration:300,positionFrom:null,textPanelTop:null,textPanelLeft:null,isArrowsInside:!1,isArrowsOnHoverMode:!1,lastMouseX:null,lastMouseY:null,originalOptions:null,isSliderChangedOnce:!1,isTopPanelEnabled:!0},J={lightbox_slider_controls_always_on:!0,lightbox_slider_enable_bullets:!1,lightbox_slider_enable_arrows:!1,lightbox_slider_enable_progress_indicator:!1,lightbox_slider_enable_play_button:!1,lightbox_slider_enable_fullscreen_button:!1,lightbox_slider_enable_zoom_panel:!1,lightbox_slider_enable_text_panel:!1,lightbox_slider_scale_mode_media:"down",lightbox_slider_scale_mode:"down",lightbox_slider_loader_type:3,lightbox_slider_loader_color:"black",lightbox_slider_transition:"fade",lightbox_slider_image_padding_top:K.topPanelHeight,lightbox_slider_image_padding_bottom:0,lightbox_slider_video_padding_top:0,lightbox_slider_video_padding_bottom:0,lightbox_textpanel_align:"middle",lightbox_textpanel_padding_top:5,lightbox_textpanel_padding_bottom:5,slider_video_constantsize:!1,lightbox_slider_image_border:!1,lightbox_textpanel_enable_title:!0,lightbox_textpanel_enable_description:!1,lightbox_textpanel_desc_style_as_title:!0,lightbox_textpanel_enable_bg:!1,video_enable_closebutton:!1,lightbox_slider_video_enable_closebutton:!1,video_youtube_showinfo:!1,lightbox_slider_enable_links:!1},$={lightbox_overlay_opacity:.6,lightbox_slider_image_border:!0,lightbox_slider_image_shadow:!0,lightbox_slider_image_padding_top:30,lightbox_slider_image_padding_bottom:30,slider_video_constantsize:!0,lightbox_textpanel_align:"bottom",lightbox_textpanel_title_text_align:"left",lightbox_textpanel_desc_text_align:"left",lightbox_textpanel_padding_left:10,lightbox_textpanel_padding_right:10};this.destroy=function(){if(jQuery(document).unbind("mousemove"),R.off("touchstart"),R.off("touchend"),Q.off("click"),N.off(U.events.ITEM_CHANGE),V){jQuery(V).off(V.events.TRANSITION_END),jQuery(V).off(V.events.CLICK),jQuery(V).off(V.events.START_DRAG),jQuery(V).off(V.events.TRANSITION_START),jQuery(V).off(V.events.AFTER_DRAG_CHANGE),jQuery(V).off(V.events.AFTER_RETURN);var e=V.getVideoObject();jQuery(e).off(e.events.PLAY_START),jQuery(e).off(e.events.PLAY_STOP),jQuery(V).on(V.events.IMAGE_MOUSEENTER,O),jQuery(V).on(V.events.IMAGE_MOUSELEAVE,z),V.destroy()}jQuery(window).unbind("resize"),N.off(U.events.GALLERY_KEYPRESS,M),k.off("mousewheel"),k.remove()},this.open=function(e){var t=U.getItem(e);(K.isOpened=!0,K.isRightNowOpened=!0,setTimeout(function(){K.isRightNowOpened=!1},100),V&&V.setItem(t,"lightbox_open"),Z&&Z.setTextPlain(t.title,t.description),R.stop().fadeTo(0,0),k.show(),k.fadeTo(0,1),R.stop().fadeTo(K.fadeDuration,q.lightbox_overlay_opacity),_(),1==K.isCompact)&&(1==V.isPreloading()?(Q&&Q.hide(),G&&1==K.isArrowsInside&&(G.hide(),D.hide()),W&&W.hide(),Z&&Z.hide()):1==K.isArrowsInside&&(G.hide(),D.hide()));V&&V.startSlideAction(),N.trigger(U.events.OPEN_LIGHTBOX,t)},this.close=function(e){K.isOpened=!1,1==K.isCompact&&d(),V&&V.stopSlideAction(),"image"!=V.getSlideType()?k.hide():k.fadeTo(K.fadeDuration,0,function(){k.hide()}),N.trigger(U.events.CLOSE_LIGHTBOX)},this.init=function(t,i){e(t,i)},this.putHtml=function(){U.isSmallWindow()&&1==K.isCompact&&(K.isCompact=!1,t(),K.isArrowsInside=!1,K.isArrowsOnHoverMode=!1,(q=jQuery.extend({},K.originalOptions)).lightbox_arrows_position="sides",V.setOptions(q)),function(){var e="",t="";1==K.isCompact&&(t=" ug-lightbox-compact"),e+="<div class='ug-gallery-wrapper ug-lightbox"+t+"'>",e+="<div class='ug-lightbox-overlay'></div>",0==K.isCompact&&K.isTopPanelEnabled?(e+="<div class='ug-lightbox-top-panel'>",e+="<div class='ug-lightbox-top-panel-overlay'></div>",q.lightbox_show_numbers&&(e+="<div class='ug-lightbox-numbers'></div>"),e+="</div>"):q.lightbox_show_numbers&&(e+="<div class='ug-lightbox-numbers'></div>"),e+="<div class='ug-lightbox-button-close'></div>",e+="<div class='ug-lightbox-arrow-left'></div>",e+="<div class='ug-lightbox-arrow-right'></div>",e+="</div>",k=jQuery(e),jQuery("body").append(k),V&&V.setHtml(k),R=k.children(".ug-lightbox-overlay"),0==K.isCompact&&1==K.isTopPanelEnabled&&0==(B=k.children(".ug-lightbox-top-panel")).length&&(B=null),Q=k.find(".ug-lightbox-button-close"),q.lightbox_show_numbers&&(W=k.find(".ug-lightbox-numbers")),G=k.children(".ug-lightbox-arrow-left"),D=k.children(".ug-lightbox-arrow-right"),Z&&(B?Z.appendHTML(B):Z.appendHTML(k))}()},this.run=function(){(function(){if(null!==q.lightbox_overlay_color&&R.css("background-color",q.lightbox_overlay_color),null!==q.lightbox_overlay_opacity&&R.fadeTo(0,q.lightbox_overlay_opacity),B&&null!==q.lightbox_top_panel_opacity&&B.children(".ug-lightbox-top-panel-overlay").fadeTo(0,q.lightbox_top_panel_opacity),W){var e={};null!==q.lightbox_numbers_size&&(e["font-size"]=q.lightbox_numbers_size+"px"),q.lightbox_numbers_color&&(e.color=q.lightbox_numbers_color),null!==q.lightbox_numbers_padding_right&&(e["padding-right"]=q.lightbox_numbers_padding_right+"px"),null!==q.lightbox_numbers_padding_top&&(e["padding-top"]=q.lightbox_numbers_padding_top+"px"),W.css(e)}})(),V&&V.run(),function(){if(R.on("touchstart",function(e){e.preventDefault()}),R.on("touchend",function(e){F.close("overlay")}),X.addClassOnHover(D,"ug-arrow-hover"),X.addClassOnHover(G,"ug-arrow-hover"),X.addClassOnHover(Q),U.setNextButton(D),U.setPrevButton(G),Q.click(function(){F.close("button")}),N.on(U.events.ITEM_CHANGE,P),V){jQuery(V).on(V.events.TRANSITION_END,S),jQuery(V).on(V.events.CLICK,x);var e=V.getVideoObject();jQuery(e).on(e.events.PLAY_START,C),jQuery(e).on(e.events.PLAY_STOP,A),jQuery(V).on(V.events.START_DRAG,I),jQuery(V).on(V.events.TRANSITION_START,I),jQuery(V).on(V.events.AFTER_DRAG_CHANGE,E),jQuery(V).on(V.events.AFTER_RETURN,E),jQuery(V).on(V.events.AFTER_PUT_IMAGE,T),jQuery(V).on(V.events.ZOOM_CHANGE,w),jQuery(V).on(V.events.IMAGE_MOUSEENTER,O),jQuery(V).on(V.events.IMAGE_MOUSELEAVE,z)}jQuery(window).resize(function(){return 0==K.isOpened||void X.whenContiniousEventOver("lightbox_resize",j,100)}),N.on(U.events.GALLERY_KEYPRESS,M),1==K.isArrowsOnHoverMode&&jQuery(document).bind("mousemove",L),k.on("mousewheel",H)}()}}function UGCarousel(){function e(e,t){if(!t)t=H.initTileHeight/H.initTileWidth*e;H.tileWidth=e;var i={tile_width:e,tile_height:t};O.setOptions(i),L.tile_width=e,L.tile_height=t,O.resizeAllTiles(e),d(!0)}function t(){if(null===H.carouselMaxWidth)throw new Error("The carousel width not set");if(H.tileWidth<H.initTileWidth){(i=H.carouselMaxWidth-2*L.carousel_padding)>H.initTileWidth&&(i=H.initTileWidth),e(i);var t=M.getNumItemsInSpace(H.carouselMaxWidth,i,L.carousel_space_between_tiles)}else{var i;if(0>=(t=M.getNumItemsInSpace(H.carouselMaxWidth,H.tileWidth,L.carousel_space_between_tiles)))t=1,e(i=H.carouselMaxWidth-2*L.carousel_padding)}var n=M.getSpaceByNumItems(t,H.tileWidth,L.carousel_space_between_tiles);n+=2*L.carousel_padding,P.width(n),1==H.isFirstTimeRun?(O.initEvents(),P.bind("mousedown touchstart",v),jQuery("body").bind("mousemove touchmove",b),jQuery(window).add("body").bind("mouseup touchend",y),P.hover(I,w),O.run(),jQuery.each(S,function(e,t){t.objThumbWrapper.data("index",e),T.trigger(H.eventSizeChange,[t.objThumbWrapper,!0]),t.objTileOriginal=t.objThumbWrapper.clone(!0,!0)}),d(!0),1==L.carousel_autoplay&&j.startAutoplay()):(1==L.carousel_autoplay&&j.pauseAutoplay(),h(0,!1),1==L.carousel_autoplay&&j.startAutoplay()),M.placeElement(x,0,L.carousel_padding),m(),H.isFirstTimeRun=!1}function i(){return M.getElementSize(x).left}function n(e){return M.getMousePosition(e).pageX}function r(){return x.children(".ug-thumb-wrapper")}function o(e){return M.getNumItemsInSpace(e,H.tileWidth,L.carousel_space_between_tiles)}function a(){return r().length}function s(e){_(e);var t=r();return jQuery(t[e])}function l(){var e=-i();return H.sideSpace-e}function u(){return o(M.getElementSize(P).width)}function d(e){if(!e)e=!1;var t,i=r(),n=0,o=0;return jQuery.each(i,function(e,r){r=jQuery(r),M.placeElement(r,n,0);var a=M.getElementSize(r);n+=a.width+L.carousel_space_between_tiles,o=Math.max(o,a.height),e==i.length-1&&(t=a.right)}),x.width(t),o+=2*L.carousel_padding,!0===e&&(x.height(o),P.height(o)),h(H.numCurrent,!1),t}function _(e){if(e>r().length-1)throw new Error("Wrogn tile number: "+e)}function g(e,t){if("left"==t)var i=x.children(".ug-thumb-wrapper").first();else i=x.children(".ug-thumb-wrapper").last();var n=function(e,t,i){var n=e.data("index");if(null==n)throw new Error("every tile should have index!");for(var r=[],o=0;t>o;o++){if("prev"==i)var a=A.getPrevItem(n,!0);else a=A.getNextItem(n,!0);if(!a)throw new Error("the item to add is empty");var s=a.objTileOriginal.clone(!0,!0);n=a.index,s.addClass("cloned"),r.push(s)}return r}(i,e,"left"==t?"prev":"next");jQuery.each(n,function(e,i){"left"==t?x.prepend(i):x.append(i),T.trigger(H.eventSizeChange,i),O.loadTileImage(i)})}function c(e,t){_(n);for(var i=r(),n=i.length,o=0;e>o;o++)"left"==t?jQuery(i[o]).remove():jQuery(i[n-1-o]).remove()}function h(e,t,i){if(void 0===t){t=!0;if(x.is(":animated"))return!0}var n=s(e),r={left:-M.getElementSize(n).left+L.carousel_padding+"px"};if(!0===t){var o=L.carousel_scroll_duration,a=L.carousel_scroll_easing;!0===i&&(o=H.scrollShortDuration,a=H.scrollShortEasing),x.stop(!0).animate(r,{duration:o,easing:a,queue:!1,complete:function(){H.numCurrent=e,m()}})}else H.numCurrent=e,x.css(r)}function p(){h(function(){var e=-i(),t=o(e),n=M.getElementSize(s(t)).left,r=M.getElementSize(s(t+1)).left;return Math.abs(n-e)<Math.abs(r-e)?t:t+1}(),!0,!0)}function m(){var e=l(),t=function(){var e=M.getElementSize(P),t=M.getElementSize(x),i=t.width-e.width+t.left;return H.sideSpace-i}(),i=0,n=0,r=0,s=0,u=a();if(e>H.spaceActionSize)g(i=o(e),"left"),H.numCurrent+=i;else if(e<-H.spaceActionSize){c(r=o(Math.abs(e)),"left"),H.numCurrent-=r}if(t>H.spaceActionSize?g(n=o(t),"right"):t<-H.spaceActionSize&&c(s=o(Math.abs(t)),"right"),s>u)throw new Error("Can't remove more then num tiles");var _=!1;return(i||n||r||s)&&(d(),_=!0),_}function f(){"left"==L.carousel_autoplay_direction?j.scrollRight(1):j.scrollLeft(1)}function v(e){return 1==H.touchActive||(H.touchActive=!0,j.pauseAutoplay(),H.startTime=jQuery.now(),H.startMousePos=n(e),H.startInnerPos=i(),H.lastTime=H.startTime,H.lastMousePos=H.startMousePos,void M.storeEventData(e,H.storedEventID))}function b(e){if(0==H.touchActive)return!0;M.updateStoredEventData(e,H.storedEventID),e.preventDefault();var t=null;if(1==L.carousel_vertical_scroll_ondrag&&(t=M.handleScrollTop(H.storedEventID)),"vert"===t)return!0;H.lastMousePos=n(e);var i=H.lastMousePos-H.startMousePos,r=H.startInnerPos+i,o=i>0?"prev":"next";r>0&&"prev"==o&&(r/=3),-M.getElementSize(x).width>r&&"next"==o&&(r=H.startInnerPos+i/3),function(e){var t={left:e+"px"};x.css(t)}(r)}function y(e){return 0==H.touchActive||(H.touchActive=!1,p(),void j.unpauseAutoplay())}function I(e){return 0==L.carousel_autoplay_pause_onhover||void(1==H.isPlayMode&&0==H.isPaused&&j.pauseAutoplay())}function w(e){return 0==L.carousel_autoplay_pause_onhover||void j.unpauseAutoplay()}function E(){var e=H.lastTime-H.startTime,t=Math.abs(H.lastMousePos-H.startMousePos);return!(e>300)&&!(t>30)}var T,S,P,x,j=this,C=jQuery(this),A=new UniteGalleryMain,M=new UGFunctions,O=new UGTileDesign,z=new UGThumbsGeneral,L={carousel_padding:8,carousel_space_between_tiles:20,carousel_navigation_numtiles:3,carousel_scroll_duration:500,carousel_scroll_easing:"easeOutCubic",carousel_autoplay:!0,carousel_autoplay_timeout:3e3,carousel_autoplay_direction:"right",carousel_autoplay_pause_onhover:!0,carousel_vertical_scroll_ondrag:!1};this.events={START_PLAY:"carousel_start_play",PAUSE_PLAY:"carousel_pause_play",STOP_PLAY:"carousel_stop_play"};var H={eventSizeChange:"thumb_size_change",isFirstTimeRun:!0,carouselMaxWidth:null,tileWidth:0,initTileWidth:0,initTileHeight:0,sideSpace:1500,spaceActionSize:500,numCurrent:0,touchActive:!1,startInnerPos:0,lastTime:0,startTime:0,startMousePos:0,lastMousePos:0,scrollShortDuration:200,scrollShortEasing:"easeOutQuad",handle:null,isPlayMode:!1,isPaused:!1,storedEventID:"carousel"};this.startAutoplay=function(){H.isPlayMode=!0,H.isPaused=!1,C.trigger(j.events.START_PLAY),H.handle&&clearInterval(H.handle),H.handle=setInterval(f,L.carousel_autoplay_timeout)},this.unpauseAutoplay=function(){return 0==H.isPlayMode||(0==H.isPaused||void j.startAutoplay())},this.pauseAutoplay=function(){return 0==H.isPlayMode||(H.isPaused=!0,H.handle&&clearInterval(H.handle),void C.trigger(j.events.PAUSE_PLAY))},this.stopAutoplay=function(){return 0==H.isPlayMode||(H.isPaused=!1,H.isPlayMode=!1,H.handle&&clearInterval(H.handle),void C.trigger(j.events.STOP_PLAY))},this.destroy=function(){H.handle&&clearInterval(H.handle),C.off(j.events.START_PLAY),C.off(j.events.STOP_PLAY),P.unbind("mousedown"),P.unbind("touchstart"),jQuery("body").unbind("mousemove"),jQuery("body").unbind("touchmove"),jQuery(window).add("body").unbind("mouseup").unbind("touchend"),P.off("mouseenter").off("mouseleave"),O.destroy()},this.init=function(e,t,i){i&&this.setMaxWidth(i),function(e,t){g_objects=e.getObjects(),A=e,jQuery(e),T=g_objects.g_objWrapper,S=g_objects.g_arrItems,L=jQuery.extend(L,t),O.setFixedMode(),O.setApproveClickFunction(E),O.init(e,L),z=O.getObjThumbs(),L=O.getOptions(),H.initTileWidth=L.tile_width,H.initTileHeight=L.tile_height,H.tileWidth=L.tile_width}(e,t)},this.setMaxWidth=function(e){H.carouselMaxWidth=e},this.setHtml=function(e){!function(e){e||(e=T);T.append("<div class='ug-carousel-wrapper'><div class='ug-carousel-inner'></div></div>"),P=T.children(".ug-carousel-wrapper"),x=P.children(".ug-carousel-inner"),O.setHtml(x),z.getThumbs().fadeTo(0,1)}(e)},this.getElement=function(){return P},this.getObjTileDesign=function(){return O},this.getEstimatedHeight=function(){return L.tile_height+2*L.carousel_padding},this.run=function(){t()},this.scrollRight=function(e){if(!e||"object"==typeof e)e=L.carousel_navigation_numtiles;var t=u();e>t&&(e=t);var i=H.numCurrent-e;0>=i&&(i=0),h(i)},this.scrollLeft=function(e){if(!e||"object"==typeof e)e=L.carousel_navigation_numtiles;var t=u();e>t&&(e=t);var i=a(),n=H.numCurrent+e;n>=i&&(n=i-1),h(n)},this.setScrollLeftButton=function(e){M.setButtonMobileReady(e),M.setButtonOnClick(e,j.scrollLeft)},this.setScrollRightButton=function(e){M.setButtonMobileReady(e),M.setButtonOnClick(e,j.scrollRight)},this.setPlayPauseButton=function(e){M.setButtonMobileReady(e),1==H.isPlayMode&&0==H.isPaused&&e.addClass("ug-pause-icon"),C.on(j.events.START_PLAY,function(){e.addClass("ug-pause-icon")}),C.on(j.events.STOP_PLAY,function(){e.removeClass("ug-pause-icon")}),M.setButtonOnClick(e,function(){0==H.isPlayMode||1==H.isPaused?j.startAutoplay():j.stopAutoplay()})}}function UGTabs(){function e(){"select"==s.tabs_type?o.change(n):r.click(i)}function t(e){a.requestNewItems(e)}function i(){var e=s.tabs_class_selected,i=jQuery(this);if(i.hasClass(e))return!0;r.not(i).removeClass(e),i.addClass(e);var n=i.data("catid");return!n||void t(n)}function n(){var e=jQuery(this).val();return!e||void t(e)}var r,o,a=(jQuery(this),new UniteGalleryMain),s=(new UGFunctions,{tabs_type:"tabs",tabs_container:"#ug_tabs",tabs_class_selected:"ug-tab-selected"});this.events={},this.destroy=function(){o&&o.off("change"),r&&r.off("click")},this.init=function(e,t){!function(e,t){a=e,jQuery(a),"select"==(s=jQuery.extend(s,t)).tabs_type?o=jQuery(s.tabs_container):r=jQuery(s.tabs_container+" .ug-tab")}(e,t)},this.run=function(){e()}}function UG_API(e){function t(e){var t={index:e.index,title:e.title,description:e.description,urlImage:e.urlImage,urlThumb:e.urlThumb},i=e.objThumbImage.data();for(var n in i){switch(n){case"image":case"description":continue}t[n]=i[n]}return t}var i,n=this,r=(jQuery(n),new UniteGalleryMain),o=[];r=e,i=jQuery(e),this.events={API_INIT_FUNCTIONS:"api_init",API_ON_EVENT:"api_on_event"},this.on=function(e,a,s){switch(!0!==s&&o.push({event:e,func:a}),e){case"item_change":i.on(r.events.ITEM_CHANGE,function(){var e=t(r.getSelectedItem());a(e.index,e)});break;case"resize":i.on(r.events.SIZE_CHANGE,a);break;case"enter_fullscreen":i.on(r.events.ENTER_FULLSCREEN,a);break;case"exit_fullscreen":i.on(r.events.EXIT_FULLSCREEN,a);break;case"play":i.on(r.events.START_PLAY,a);break;case"stop":i.on(r.events.STOP_PLAY,a);break;case"pause":i.on(r.events.PAUSE_PLAYING,a);break;case"continue":i.on(r.events.CONTINUE_PLAYING,a);break;case"open_lightbox":i.on(r.events.OPEN_LIGHTBOX,a);break;case"close_lightbox":i.on(r.events.CLOSE_LIGHTBOX,a);break;default:console&&console.log("wrong api event: "+e)}i.trigger(n.events.API_ON_EVENT,[e,a])},this.play=function(){r.startPlayMode()},this.stop=function(){r.stopPlayMode()},this.togglePlay=function(){r.togglePlayMode()},this.enterFullscreen=function(){r.toFullScreen()},this.exitFullscreen=function(){r.exitFullScreen()},this.toggleFullscreen=function(){r.toggleFullscreen()},this.resetZoom=function(){var e=r.getObjSlider();return!!e&&void e.zoomBack()},this.zoomIn=function(){var e=r.getObjSlider();return!!e&&void e.zoomIn()},this.zoomOut=function(){var e=r.getObjSlider();return!!e&&void e.zoomOut()},this.nextItem=function(){r.nextItem()},this.prevItem=function(){r.prevItem()},this.selectItem=function(e){r.selectItem(e)},this.resize=function(e,t){t?r.resize(e,t):r.resize(e)},this.getItem=function(e){return t(r.getItem(e))},this.getNumItems=function(){return r.getNumItems()},this.reloadGallery=function(e){if(!e)e={};r.run(null,e),o.map(function(e){n.on(e.event,e.func,!0)})},this.destroy=function(){r.destroy()},i.trigger(n.events.API_INIT_FUNCTIONS,n)}function UGLoadMore(){function e(){n.show()}function t(){r.hide(),o.show();var e={numitems:s.getNumItems()};s.ajaxRequest("front_loadmore",e,function(e){o.hide();var t=e.html_items;1==e.show_loadmore?(r.blur().show(),o.hide()):n.hide(),s.addItems(t)},function(e){e="Ajax Error!"+e,o.hide(),a.show(),a.html(e)})}function i(){s.onEvent("tiles_first_placed",e),r.click(t)}var n,r,o,a,s=(jQuery(this),new UniteGalleryMain),l=(new UGFunctions,{isInited:!1}),u={loadmore_container:"ug_loadmore_wrapper"};this.events={},this.destroy=function(){return 0!=l.isInited&&void 0},this.init=function(e,t){return s=e,jQuery(s),u=jQuery.extend(u,t),0!=(n=jQuery("#"+u.loadmore_container)).length&&0!=(r=n.find(".ug-loadmore-button")).length&&0!=(o=n.find(".ug-loadmore-loader")).length&&0!=(a=n.find(".ug-loadmore-error")).length&&(l.isInited=!0),0==l.isInited?(trace("load more not inited, something is wrong"),!1):void i()}}var g_ugFunctions=new UGFunctions;!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,s=l.call(arguments,1),u=0,d=0,_=0,g=0;if((t=e.event.fix(a)).type="mousewheel","detail"in a&&(_=-1*a.detail),"wheelDelta"in a&&(_=a.wheelDelta),"wheelDeltaY"in a&&(_=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*_,_=0),u=0===_?d:_,"deltaY"in a&&(u=_=-1*a.deltaY),"deltaX"in a&&(d=a.deltaX,0===_&&(u=-1*d)),0!==_||0!==d){if(1===a.deltaMode){var c=e.data(this,"mousewheel-line-height");u*=c,_*=c,d*=c}else if(2===a.deltaMode){var h=e.data(this,"mousewheel-page-height");u*=h,_*=h,d*=h}return g=Math.max(Math.abs(_),Math.abs(d)),(!o||o>g)&&(o=g,n(a,g)&&(o/=40)),n(a,g)&&(u/=40,d/=40,_/=40),u=Math[u>=1?"floor":"ceil"](u/o),d=Math[d>=1?"floor":"ceil"](d/o),_=Math[_>=1?"floor":"ceil"](_/o),t.deltaX=d,t.deltaY=_,t.deltaFactor=o,t.deltaMode=0,s.unshift(t,u,d,_),r&&clearTimeout(r),r=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function i(){o=null}function n(e,t){return d.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var r,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var u=a.length;u;)e.event.fixHooks[a[--u]]=e.event.mouseHooks;var d=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var i=s.length;i;)this.addEventListener(s[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",d.getLineHeight(this)),e.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=s.length;e;)this.removeEventListener(s[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):"object"==typeof module&&"object"==typeof module.exports?exports=e(require("jquery")):e(jQuery)}(function(e){function t(e){var t=7.5625,i=2.75;return 1/i>e?t*e*e:2/i>e?t*(e-=1.5/i)*e+.75:2.5/i>e?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375}e.easing.jswing=e.easing.swing;var i=Math.pow,n=Math.sqrt,r=Math.sin,o=Math.cos,a=Math.PI,s=1.70158,l=1.525*s,u=s+1,d=2*a/3,_=2*a/4.5;e.extend(e.easing,{def:"easeOutQuad",swing:function(t){return e.easing[e.easing.def](t)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return.5>e?2*e*e:1-i(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-i(1-e,3)},easeInOutCubic:function(e){return.5>e?4*e*e*e:1-i(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-i(1-e,4)},easeInOutQuart:function(e){return.5>e?8*e*e*e*e:1-i(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-i(1-e,5)},easeInOutQuint:function(e){return.5>e?16*e*e*e*e*e:1-i(-2*e+2,5)/2},easeInSine:function(e){return 1-o(e*a/2)},easeOutSine:function(e){return r(e*a/2)},easeInOutSine:function(e){return-(o(a*e)-1)/2},easeInExpo:function(e){return 0===e?0:i(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-i(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:.5>e?i(2,20*e-10)/2:(2-i(2,-20*e+10))/2},easeInCirc:function(e){return 1-n(1-i(e,2))},easeOutCirc:function(e){return n(1-i(e-1,2))},easeInOutCirc:function(e){return.5>e?(1-n(1-i(2*e,2)))/2:(n(1-i(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-i(2,10*e-10)*r((10*e-10.75)*d)},easeOutElastic:function(e){return 0===e?0:1===e?1:i(2,-10*e)*r((10*e-.75)*d)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:.5>e?-i(2,20*e-10)*r((20*e-11.125)*_)/2:i(2,-20*e+10)*r((20*e-11.125)*_)/2+1},easeInBack:function(e){return u*e*e*e-s*e*e},easeOutBack:function(e){return 1+u*i(e-1,3)+s*i(e-1,2)},easeInOutBack:function(e){return.5>e?i(2*e,2)*(2*(l+1)*e-l)/2:(i(2*e-2,2)*((l+1)*(2*e-2)+l)+2)/2},easeInBounce:function(e){return 1-t(1-e)},easeOutBounce:t,easeInOutBounce:function(e){return.5>e?(1-t(1-2*e))/2:(1+t(2*e-1))/2}})}),function(e,t){function i(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=l(),n=i._rgba=[];return t=t.toLowerCase(),c(s,function(e,r){var o,a=r.re.exec(t),s=a&&r.parse(a),l=r.space||"rgba";return s?(o=i[l](s),i[u[l].cache]=o[u[l].cache],n=i._rgba=o._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,o.transparent),i):o[t]}function r(e,t,i){return 1>6*(i=(i+1)%1)?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e}if(void 0===e.cssHooks)return!1;var o,a=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,n,r){return new e.Color.fn.parse(t,i,n,r)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},_=l.support={},g=e("<p>")[0],c=e.each;g.style.cssText="background-color:rgba(1,1,1,.5)",_.rgba=g.style.backgroundColor.indexOf("rgba")>-1,c(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(r,a,s,d){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(a),a=t);var _=this,g=e.type(r),h=this._rgba=[];return a!==t&&(r=[r,a,s,d],g="array"),"string"===g?this.parse(n(r)||o._default):"array"===g?(c(u.rgba.props,function(e,t){h[t.idx]=i(r[t.idx],t)}),this):"object"===g?(c(u,r instanceof l?function(e,t){r[t.cache]&&(_[t.cache]=r[t.cache].slice())}:function(t,n){var o=n.cache;c(n.props,function(e,t){if(!_[o]&&n.to){if("alpha"===e||null==r[e])return;_[o]=n.to(_._rgba)}_[o][t.idx]=i(r[e],t,!0)}),_[o]&&e.inArray(null,_[o].slice(0,3))<0&&(_[o][3]=1,n.from&&(_._rgba=n.from(_[o])))}),this):void 0},is:function(e){var t=l(e),i=!0,n=this;return c(u,function(e,r){var o,a=t[r.cache];return a&&(o=n[r.cache]||r.to&&r.to(n._rgba)||[],c(r.props,function(e,t){return null!=a[t.idx]?i=a[t.idx]===o[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return c(u,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=l(e),r=n._space(),o=u[r],a=0===this.alpha()?l("transparent"):this,s=a[o.cache]||o.to(a._rgba),_=s.slice();return n=n[o.cache],c(o.props,function(e,r){var o=r.idx,a=s[o],l=n[o],u=d[r.type]||{};null!==l&&(null===a?_[o]=l:(u.mod&&(l-a>u.mod/2?a+=u.mod:a-l>u.mod/2&&(a-=u.mod)),_[o]=i((l-a)*t+a,r)))}),this[r](_)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),r=l(t)._rgba;return l(e.map(i,function(e,t){return(1-n)*r[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,r=e[1]/255,o=e[2]/255,a=e[3],s=Math.max(n,r,o),l=Math.min(n,r,o),u=s-l,d=s+l,_=.5*d;return t=l===s?0:n===s?60*(r-o)/u+360:r===s?60*(o-n)/u+120:60*(n-r)/u+240,i=0===u?0:.5>=_?u/d:u/(2-d),[Math.round(t)%360,i,_,null==a?1:a]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],a=.5>=n?n*(1+i):n+i-n*i,s=2*n-a;return[Math.round(255*r(s,a,t+1/3)),Math.round(255*r(s,a,t)),Math.round(255*r(s,a,t-1/3)),o]},c(u,function(n,r){var o=r.props,s=r.cache,u=r.to,d=r.from;l.fn[n]=function(n){if(u&&!this[s]&&(this[s]=u(this._rgba)),n===t)return this[s].slice();var r,a=e.type(n),_="array"===a||"object"===a?n:arguments,g=this[s].slice();return c(o,function(e,t){var n=_["object"===a?e:t.idx];null==n&&(n=g[t.idx]),g[t.idx]=i(n,t)}),d?((r=l(d(g)))[s]=g,r):l(g)},c(o,function(t,i){l.fn[t]||(l.fn[t]=function(r){var o,s=e.type(r),l="alpha"===t?this._hsla?"hsla":"rgba":n,u=this[l](),d=u[i.idx];return"undefined"===s?d:("function"===s&&(r=r.call(this,d),s=e.type(r)),null==r&&i.empty?this:("string"===s&&((o=a.exec(r))&&(r=d+parseFloat(o[2])*("+"===o[1]?1:-1))),u[i.idx]=r,this[l](u)))})})}),l.hook=function(t){var i=t.split(" ");c(i,function(t,i){e.cssHooks[i]={set:function(t,r){var o,a,s="";if("transparent"!==r&&("string"!==e.type(r)||(o=n(r)))){if(r=l(o||r),!_.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===i?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=e.css(a,"backgroundColor"),a=a.parentNode}catch(e){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{t.style[i]=r}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(e){e.mlp={x:0,y:0},e(function t(){try{var i=this===document?e(this):e(this).contents()}catch(e){return!1}i.mousemove(function(t){e.mlp={x:t.pageX,y:t.pageY}}),i.find("iframe").on("load",t)}),e.fn.ismouseover=function(){var t=!1;return this.eq(0).each(function(){var i=e(this).is("iframe")?e(this).contents().find("body"):e(this),n=i.offset();t=n.left<=e.mlp.x&&n.left+i.outerWidth()>e.mlp.x&&n.top<=e.mlp.y&&n.top+i.outerHeight()>e.mlp.y}),t}}(jQuery);var g_ugYoutubeAPI=new UGYoutubeAPI,g_ugVimeoAPI=new UGVimeoAPI,g_ugHtml5MediaAPI=new UGHtml5MediaAPI,g_ugSoundCloudAPI=new UGSoundCloudAPI,g_ugWistiaAPI=new UGWistiaAPI;jQuery.fn.unitegallery=function(e){var t="#"+jQuery(this).attr("id");if(!e)e={};var i=new UniteGalleryMain;return i.run(t,e),new UG_API(i)};function UGTheme_tiles(){var e,t,n,i,r,o=new UniteGalleryMain,s=new UGTiles,a=new UGLightbox,l=new UGFunctions,d=new UGTileDesign,u={theme_enable_preloader:!0,theme_preloading_height:200,theme_preloader_vertpos:100,theme_gallery_padding:0,theme_appearance_order:"normal",theme_auto_open:null},_={gallery_width:"100%"},h={showPreloader:!1};function p(i,r){o=i,u=jQuery.extend(u,_),u=jQuery.extend(u,r),function(){1==u.theme_enable_preloader&&(h.showPreloader=!0);switch(u.theme_appearance_order){default:case"normal":break;case"shuffle":o.shuffleItems();break;case"keep":u.tiles_keep_order=!0}}(),o.setOptions(u),o.setFreestyleMode(),t=i.getObjects(),e=jQuery(i),n=t.g_objWrapper,s.init(i,u),a.init(i,u),d=s.getObjTileDesign()}function g(){i&&(i.fadeTo(0,1),n.height(u.theme_preloading_height),l.placeElement(i,"center",u.theme_preloader_vertpos)),function(){i&&o.onEvent(s.events.TILES_FIRST_PLACED,function(){n.height("auto"),i.hide()});jQuery(d).on(d.events.TILE_CLICK,f),e.on(o.events.GALLERY_BEFORE_REQUEST_ITEMS,m),jQuery(a).on(a.events.LIGHTBOX_INIT,y)}(),s.run(),a.run()}function c(){n.addClass("ug-theme-tiles"),n.append("<div class='ug-tiles-wrapper' style='position:relative'></div>"),1==h.showPreloader&&(n.append("<div class='ug-tiles-preloader ug-preloader-trans'></div>"),(i=n.children(".ug-tiles-preloader")).fadeTo(0,0)),r=n.children(".ug-tiles-wrapper"),u.theme_gallery_padding&&n.css({"padding-left":u.theme_gallery_padding+"px","padding-right":u.theme_gallery_padding+"px"}),s.setHtml(r),a.putHtml(),g()}function f(e,t){t=jQuery(t);var n=d.getItemByTile(t).index;a.open(n)}function m(){if(r.hide(),i){i.show();var e=l.getElementSize(i).bottom+30;n.height(e)}}function y(){null!==u.theme_auto_open&&(a.open(u.theme_auto_open),u.theme_auto_open=null)}this.destroy=function(){jQuery(d).off(d.events.TILE_CLICK),o.destroyEvent(s.events.TILES_FIRST_PLACED),e.off(o.events.GALLERY_BEFORE_REQUEST_ITEMS),jQuery(a).off(a.events.LIGHTBOX_INIT),s.destroy(),a.destroy()},this.run=function(){c()},this.addItems=function(){s.runNewItems()},this.init=function(e,t){p(e,t)}}"undefined"!=typeof g_ugFunctions?g_ugFunctions.registerTheme("tiles"):jQuery(document).ready(function(){g_ugFunctions.registerTheme("tiles")}); 